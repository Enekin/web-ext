{"version":3,"sources":["webpack:///webpack/bootstrap df815827b213ec1bb8cc","webpack:///./src/util/logger.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///./node_modules/babel-runtime/helpers/asyncToGenerator.js","webpack:///./src/errors.js","webpack:///external \"mocha\"","webpack:///external \"chai\"","webpack:///external \"path\"","webpack:///external \"sinon\"","webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///external \"mz\"","webpack:///./tests/unit/helpers.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/extend.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./src/util/temp-dir.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/client-methods.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///./src/firefox/remote.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./src/cmd/build.js","webpack:///external \"es6-promisify\"","webpack:///./src/util/manifest.js","webpack:///./src/cmd/index.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./src/util/file-filter.js","webpack:///external \"events\"","webpack:///./src/firefox/index.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///external \"fs\"","webpack:///./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/babel-runtime/helpers/typeof.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///./node_modules/babel-runtime/helpers/inherits.js","webpack:///./tests/unit/test-util/test.manifest.js","webpack:///external \"deepcopy\"","webpack:///./src/cmd/docs.js","webpack:///./src/cmd/lint.js","webpack:///./src/cmd/run.js","webpack:///./src/util/desktop-notifier.js","webpack:///./src/cmd/sign.js","webpack:///./src/program.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/_classof.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///./node_modules/core-js/library/modules/_new-promise-capability.js","webpack:///external \"event-to-promise\"","webpack:///./src/watcher.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///./src/util/artifacts.js","webpack:///external \"tty\"","webpack:///./src/firefox/preferences.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/tab.js","webpack:///./src/extension-runners/firefox-desktop.js","webpack:///./src/extension-runners/firefox-android.js","webpack:///./node_modules/babel-runtime/helpers/objectWithoutProperties.js","webpack:///./src/config.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/modules/_species-constructor.js","webpack:///./node_modules/core-js/library/modules/_task.js","webpack:///./node_modules/core-js/library/modules/_perform.js","webpack:///./node_modules/core-js/library/modules/_promise-resolve.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///external \"parse-json\"","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///external \"bunyan\"","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///external \"es6-error\"","webpack:///external \"firefox-profile\"","webpack:///./src/util/is-directory.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/jsobject.js","webpack:///external \"js-select\"","webpack:///external \"net\"","webpack:///./src/extension-runners/index.js","webpack:///external \"readline\"","webpack:///./src/util/adb.js","webpack:///external \"stream\"","webpack:///./src/util/file-exists.js","webpack:///./src/util/updates.js","webpack:///external \"os\"","webpack:///external \"camelcase\"","webpack:///external \"git-rev-sync\"","webpack:///./tests/unit/runner.js","webpack:///external \"babel-polyfill\"","webpack:///external \"chai-as-promised\"","webpack:///./tests/unit .*","webpack:///./tests/unit/test-cmd/test.build.js","webpack:///external \"regenerator-runtime\"","webpack:///./node_modules/babel-runtime/core-js/promise.js","webpack:///./node_modules/core-js/library/fn/promise.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/core-js/library/modules/es6.promise.js","webpack:///./node_modules/core-js/library/modules/_an-instance.js","webpack:///./node_modules/core-js/library/modules/_for-of.js","webpack:///./node_modules/core-js/library/modules/_invoke.js","webpack:///./node_modules/core-js/library/modules/_microtask.js","webpack:///./node_modules/core-js/library/modules/_user-agent.js","webpack:///./node_modules/core-js/library/modules/_redefine-all.js","webpack:///./node_modules/core-js/library/modules/_set-species.js","webpack:///./node_modules/core-js/library/modules/es7.promise.finally.js","webpack:///./node_modules/core-js/library/modules/es7.promise.try.js","webpack:///external \"watchpack\"","webpack:///external \"debounce\"","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./src/util/zip-dir.js","webpack:///external \"zip-dir\"","webpack:///external \"strip-json-comments\"","webpack:///./node_modules/babel-runtime/core-js/is-iterable.js","webpack:///./node_modules/core-js/library/fn/is-iterable.js","webpack:///./node_modules/core-js/library/modules/core.is-iterable.js","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/_set-proto.js","webpack:///./node_modules/babel-runtime/core-js/object/create.js","webpack:///./node_modules/core-js/library/fn/object/create.js","webpack:///./node_modules/core-js/library/modules/es6.object.create.js","webpack:///external \"mkdirp\"","webpack:///external \"multimatch\"","webpack:///external \"tmp\"","webpack:///./node_modules/babel-runtime/core-js/object/assign.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///external \"yauzl\"","webpack:///external \"fx-runner\"","webpack:///./node_modules/@cliqz-oss/node-firefox-connect/index.js","webpack:///external \"es6-promise\"","webpack:///./node_modules/@cliqz-oss/firefox-client/index.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/browser.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/client.js","webpack:///external \"colors\"","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/console.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/memory.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/dom.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/domnode.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/network.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/stylesheets.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/webapps.js","webpack:///external \"child_process\"","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/device.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/simulator.js","webpack:///./tests/unit/test-cmd/test.docs.js","webpack:///external \"opn\"","webpack:///./tests/unit/test-cmd/test.lint.js","webpack:///external \"addons-linter\"","webpack:///./tests/unit/test-cmd/test.run.js","webpack:///external \"node-notifier\"","webpack:///external \"adbkit\"","webpack:///./tests/unit/test-cmd/test.sign.js","webpack:///external \"copy-dir\"","webpack:///external \"sign-addon\"","webpack:///./tests/unit/test-extension-runners/test.extension-runners.js","webpack:///./tests/unit/test-extension-runners/test.firefox-android.js","webpack:///./tests/unit/test-extension-runners/test.firefox-desktop.js","webpack:///./tests/unit/test-firefox/test.firefox.js","webpack:///./tests/unit/test-firefox/test.preferences.js","webpack:///./tests/unit/test-firefox/test.remote.js","webpack:///./tests/unit/test-util/test.adb.js","webpack:///./tests/unit/test-util/test.artifacts.js","webpack:///./tests/unit/test-util/test.desktop-notifier.js","webpack:///./tests/unit/test-util/test.file-exists.js","webpack:///./tests/unit/test-util/test.file-filter.js","webpack:///./tests/unit/test-util/test.is-directory.js","webpack:///./tests/unit/test-util/test.logger.js","webpack:///./tests/unit/test-util/test.temp-dir.js","webpack:///./tests/unit/test-util/test.updates.js","webpack:///external \"update-notifier\"","webpack:///./tests/unit/test.config.js","webpack:///./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack:///./node_modules/babel-runtime/core-js/array/from.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///external \"yargs\"","webpack:///external \"require-uncached\"","webpack:///external \"decamelize\"","webpack:///./tests/unit/test.errors.js","webpack:///./tests/unit/test.program.js","webpack:///./node_modules/babel-runtime/helpers/defineProperty.js","webpack:///./tests/unit/test.setup.js","webpack:///./tests/unit/test.watcher.js","webpack:///./tests/unit/test.web-ext.js","webpack:///./src/main.js","webpack:///./src/cmd ^\\.\\/.*$"],"names":["createLogger","ConsoleStream","verbose","isCapturing","capturedMessages","name","msg","level","prefix","packet","localProcess","process","thisLevel","TRACE","INFO","format","push","stdout","write","consoleStream","filename","createBunyanLog","replace","streams","type","stream","onlyInstancesOf","onlyErrorsWithCode","isErrorWithCode","WebExtError","message","UsageError","InvalidManifest","RemoteTempInstallNotSupported","MultiExtensionsReloadError","errorsMap","errors","sourceDir","error","String","errorsBySourceDir","predicate","errorHandler","codeWanted","throwError","Array","isArray","indexOf","code","errno","fixturePath","makeSureItFails","fake","createFakeProcess","fakeFirefoxClient","getFakeFirefox","getFakeRemoteFirefox","defaultFirefoxApp","log","__filename","ZipFile","_zip","_close","open","then","zip","Promise","resolve","once","close","onRead","reject","Error","on","entry","fileNames","readEach","fileName","catch","pathParts","join","__dirname","original","methods","skipProperties","stub","props","obj","concat","Object","getOwnPropertyNames","getPrototypeOf","proto","key","hasOwnProperty","definition","warn","keys","forEach","spy","StubChildProcess","stderr","kill","requestResult","requestError","makeRequestResult","makeRequestError","disconnect","request","callback","client","makeRequest","TCPConnectError","ErrorWithCode","basicManifest","version","applications","gecko","id","FakeExtensionRunner","params","runnerName","getName","fn","implementations","port","profile","firefox","allImplementations","createProfile","copyProfile","useProfile","installExtension","run","debuggerPort","prototype","FakeStdin","ReadStream","withTempDir","makePromise","tmpDir","TempDir","create","successHandler","_path","undefined","_removeTempDir","createTempDir","dir","multiArgs","unsafeCleanup","args","tmpPath","removeTempDir","debug","path","remove","promiseResult","REMOTE_PORT","connectToFirefox","RemoteFirefox","connect","maxRetries","retryInterval","retries","setTimeout","lastError","stack","establishConnection","connectWithMaxRetries","checkedForAddonReloading","info","JSON","stringify","addon","to","actor","response","addonPath","tabsResponse","addonsActor","installResponse","addonId","addons","map","a","addonRequest","requestTypes","supportedRequestTypes","getInstalledAddon","checkForAddonReloading","Date","toTimeString","messageFile","manifestData","messageData","messageContents","extensionName","readFile","match","messageName","getDefaultLocalizedName","fileFilter","artifactsDir","overwriteDest","showReadyMessage","eventToPromise","filter","wantFile","buffer","default_locale","packageName","safeFileName","extensionPath","flags","end","defaultPackageCreator","toLowerCase","asNeeded","ignoreFiles","createFileFilter","onSourceChange","packageCreator","rebuildAsNeeded","createPackage","result","onChange","shouldWatchFile","build","getManifestId","manifestFile","manifestContents","toString","length","getValidatedManifest","options","require","runCommand","default","lint","sign","docs","isSubPath","src","target","relate","relative","startsWith","sep","FileFilter","baseIgnoredPatterns","filesToIgnore","addToIgnoreList","file","resolvedPath","files","charAt","resolvedFile","resolveWithSourceDir","substr","filePath","matches","portToTry","retriesLeft","defaultRemotePortFinder","fxRunner","findRemotePort","firefoxBinary","binaryArgs","remotePort","env","defaultFirefoxEnv","results","binary","data","trim","profilePathOrName","ProfileFinder","Finder","fsStat","stat","DEFAULT_PROFILES_NAMES","includes","baseProfileDir","locateUserDirectory","profilesIniPath","finder","readProfiles","normalizedProfileDirPath","normalize","profiles","Name","Default","profileFullPath","IsRelative","Path","isDefaultProfile","profilePath","app","configureThisProfile","configureProfile","isFirefoxDefaultProfile","customPrefs","isForbiddenProfile","destinationDirectory","profileDirectory","copyFromUserProfile","copy","copyByName","dirExists","asProxy","extensionsDir","mkdir","isDir","destPath","writeStream","createWriteStream","readStream","createReadStream","pipe","all","XPCOM_DEBUG_BREAK","NS_TRACE_MALLOC_DISABLE_STACKS","getPrefs","prefs","pref","setPreference","customPrefsStr","custom","updatePreferences","manifestWithoutApps","writeManifest","deepEqual","nonExistentDir","include","badManifest","writeFile","noNameManifest","noVersionManifest","incompleteManifest","strictEqual","manifestWithErrors","manifestWithComments","invalidManifestWithComments","promise","isRejected","equal","destDir","url","openUrl","boring","metadata","output","pretty","selfHosted","warningsAsErrors","createLinter","shouldExitProgram","linter","config","logLevel","Boolean","shouldScanFile","_","runAsBinary","browserConsole","firefoxArg","firefoxProfile","keepProfileChanges","noInput","noReload","preInstall","startUrl","adbBin","adbHost","adbPort","adbDevice","firefoxApk","buildExtension","desktopNotifications","firefoxApp","firefoxClient","reloadStrategy","MultiExtensionRunner","runners","commonRunnerParams","extensions","firefoxDesktopRunnerParams","firefoxDesktopRunner","firefoxAndroidRunnerParams","buildSourceDir","extensionSourceDir","tmpArtifactsDir","firefoxAndroidRunner","extensionRunner","showDesktopNotification","defaultLog","title","icon","notifier","notify","err","res","extensionIdFile","content","lines","split","line","getIdFromSourceDir","saveIdToSourceDir","apiKey","apiProxy","apiSecret","apiUrlPrefix","timeout","preValidatedManifest","signAddon","buildResult","idFromSourceDir","manifestId","xpiPath","downloadDir","signingResult","success","defaultVersionGetter","main","envPrefix","Program","argv","absolutePackageDir","cwd","slice","yargsInstance","verboseEnabled","yargs","strict","commands","description","executor","commandOptions","command","yargsForCmd","demandCommand","exitProcess","global","demand","logStream","makeVerbose","checkForUpdates","systemProcess","getVersion","applyConfigToArgv","discoverConfigFiles","loadJSConfigFile","globalEnv","cmd","enableVerboseMode","adjustedArgv","configFiles","configDiscovery","discoveredConfigs","niceFileList","f","homedir","configFileName","configObject","argvFromCLI","exit","packageData","parse","branch","long","runOptions","program","usage","help","alias","setGlobalOptions","describe","requiresArg","coerce","choices","execute","proxyFileChanges","watcher","executeImmediately","watch","now","asyncMkdirp","defaultAsyncMkdirp","stats","isDirectory","access","W_OK","prepareArtifactsDir","coerceCLICustomPreference","nonOverridablePreferences","prefsCommon","prefsFennec","prefsFirefox","common","fennec","appPrefs","cliPrefs","prefsAry","value","test","parseInt","FirefoxDesktopExtensionRunner","reloadableExtensions","Map","cleanupCallbacks","Set","setupProfileDir","startFirefoxInstance","reloadErrors","reloadExtensionBySourceDir","reloadError","set","size","get","remoteFirefox","reloadAddon","add","runningInfo","extension","urls","arg","cleanupCb","installTemporaryAddon","installResult","FirefoxAndroidExtensionRunner","adbExtensionsPathBySourceDir","printIgnoredParamsWarnings","ADBUtils","adbUtils","adbDevicesDiscoveryAndSelect","apkPackagesDiscoveryAndSelect","adbCheckRuntimePermissions","adbForceStopSelectedPackage","adbPrepareProfileDir","adbStartSelectedPackage","buildAndPushExtensions","adbDiscoveryAndForwardRDPUnixSocket","rdpInstallExtensions","buildAndPushExtension","selectedAdbDevice","selectedArtifactsDir","exiting","clearArtifactsDir","devices","discoverDevices","devicesMsg","dev","foundDevices","device","discoverInstalledFirefoxAPKs","packages","pkgsListMsg","pkgs","pkg","selectedFirefoxApk","filteredPackages","pkgsList","amForceStopAPK","getAndroidVersionNumber","androidVersion","Number","isNaN","ensureRequiredAPKRuntimePermissions","getOrCreateArtifactsDir","deviceProfileDir","getDeviceProfileDir","runShellCommand","pushFile","profileDir","startFirefoxAPK","extFileName","basename","adbExtensionPath","firefoxAndroidTimeout","stdin","unixSocketDiscoveryRetryInterval","unixSocketDiscoveryMaxTime","handleCtrlC","str","ctrl","setUserAbortDiscovery","isTTY","emitKeypressEvents","setRawMode","discoverRDPUnixSocket","maxDiscoveryTime","selectedRDPSocketFile","removeListener","chooseLocalTcpPort","tcpPort","setupForward","selectedTCPPort","srv","createServer","listen","freeTcpPort","address","getHomeDir","magicConfigName","possibleConfigs","resolvedFileName","configs","existingConfigs","newArgv","option","decamelizedOptName","expectedType","optionType","defaultValue","wasValueSetOnCLI","resolvedFilePath","endsWith","webExt","createExtensionRunner","defaultWatcherCreator","defaultReloadStrategy","extensionRunners","promises","runner","reloadPromise","reloadAllExtensions","handleReloadResults","cleanupCallback","registerCleanup","reloadExtension","createWatcher","allowInput","watchedSourceDir","pause","keypressUsageInfo","userExit","keyPressed","pid","asyncFn","wrapADBCall","adb","adbClient","createClient","bin","host","artifactsDirMap","userAbortDiscovery","deviceId","shell","util","readAll","listDevices","pmList","androidVersionNumber","apk","permissions","permissionsMap","perm","pmDumpLogs","testDirOut","delete","localPath","devicePath","transfer","startActivity","wait","action","component","extras","rdpUnixSockets","discoveryStartedAt","pop","remote","local","forward","fileIsReadable","constants","R_OK","isFile","fileExists","updateNotifier","updateCheckInterval","use","context","zipFile","extractFilenames","sort","assert","calledWithMatch","messageFileName","writeFileSync","manifestWithRepeatingPattern","instanceOf","basicLocalizedManifest","notInclude","firstCall","called","typeOf","unlink","packageResult","calledOnce","testFileName","fakeEventToPromise","readdir","zipDir","urlToOpen","calledWith","setUp","lintResult","runLinter","actualLintResult","ok","tempInstallResult","prepareRun","fakeInstallResult","customArgv","customOpt","androidRunnerStub","desktopRunnerStub","restore","expectedStartUrls","runnerParams","expectedRunnerParams","getFakeManifest","notCalled","func","getStubs","signingConfig","downloadedFiles","stubs","extraArgs","extraOptions","copyDirAsPromised","customId","_sign","realResult","savedId","extensionId","createFakeExtensionRunner","overriddenMethods","entries","fnName","callsFake","prepareExtensionRunnerParams","exitKeypressLoop","emit","console","fakeExtensionRunner","anotherFakeExtensionRunner","runnerInstance","callCount","r","waitRegisterCleanup","race","checkIncompleteCleanup","prepare","customConfig","createdWatcher","stubExtensionRunner","Readable","argOverride","optOverride","sentArgs","registeredCb","fakeStdin","calledTwice","fakeKill","callOrder","calledThrice","tempInstallResultMissingAddonId","builtFileName","fakeBuiltExtensionPath","fakeRDPUnixSocketFile","fakeFirefoxApp","fakeRemoteFirefox","fakeADBUtils","fakeRemoteFirefoxClient","prepareSelectedDeviceAndAPKParams","overriddenProperties","prepareTestParams","testExceptionCallback","actualException","testUsageError","expectedErrorMessage","anotherCallback","isString","actualError","firefoxClientParams","clear","finalCallback","waitFinalCallback","expectedMsg","expectInvalidVersionError","NaN","expectNoGrantedPermissionDiscovery","testGrantedPermissionDiscovery","startCapturing","optionsWarningTestCases","expectedMessage","testCase","flushCapturedLogs","stopCapturing","firefoxProcess","extensionRunnerParams","expectedBinaryArgs","any","has","array","deepEquals","testBinaryArgs","fakeProfile","install","dirPath","profilesDefs","idx","k","createFakeProfilesIni","withBaseProfile","baseProfile","createFakeProfileFinder","profilesDirPath","FakeProfileFinder","fakeFirefoxProcess","eventName","createFakeFxRunner","firefoxOverrides","fxProcess","runFirefox","_WEB_EXT_FIREFOX_ENV_TEST","declaredEnv","someError","event","handler","writeStdout","writeStderr","userPrefs","cb","profileToCopy","defaultPreferences","thing","isDefault","isDevEditionDefault","isNotDefault","absProfilePath","isFirefoxDefaultPath","isDevEditionDefaultPath","isManuallyDefault","fakeFsStat","exception","prefFile","withTempProfile","fakePrefGetter","returns","configuredProfile","testPromise","installBasicExt","proxyFile","proxyData","isNumber","throws","isObject","nonChangeablePrefs","prop","isUndefined","prepareConnection","fakeAddon","makeInstance","listener","secondCall","thirdCall","conn","stubResponse","someAddonId","returnedAddon","checkedAddon","finalAddon","addonToCheck","requestArgs","opt","deps","tryCount","testFn","adbkitUtil","getFakeADBKit","testSpawnADBUsageError","fakeADBPackageList","fakeSocketFilePrefix","fakeUnixSocketFiles","fakeAndroidGrantedPermissions","fakeTransfer","adbUtilReadAllStub","onCall","Buffer","fakeADBClient","originalOn","bind","createSpawnADBErrorSpy","fakeADBError","isFulfilled","from","versionNumber","RegExp","fakeArtifactsDir","fakeTransferPromise","alwaysCalledWithMatch","someFile","resolvedDir","platform","skip","parentDir","fakeAsyncMkdirp","expectedNotification","fakeNotifier","expectedError","fakeLog","exists","newFileFilter","defaultFilter","overrides","fakeProcess","FakeWritableStream","fakeWritableStream","DEBUG","tmpPathExisted","tmp","updateNotifierStub","makeArgv","userCmd","commandDesc","commandExecutor","commandOpt","globalOpt","applyConf","cmdLineSrcDir","overwriteFiles","firstConfigObject","secondConfigObject","resultArgv","numberOfRetries","randomDir","randomKey","randomNumericOption","cmdApiKey","apiUrl","signExtension","randomOption","configFilePath","configObj","_discoverConfigFiles","packageJSON","homeDirConfig","lastDir","chdir","expectedConfig","fakeHomeDir","globalConfig","packageJSONConfig","projectConfig","SyntaxError","TypeError","ErrorWithErrno","execProgram","someOption","globalOption","WEB_EXT_SOME_OPT","valueReceived","someOpt","some","projectRoot","mainOptions","makeConfigLoader","configObjects","conf","fakeCommands","fakeVersionGetter","prop2","fakeLoadJSConfigFile","discoveredFile","fakeApplyConfigToArgv","finalSourceDir","pkgFile","pkgData","testBuildEnv","APPVEYOR","commit","currentTest","state","resolveChange","whenFilesChanged","utimes","defaults","logger","cmdModule","expectedResult","calledWithExactly"],"mappings":"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;AACD,OAZI,CAAP;AAaD;;AAED;;;;;;2BAGe;AACb,UAAI,CAAC,KAAKX,KAAV,EAAiB;AACf,cAAM,IAAIxE,KAAJ,CAAU,kDAAV,CAAN;AACD;AACD,aAAO,KAAKwE,KAAZ;AACD;;AAED;;;;;;;;;;mCAOyB;AAAA;;AACvB,aAAO,UAAC1G,KAAD,EAAW;AAChB,eAAKsH,MAAL;AACA,cAAMtH,KAAN;AACD,OAHD;AAID;;AAED;;;;;;;;;qCAM2B;AAAA;;AACzB,aAAO,UAACuH,aAAD,EAAmB;AACxB,eAAKD,MAAL;AACA,eAAOC,aAAP;AACD,OAHD;AAID;;AAED;;;;;;6BAGS;AACP,UAAI,CAAC,KAAKX,cAAV,EAA0B;AACxB;AACD;AACDxF,UAAIgG,KAAJ,oCAA2C,KAAKC,IAAL,EAA3C;AACA,WAAKT,cAAL,IAAuB,KAAKA,cAAL,EAAvB;AACD;;;;;;;;;;AC/HH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB;AACA,cAAc,SAAS;AACvB;AACA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,+B;;;;;;;AClHA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC,G;;;;;;AC1BD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;;;;;;;ACfA;AACA;AACA;;;;;;;ACFA;AACA;AACA,iCAAiC,QAAQ,mBAAmB,UAAU,EAAE,EAAE;AAC1E,CAAC;;;;;;;ACHD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;;;;;;ACPA,uBAAuB;AACvB;AACA;AACA;;;;;;;;ACHA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wDAAwD,+BAA+B;AACvF;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uFC+IM;AAAA,QACLrB,IADK,uEACUiC,WADV;;AAAA,oFAE0D,EAF1D;AAAA,sCAEJC,gBAFI;AAAA,QAEJA,gBAFI;;AAAA;AAAA;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E,EA2MG0M,OA3MH,CA2MW,MA3MX,EA2MmB,6CA3MnB,EA4MWJ,SAASnM,IA5MpB,EA4M0B,EA5M1B;;AA8MA,SAAOwO,QAAQS,OAAR,CAAgBrD,kBAAhB,EAAoC2C,UAApC,CAAP;AACD,C;;;;;;;ACxjBD;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;ACxCA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;;;;;;ACLA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,kDAAkD;;AAElD;AACA,qEAAqE;AACrE,CAAC;AACD;AACA;AACA;AACA,CAAC;;;;;;;ACXD;AACA;AACA;AACA;;;;;;;ACHA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB,EAAE;;AAE/C;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACPA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACjBA,6C;;;;;;;;;;;;kBC+BwB3P,c;QAgCRsQ,gB,GAAAA,gB;;AA9DhB;;;;AACA;;;;AAEA;;;;AAGA,IAAMza,MAAM,0BAAaC,UAAb,CAAZ;;AAGA;;AAaA;AACA;AACA;AACA;;AAKe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hB,CADI,CAAN;AAGD;AACD,MAAIsO,SAASsW,QAAT,CAAkB,cAAlB,CAAJ,EAAuC;AACrChjB,QAAIgG,KAAJ,CAAU,iDAAV;AACAuT,mBAAeA,aAAa0J,MAAb,IAAuB,EAAtC;AACD;AACD,MAAIlhB,OAAOQ,IAAP,CAAYgX,YAAZ,EAA0BxO,MAA1B,KAAqC,CAAzC,EAA4C;AAC1C/K,QAAIgG,KAAJ,CAAU,iBAAe+c,gBAAf,qCACR,qCADF;AAED;AACD,SAAOxJ,YAAP;AACD,C;;;;;;;;;;;;;;AC9ID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;;AAEA,8BAA8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E,6CAA6C,oCAAoC;AACjF,KAAK,4BAA4B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;ACpEA;AACA,qEAAsE,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;ACFD;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA;AACA;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnFA;AACA;AACA,YAAY;AACZ,GAAG;AACH,YAAY;AACZ;AACA;;;;;;;ACNA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;;AAEA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA,iCAAiC,SAAS,EAAE;AAC5C,CAAC,YAAY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS,qBAAqB;AAC3D,iCAAiC,aAAa;AAC9C;AACA,GAAG,YAAY;AACf;AACA;;;;;;;ACrBA,uC;;;;;;ACAA,kBAAkB,yD;;;;;;ACAlB,mC;;;;;;ACAA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;;;;;;;ACfA,sC;;;;;;ACAA,4C;;;;;;;;;;;;kBCgBwB0B,W;;AAfxB;;AAEA;;AAEA;;;;;;;;;;;AAWe,SAASA,WAAT,CAAqBhV,IAArB,EAAqD;AAClE,SAAO,OAAG6H,IAAH,CAAQ7H,IAAR,EACJ3F,IADI,CACC,UAAC0a,KAAD;AAAA,WAAWA,MAAMC,WAAN,EAAX;AAAA,GADD,EAEJ7Z,KAFI,CAEE,gCAAmB,CAAC,QAAD,EAAW,SAAX,CAAnB,EAA0C,YAAM;AACrD,WAAO,KAAP;AACD,GAFM,CAFF,CAAP;AAKD,C;;;;;;ACtBD;AACA;AACA;;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ACD,SAJI,CAAP;AAKD,OA/BI,CAAP;AAgCD,KAjCD;AAmCD,GApCD;AAsCD,CA3aD,E;;;;;;;AC5BA,gD;;;;;;ACAA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChBA;AACA;AACA;AACA;AACA;;AAEA;AACA,6FAAkF,aAAa,EAAE;;AAEjG;AACA,qDAAqD,4BAA4B;AACjF;AACA;;;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,YAAY,eAAe;AAChC;AACA,KAAK;AACL;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACZA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;ACjCA,8BAA8B;;;;;;;ACA9B;AACA,UAAU;AACV;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;AC7RD;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA,mEAAmE,gBAAgB;AACnF;AACA;AACA,GAAG,4CAA4C,gCAAgC;AAC/E;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;ACpEA;AACA;;AAEA;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,aAAa;AACnC,GAAG;AACH;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;ACnBH;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;ACXH,sC;;;;;;ACAA,qC;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA,qEAAuE,4CAA4C;;;;;;;;;;;;;;;ACDnH;;;;AACA;;;;;;AAEO,IAAMoqB,0BAAS,6CAAf,C;;;;;;ACJP,oC;;;;;;ACAA,gD;;;;;;ACAA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACdA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AClBA;;;;;;;ACAA;;;;;;;ACAA,kBAAkB,yD;;;;;;ACAlB;AACA;;;;;;;ACDA;AACA;AACA,8BAA8B,+CAA8C;;;;;;;ACF5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA;;;;;;;ACxBA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA,8BAA8B,kCAAsC;;;;;;;ACFpE,mC;;;;;;ACAA,uC;;;;;;ACAA,gC;;;;;;ACAA,kBAAkB,yD;;;;;;ACAlB;AACA;;;;;;;ACDA;AACA;;AAEA,0CAA0C,mCAAsC;;;;;;;;ACHhF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU,EAAE;AAChD,mBAAmB,sCAAsC;AACzD,CAAC,qCAAqC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;ACjCD,kC;;;;;;ACAA,sC;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;AACH;;;;;;;ACvBA,wC;;;;;;ACAA,0C;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;AC1HD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,qDAAqD;AACrD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACtPD,mC;;;;;;ACAA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC,wBAAwB;AAC5D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,mCAAmC,wBAAwB;AAC3D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;AC1GD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;ACfD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA,sCAAsC,mBAAmB;AACzD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,yCAAyC,+BAA+B;AACxE,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA,2CAA2C;;AAE3C;AACA;AACA;;AAEA,0CAA0C;;;;;;;AChH1C;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,sCAAsC,sBAAsB;AAC5D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,uCAAuC,qBAAqB;AAC5D;AACA,GAAG;;AAEH;AACA,0CAA0C,qBAAqB;AAC/D;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;AC5KD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC,wBAAwB;AAC5D,GAAG;;AAEH;AACA,mCAAmC,wBAAwB;AAC3D,GAAG;;AAEH;AACA;;AAEA;AACA,GAAG;;AAEH;AACA,qCAAqC,mBAAmB;AACxD;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;ACpGD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA,mCAAmC,aAAa;AAChD;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA,4BAA4B,+BAA+B;AAC3D,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;ACxHD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,4BAA4B,yBAAyB;AACrD,GAAG;AACH;AACA,2BAA2B,yBAAyB;AACpD,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,iCAAiC,yBAAyB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,OAAO;AACP;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,GAAG;AACH;AACA;AACA,+BAA+B,4BAA4B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"unit-tests.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 121);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap df815827b213ec1bb8cc","/* @flow */\nimport bunyan, {nameFromLevel, createLogger as defaultLogCreator}\n  from 'bunyan';\n\n\n// Bunyan-related Flow types\n\nexport type TRACE = 10;\nexport type DEBUG = 20;\nexport type INFO = 30;\nexport type WARN = 40;\nexport type ERROR = 50;\nexport type FATAL = 60;\n\nexport type BunyanLogLevel =\n  TRACE | DEBUG | INFO | WARN | ERROR | FATAL;\n\nexport type BunyanLogEntry = {|\n  name: string,\n  msg: string,\n  level: BunyanLogLevel,\n|};\n\nexport type Logger = {\n  debug: (msg: string, ...args: any) => void,\n  error: (msg: string, ...args: any) => void,\n  info: (msg: string, ...args: any) => void,\n  warn: (msg: string, ...args: any) => void,\n};\n\n\n// ConsoleStream types and implementation.\n\nexport type ConsoleStreamParams = {|\n  verbose?: boolean,\n|};\n\nexport type ConsoleOptions = {|\n  localProcess?: typeof process,\n|};\n\nexport class ConsoleStream {\n  verbose: boolean;\n  isCapturing: boolean;\n  capturedMessages: Array<string>;\n\n  constructor({verbose = false}: ConsoleStreamParams = {}) {\n    this.verbose = verbose;\n    this.isCapturing = false;\n    this.capturedMessages = [];\n  }\n\n  format({name, msg, level}: BunyanLogEntry): string {\n    const prefix = this.verbose ? `[${name}][${nameFromLevel[level]}] ` : '';\n    return `${prefix}${msg}\\n`;\n  }\n\n  makeVerbose() {\n    this.verbose = true;\n  }\n\n  write(\n    packet: BunyanLogEntry,\n    {localProcess = process}: ConsoleOptions = {}\n  ): void {\n    const thisLevel: BunyanLogLevel = this.verbose ? bunyan.TRACE : bunyan.INFO;\n    if (packet.level >= thisLevel) {\n      const msg = this.format(packet);\n      if (this.isCapturing) {\n        this.capturedMessages.push(msg);\n      } else {\n        localProcess.stdout.write(msg);\n      }\n    }\n  }\n\n  startCapturing() {\n    this.isCapturing = true;\n  }\n\n  stopCapturing() {\n    this.isCapturing = false;\n    this.capturedMessages = [];\n  }\n\n  flushCapturedLogs({localProcess = process}: ConsoleOptions = {}) {\n    for (const msg of this.capturedMessages) {\n      localProcess.stdout.write(msg);\n    }\n    this.capturedMessages = [];\n  }\n}\n\nexport const consoleStream = new ConsoleStream();\n\n\n// createLogger types and implementation.\n\nexport type BunyanStreamConfig = {|\n  type: string,\n  stream: ConsoleStream,\n|};\n\nexport type CreateBunyanLogParams = {|\n  name: string,\n  level: BunyanLogLevel,\n  streams: Array<BunyanStreamConfig>,\n|};\n\nexport type CreateBunyanLogFn = (params: CreateBunyanLogParams) => Logger;\n\nexport type CreateLoggerOptions = {|\n  createBunyanLog: CreateBunyanLogFn,\n|};\n\nexport function createLogger(\n  filename: string,\n  {createBunyanLog = defaultLogCreator}: CreateLoggerOptions = {}\n): Logger {\n  return createBunyanLog({\n    // Strip the leading src/ from file names (which is in all file names) to\n    // make the name less redundant.\n    name: filename.replace(/^src\\//, ''),\n    // Capture all log levels and let the stream filter them.\n    level: bunyan.TRACE,\n    streams: [{\n      type: 'raw',\n      stream: consoleStream,\n    }],\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/logger.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new _promise2.default(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return _promise2.default.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/asyncToGenerator.js\n// module id = 2\n// module chunks = 0","/* @flow */\nimport ExtendableError from 'es6-error';\n\n\n/*\n * Base error for all custom web-ext errors.\n */\nexport class WebExtError extends ExtendableError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The class for errors that can be fixed by the developer.\n */\nexport class UsageError extends WebExtError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The manifest for the extension is invalid (or missing).\n */\nexport class InvalidManifest extends UsageError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The remote Firefox does not support temporary add-on installation.\n */\nexport class RemoteTempInstallNotSupported extends WebExtError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n/*\n * The errors collected when reloading all extensions at once\n * (initialized from a map of errors by extensionSourceDir string).\n */\nexport class MultiExtensionsReloadError extends WebExtError {\n  constructor(errorsMap: Map<string, Error>) {\n    let errors = '';\n    for (const [sourceDir, error] of errorsMap) {\n      const msg = String(error);\n      errors += `\\nError on extension loaded from ${sourceDir}: ${msg}\\n`;\n    }\n    const message = `Reload errors: ${errors}`;\n\n    super(message);\n    this.errorsBySourceDir = errorsMap;\n  }\n}\n\n/*\n * Sugar-y way to catch only instances of a certain error.\n *\n * Usage:\n *\n *  Promise.reject(SyntaxError)\n *    .catch(onlyInstancesOf(SyntaxError, (error) => {\n *      // error is guaranteed to be an instance of SyntaxError\n *    }))\n *\n * All other errors will be re-thrown.\n *\n */\nexport function onlyInstancesOf(\n  predicate: Function, errorHandler: Function\n): Function {\n  return (error) => {\n    if (error instanceof predicate) {\n      return errorHandler(error);\n    } else {\n      throw error;\n    }\n  };\n}\n\n\n/*\n * Sugar-y way to catch only errors having certain code(s).\n *\n * Usage:\n *\n *  Promise.resolve()\n *    .catch(onlyErrorsWithCode('ENOENT', (error) => {\n *      // error.code is guaranteed to be ENOENT\n *    }))\n *\n *  or:\n *\n *  Promise.resolve()\n *    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], (error) => {\n *      // ...\n *    }))\n *\n * All other errors will be re-thrown.\n *\n */\nexport function onlyErrorsWithCode(\n  codeWanted: (string | number) | Array<string | number>,\n  errorHandler: Function\n): Function {\n  return (error) => {\n    let throwError = true;\n\n    if (Array.isArray(codeWanted)) {\n      if (codeWanted.indexOf(error.code) !== -1 ||\n          codeWanted.indexOf(error.errno) !== -1) {\n        throwError = false;\n      }\n    } else if (error.code === codeWanted || error.errno === codeWanted) {\n      throwError = false;\n    }\n\n    if (throwError) {\n      throw error;\n    }\n\n    return errorHandler(error);\n  };\n}\n\nexport function isErrorWithCode(\n  codeWanted: string | Array<string>,\n  error: Object,\n): boolean {\n  if (Array.isArray(codeWanted) && codeWanted.indexOf(error.code) !== -1) {\n    return true;\n  } else if (error.code === codeWanted) {\n    return true;\n  }\n\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors.js","module.exports = require(\"mocha\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mocha\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"chai\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chai\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"sinon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sinon\"\n// module id = 7\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/extends.js\n// module id = 8\n// module chunks = 0","module.exports = require(\"mz\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mz\"\n// module id = 9\n// module chunks = 0","/* @flow */\nimport path from 'path';\nimport EventEmitter from 'events';\nimport tty from 'tty';\n\nimport sinon from 'sinon';\nimport yauzl from 'yauzl';\nimport ExtendableError from 'es6-error';\nimport promisify from 'es6-promisify';\n\nimport {createLogger} from '../../src/util/logger';\nimport * as defaultFirefoxApp from '../../src/firefox';\nimport {RemoteFirefox} from '../../src/firefox/remote';\n\nconst log = createLogger(__filename);\n\n\n/*\n * A way to read zip files using promises for all the things.\n */\nexport class ZipFile {\n  _zip: any;\n  _close: Promise<void> | null;\n\n  constructor() {\n    this._zip = null;\n    this._close = null;\n  }\n\n  /*\n   * Open a zip file and return a promise that resolves to a yauzl\n   * zipfile object.\n   */\n  open(...args: Array<any>): Promise<void> {\n    return promisify(yauzl.open)(...args)\n      .then((zip) => {\n        this._zip = zip;\n        this._close = new Promise((resolve) => {\n          zip.once('close', resolve);\n        });\n      });\n  }\n\n  /**\n   * Close the zip file and wait fd to release.\n   */\n  close() {\n    this._zip.close();\n    return this._close;\n  }\n\n  /*\n   * After open(), readEach(onRead) will return a promise that resolves\n   * when all entries have been read.\n   *\n   * The onRead callback receives a single argument, a yauzl Entry object.\n   */\n  readEach(onRead: Function): Promise<void> {\n    return new Promise((resolve, reject) => {\n\n      if (!this._zip) {\n        throw new Error(\n          'Cannot operate on a falsey zip file. Call open() first.');\n      }\n\n      this._zip.on('entry', (entry) => {\n        onRead(entry);\n      });\n\n      this._zip.once('error', (error) => {\n        reject(error);\n      });\n\n      this._zip.once('end', () => {\n        resolve();\n      });\n    });\n  }\n\n  /*\n   * Resolve a promise with an array of all file names in the zip archive.\n   */\n  extractFilenames(): Promise<Array<String>> {\n    return new Promise((resolve, reject) => {\n      var fileNames = [];\n      this.readEach(\n        (entry) => {\n          fileNames.push(entry.fileName);\n        })\n        .then(() => {\n          resolve(fileNames);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n}\n\n\n/*\n * Returns a path to a test fixture file. Invoke it the same as path.join().\n */\nexport function fixturePath(...pathParts: Array<string>): string {\n  return path.join(__dirname, '..', 'fixtures', ...pathParts);\n}\n\n\n/*\n * Test helper to make sure a promise chain really fails.\n *\n * Usage:\n *\n *  Promise.reject(new Error('some error'))\n *    .then(makeSureItFails(), (error) => {\n *      // Safely make assertions about the error...\n *    });\n */\nexport function makeSureItFails(): Function {\n  return () => {\n    throw new Error('This test unexpectedly succeeded without an error');\n  };\n}\n\n\n/*\n * Return a fake version of an object for testing.\n *\n * The fake object will contain stub implementations of\n * all original methods. Each method will be wrapped in\n * a sinon.spy() for inspection.\n *\n * You can optionally provide implementations for one or\n * more methods.\n *\n * Unlike similar sinon helpers, this *does not* touch the\n * original object so there is no need to tear down any\n * patches afterwards.\n *\n * Usage:\n *\n * let fakeProcess = fake(process, {\n *   cwd: () => '/some/directory',\n * });\n *\n * // Use the object in real code:\n * fakeProcess.cwd();\n *\n * // Make assertions about methods that\n * // were on the original object:\n * assert.equal(fakeProcess.exit.called, true);\n *\n */\n\n// $FLOW_IGNORE: fake can return any kind of object and fake a defined set of methods for testing.\nexport function fake<T>(\n  original: Object, methods: Object = {}, skipProperties: Array<string> = []\n): T {\n  var stub = {};\n\n  // Provide stubs for all original members:\n  var props = [];\n  var obj = original;\n  while (obj) {\n    props = props.concat(Object.getOwnPropertyNames(obj));\n    obj = Object.getPrototypeOf(obj);\n  }\n\n  var proto = Object.getPrototypeOf(original);\n  for (const key of props) {\n    if (skipProperties.indexOf(key) >= 0 ||\n       (!original.hasOwnProperty(key) && !proto.hasOwnProperty(key))) {\n      continue;\n    }\n    const definition = original[key] || proto[key];\n    if (typeof definition === 'function') {\n      stub[key] = () => {\n        log.warn(`Running stubbed function ${key} (default implementation)`);\n      };\n    }\n  }\n\n  // Provide custom implementations, if necessary.\n  Object.keys(methods).forEach((key) => {\n    if (!original[key]) {\n      throw new Error(\n        `Cannot define method \"${key}\"; it does not exist on the original`);\n    }\n    stub[key] = methods[key];\n  });\n\n  // Wrap all implementations in spies.\n  Object.keys(stub).forEach((key) => {\n    stub[key] = sinon.spy(stub[key]);\n  });\n\n  // $FLOW_IGNORE: fake can return any kind of object for testing.\n  return stub;\n}\n\nexport function createFakeProcess() {\n  return fake(process, {}, ['EventEmitter', 'stdin']);\n}\n\nexport class StubChildProcess extends EventEmitter {\n  stderr = new EventEmitter();\n  stdout = new EventEmitter();\n  kill = sinon.spy(() => {});\n}\n\n/*\n * Returns a fake Firefox client as would be returned by\n * connect() of 'node-firefox-connect'\n */\n\ntype FakeFirefoxClientParams = {|\n  requestResult?: Object,\n  requestError?: Object,\n  makeRequestResult?: Object,\n  makeRequestError?: Object,\n|}\nexport function fakeFirefoxClient({\n  requestResult = {}, requestError,\n  makeRequestResult = {}, makeRequestError,\n}: FakeFirefoxClientParams = {}) {\n  return {\n    disconnect: sinon.spy(() => {}),\n    request: sinon.spy(\n      (request, callback) => callback(requestError, requestResult)),\n    // This is client.client, the actual underlying connection.\n    client: {\n      on: () => {},\n      makeRequest: sinon.spy((request, callback) => {\n        //\n        // The real function returns a response object that you\n        // use like this:\n        // if (response.error) {\n        //   ...\n        // } else {\n        //   response.something; // ...\n        // }\n        //\n        if (makeRequestError) {\n          let error;\n          if (typeof makeRequestError === 'object') {\n            error = makeRequestError;\n          } else {\n            error = {error: makeRequestError};\n          }\n          callback(error);\n        } else {\n          callback(makeRequestResult);\n        }\n      }),\n    },\n  };\n}\n\n\n/*\n * A simulated TCP connection error.\n *\n * By default, the error code will be ECONNREFUSED.\n */\nexport class TCPConnectError extends ExtendableError {\n  code: string;\n  constructor(msg: string = 'simulated connection error') {\n    super(msg);\n    this.code = 'ECONNREFUSED';\n  }\n}\n\nexport class ErrorWithCode extends Error {\n  code: string;\n  constructor(code: ?string, message: ?string) {\n    super(`${code || ''}: ${message || 'pretend this is a system error'}`);\n    this.code = code || 'SOME_CODE';\n  }\n}\n\n/*\n * A basic manifest fixture using in unit tests.\n */\nexport const basicManifest = {\n  name: 'the extension',\n  version: '0.0.1',\n  applications: {\n    gecko: {\n      id: 'basic-manifest@web-ext-test-suite',\n    },\n  },\n};\n\n/*\n * A class that implements an empty IExtensionRunner interface.\n */\nexport class FakeExtensionRunner {\n  params: any;\n\n  constructor(params: any) {\n    this.params = params;\n  }\n\n  getName() {\n    return 'Fake Extension Runner';\n  }\n\n  async run() {}\n  async exit() {}\n  async reloadAllExtensions() {\n    return [];\n  }\n  async reloadExtensionBySourceDir(sourceDir: string) {\n    const runnerName = this.getName();\n    return [{runnerName, sourceDir}];\n  }\n  registerCleanup(fn: Function) {} // eslint-disable-line no-unused-vars\n}\n\nexport function getFakeFirefox(\n  implementations: Object = {}, port: number = 6005\n) {\n  const profile = {}; // empty object just to avoid errors.\n  const firefox = () => Promise.resolve();\n  const allImplementations = {\n    createProfile: () => Promise.resolve(profile),\n    copyProfile: () => Promise.resolve(profile),\n    useProfile: () => Promise.resolve(profile),\n    installExtension: () => Promise.resolve(),\n    run: () => Promise.resolve({firefox, debuggerPort: port}),\n    ...implementations,\n  };\n  return fake(defaultFirefoxApp, allImplementations);\n}\n\nexport function getFakeRemoteFirefox(implementations: Object = {}) {\n  return fake(RemoteFirefox.prototype, implementations);\n}\n\nexport class FakeStdin extends tty.ReadStream {\n  constructor() {\n    // $FLOW_FIXME: flow doesn't yet recognize 0 as a valid parameter of tty.ReadStream.\n    super(0);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/helpers.js","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 11\n// module chunks = 0","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 12\n// module chunks = 0","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 13\n// module chunks = 0","module.exports = function extend(prototype, properties) {\n  return Object.create(prototype, getOwnPropertyDescriptors(properties));\n}\n\nfunction getOwnPropertyDescriptors(object) {\n  var names = Object.getOwnPropertyNames(object);\n\n  return names.reduce(function(descriptor, name) {\n    descriptor[name] = Object.getOwnPropertyDescriptor(object, name);\n    return descriptor;\n  }, {});\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/extend.js\n// module id = 14\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = 15\n// module chunks = 0","/* @flow */\nimport tmp from 'tmp';\nimport promisify from 'es6-promisify';\n\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\nexport type MakePromiseCallback = (tmpDir: TempDir) => any;\n\n\n/*\n * Work with a self-destructing temporary directory in a promise chain.\n *\n * The directory will be destroyed when the promise chain is finished\n * (whether there was an error or not).\n *\n * Usage:\n *\n * withTempDir(\n *   (tmpDir) =>\n *     doSomething(tmpDir.path())\n *     .then(...)\n * );\n *\n */\nexport function withTempDir(makePromise: MakePromiseCallback): Promise<any> {\n  const tmpDir = new TempDir();\n  return tmpDir.create()\n    .then(() => {\n      return makePromise(tmpDir);\n    })\n    .catch(tmpDir.errorHandler())\n    .then(tmpDir.successHandler());\n}\n\n/*\n * Work with a self-destructing temporary directory object.\n *\n * It is safer to use withTempDir() instead but if you know\n * what you're doing you can use it directly like:\n *\n * let tmpDir = new TempDir();\n * tmpDir.create()\n *   .then(() => {\n *     // work with tmpDir.path()\n *   })\n *   .catch(tmpDir.errorHandler())\n *   .then(tmpDir.successHandler());\n *\n */\nexport class TempDir {\n  _path: string | void;\n  _removeTempDir: Function | void;\n\n  constructor() {\n    this._path = undefined;\n    this._removeTempDir = undefined;\n  }\n\n  /*\n   * Returns a promise that is fulfilled when the temp directory has\n   * been created.\n   */\n  create(): Promise<TempDir> {\n    const createTempDir = promisify(tmp.dir, {multiArgs: true});\n    return createTempDir(\n      {\n        prefix: 'tmp-web-ext-',\n        // This allows us to remove a non-empty tmp dir.\n        unsafeCleanup: true,\n      })\n      .then((args) => {\n        const [tmpPath, removeTempDir] = args;\n        this._path = tmpPath;\n        this._removeTempDir = removeTempDir;\n        log.debug(`Created temporary directory: ${this.path()}`);\n        return this;\n      });\n  }\n\n  /*\n   * Get the absolute path of the temp directory.\n   */\n  path(): string {\n    if (!this._path) {\n      throw new Error('You cannot access path() before calling create()');\n    }\n    return this._path;\n  }\n\n  /*\n   * Returns a callback that will catch an error, remove\n   * the temporary directory, and throw the error.\n   *\n   * This is intended for use in a promise like\n   * Promise().catch(tmp.errorHandler())\n   */\n  errorHandler(): Function {\n    return (error) => {\n      this.remove();\n      throw error;\n    };\n  }\n\n  /*\n   * Returns a callback that will remove the temporary direcotry.\n   *\n   * This is intended for use in a promise like\n   * Promise().then(tmp.successHandler())\n   */\n  successHandler(): Function {\n    return (promiseResult) => {\n      this.remove();\n      return promiseResult;\n    };\n  }\n\n  /*\n   * Remove the temp directory.\n   */\n  remove() {\n    if (!this._removeTempDir) {\n      return;\n    }\n    log.debug(`Removing temporary directory: ${this.path()}`);\n    this._removeTempDir && this._removeTempDir();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/temp-dir.js","var events = require(\"events\"),\n    extend = require(\"./extend\");\n\n// to be instantiated later - to avoid circular dep resolution\nvar JSObject;\n\nvar ClientMethods = extend(events.EventEmitter.prototype, {\n  /**\n   * Intialize this client object.\n   *\n   * @param  {object} client\n   *         Client to send requests on.\n   * @param  {string} actor\n   *         Actor id to set as 'from' field on requests\n   */\n  initialize: function(client, actor) {\n    this.client = client;\n    this.actor = actor;\n\n    this.client.on('message', function(message) {\n      if (message.from == this.actor) {\n        this.emit(message.type, message);\n      }\n    }.bind(this));\n  },\n\n  /**\n   * Make request to our actor on the server.\n   *\n   * @param  {string}   type\n   *         Method name of the request\n   * @param  {object}   message\n   *         Optional extra properties (arguments to method)\n   * @param  {Function}   transform\n   *         Optional tranform for response object. Takes response object\n   *         and returns object to send on.\n   * @param  {Function} callback\n   *         Callback to call with (maybe transformed) response\n   */\n  request: function(type, message, transform, callback) {\n    if (typeof message == \"function\") {\n      if (typeof transform == \"function\") {\n        // (type, trans, cb)\n        callback = transform;\n        transform = message;\n      }\n      else {\n        // (type, cb)\n        callback = message;\n      }\n      message = {};\n    }\n    else if (!callback) {\n      if (!message) {\n        // (type)\n        message = {};\n      }\n      // (type, message, cb)\n      callback = transform;\n      transform = null;\n    }\n\n    message.to = this.actor;\n    message.type = type;\n\n    this.client.makeRequest(message, function(resp) {\n      delete resp.from;\n\n      if (resp.error) {\n        var err = new Error(resp.message);\n        err.name = resp.error;\n\n        callback(err);\n        return;\n      }\n\n      if (transform) {\n        resp = transform(resp);\n      }\n\n      if (callback) {\n        callback(null, resp);\n      }\n    });\n  },\n\n  /*\n   * Transform obj response into a JSObject\n   */\n  createJSObject: function(obj) {\n    if (obj == null) {\n      return;\n    }\n    if (!JSObject) {\n      // circular dependencies\n      JSObject = require(\"./jsobject\");\n    }\n    if (obj.type == \"object\") {\n      return new JSObject(this.client, obj);\n    }\n    return obj;\n  },\n\n  /**\n   * Create function that plucks out only one value from an object.\n   * Used as the transform function for some responses.\n   */\n  pluck: function(prop) {\n    return function(obj) {\n      return obj[prop];\n    }\n  }\n})\n\nmodule.exports = ClientMethods;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/client-methods.js\n// module id = 17\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = 18\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 19\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 20\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 21\n// module chunks = 0","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 22\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 23\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 24\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 25\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/slicedToArray.js\n// module id = 26\n// module chunks = 0","/* @flow */\nimport defaultFirefoxConnector from '@cliqz-oss/node-firefox-connect';\n// RemoteFirefox types and implementation\nimport type FirefoxClient from '@cliqz-oss/firefox-client';\n\nimport {createLogger} from '../util/logger';\nimport {\n  isErrorWithCode,\n  RemoteTempInstallNotSupported,\n  UsageError,\n  WebExtError,\n} from '../errors';\n\nconst log = createLogger(__filename);\n\n// The default port that Firefox's remote debugger will listen on and the\n// client will connect to.\nexport const REMOTE_PORT = 6005;\n\nexport type FirefoxConnectorFn =\n  (port?: number) => Promise<FirefoxClient>;\n\nexport type FirefoxRDPAddonActor = {|\n  id: string,\n  actor: string,\n|};\n\nexport type FirefoxRDPResponseError = {|\n  error: {\n    message: string,\n  },\n|};\n\nexport type FirefoxRDPResponseAddon = {|\n  addon: FirefoxRDPAddonActor,\n|};\n\nexport type FirefoxRDPResponseRequestTypes = {|\n  requestTypes: Array<string>,\n|};\n\n// NOTE: this type aliases Object to catch any other possible response.\nexport type FirefoxRDPResponseAny = Object;\n\nexport type FirefoxRDPResponseMaybe =\n  FirefoxRDPResponseRequestTypes | FirefoxRDPResponseAny;\n\nexport class RemoteFirefox {\n  client: Object;\n  checkedForAddonReloading: boolean;\n\n  constructor(client: FirefoxClient) {\n    this.client = client;\n    this.checkedForAddonReloading = false;\n\n    client.client.on('disconnect', () => {\n      log.debug('Received \"disconnect\" from Firefox client');\n    });\n    client.client.on('end', () => {\n      log.debug('Received \"end\" from Firefox client');\n    });\n    client.client.on('message', (info) => {\n      // These are arbitrary messages that the client library ignores.\n      log.debug(`Received message from client: ${JSON.stringify(info)}`);\n    });\n  }\n\n  disconnect() {\n    this.client.disconnect();\n  }\n\n  addonRequest(\n    addon: FirefoxRDPAddonActor,\n    request: string\n  ): Promise<FirefoxRDPResponseMaybe> {\n    return new Promise((resolve, reject) => {\n      this.client.client.makeRequest(\n        {to: addon.actor, type: request}, (response) => {\n          if (response.error) {\n            const error = `${response.error}: ${response.message}`;\n            log.debug(\n              `Client responded to '${request}' request with error:`, error);\n            reject(new WebExtError(error));\n          } else {\n            resolve(response);\n          }\n        });\n    });\n  }\n\n  installTemporaryAddon(\n    addonPath: string\n  ): Promise<FirefoxRDPResponseAddon> {\n    return new Promise((resolve, reject) => {\n      this.client.request('listTabs', (error, tabsResponse) => {\n        if (error) {\n          return reject(new WebExtError(\n            `Remote Firefox: listTabs() error: ${error}`));\n        }\n        if (!tabsResponse.addonsActor) {\n          log.debug(\n            'listTabs returned a falsey addonsActor: ' +\n            `${tabsResponse.addonsActor}`);\n          return reject(new RemoteTempInstallNotSupported(\n            'This is an older version of Firefox that does not provide an ' +\n            'add-ons actor for remote installation. Try Firefox 49 or ' +\n            'higher.'));\n        }\n\n        this.client.client.makeRequest({\n          to: tabsResponse.addonsActor,\n          type: 'installTemporaryAddon',\n          addonPath,\n        }, (installResponse) => {\n          if (installResponse.error) {\n            return reject(new WebExtError(\n              'installTemporaryAddon: Error: ' +\n              `${installResponse.error}: ${installResponse.message}`));\n          }\n          log.debug(\n            `installTemporaryAddon: ${JSON.stringify(installResponse)}`);\n          log.info(`Installed ${addonPath} as a temporary add-on`);\n          resolve(installResponse);\n        });\n      });\n    });\n  }\n\n  getInstalledAddon(addonId: string): Promise<FirefoxRDPAddonActor> {\n    return new Promise(\n      (resolve, reject) => {\n        this.client.request('listAddons', (error, response) => {\n          if (error) {\n            reject(new WebExtError(\n              `Remote Firefox: listAddons() error: ${error}`));\n          } else {\n            resolve(response.addons);\n          }\n        });\n      })\n      .then((addons) => {\n        for (const addon of addons) {\n          if (addon.id === addonId) {\n            return addon;\n          }\n        }\n        log.debug(\n          `Remote Firefox has these addons: ${addons.map((a) => a.id)}`);\n        throw new WebExtError(\n          'The remote Firefox does not have your extension installed');\n      });\n  }\n\n  async checkForAddonReloading(\n    addon: FirefoxRDPAddonActor\n  ): Promise<FirefoxRDPAddonActor> {\n    if (this.checkedForAddonReloading) {\n      // We only need to check once if reload() is supported.\n      return addon;\n    } else {\n      const response = await this.addonRequest(addon, 'requestTypes');\n\n      if (response.requestTypes.indexOf('reload') === -1) {\n        const supportedRequestTypes = JSON.stringify(response.requestTypes);\n        log.debug(\n          `Remote Firefox only supports: ${supportedRequestTypes}`);\n        throw new UsageError(\n          'This Firefox version does not support add-on reloading. ' +\n          'Re-run with --no-reload');\n      } else {\n        this.checkedForAddonReloading = true;\n        return addon;\n      }\n    }\n  }\n\n  async reloadAddon(addonId: string): Promise<void> {\n    const addon = await this.getInstalledAddon(addonId);\n    await this.checkForAddonReloading(addon);\n    await this.addonRequest(addon, 'reload');\n    process.stdout.write(\n      `\\rLast extension reload: ${(new Date()).toTimeString()}`);\n    log.debug('\\n');\n  }\n}\n\n\n// Connect types and implementation\n\nexport type ConnectOptions = {|\n  connectToFirefox: FirefoxConnectorFn,\n|};\n\nexport async function connect(\n  port: number = REMOTE_PORT,\n  {connectToFirefox = defaultFirefoxConnector}: ConnectOptions = {}\n): Promise<RemoteFirefox> {\n  log.debug(`Connecting to Firefox on port ${port}`);\n  const client = await connectToFirefox(port);\n  log.debug(`Connected to the remote Firefox debugger on port ${port}`);\n  return new RemoteFirefox(client);\n}\n\n\n// ConnectWithMaxRetries types and implementation\n\nexport type ConnectWithMaxRetriesParams = {|\n  maxRetries?: number,\n  retryInterval?: number,\n  port: number,\n|};\n\nexport type ConnectWithMaxRetriesDeps = {|\n  connectToFirefox: typeof connect,\n|};\n\nexport async function connectWithMaxRetries(\n  // A max of 250 will try connecting for 30 seconds.\n  {maxRetries = 250, retryInterval = 120, port}: ConnectWithMaxRetriesParams,\n  {connectToFirefox = connect}: ConnectWithMaxRetriesDeps = {}\n): Promise<RemoteFirefox> {\n  async function establishConnection() {\n    var lastError;\n\n    for (let retries = 0; retries <= maxRetries; retries++) {\n      try {\n        return await connectToFirefox(port);\n      } catch (error) {\n        if (isErrorWithCode('ECONNREFUSED', error)) {\n          // Wait for `retryInterval` ms.\n          await new Promise((resolve) => {\n            setTimeout(resolve, retryInterval);\n          });\n\n          lastError = error;\n          log.debug(\n            `Retrying Firefox (${retries}); connection error: ${error}`);\n        } else {\n          log.error(error.stack);\n          throw error;\n        }\n      }\n    }\n\n    log.debug('Connect to Firefox debugger: too many retries');\n    throw lastError;\n  }\n\n  log.debug('Connecting to the remote Firefox debugger');\n  return establishConnection();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/remote.js","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 28\n// module chunks = 0","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 29\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 30\n// module chunks = 0","/* @flow */\nimport path from 'path';\nimport {createWriteStream} from 'fs';\n\nimport {fs} from 'mz';\nimport parseJSON from 'parse-json';\nimport defaultEventToPromise from 'event-to-promise';\n\nimport defaultSourceWatcher from '../watcher';\nimport {zipDir} from '../util/zip-dir';\nimport getValidatedManifest, {getManifestId} from '../util/manifest';\nimport {prepareArtifactsDir} from '../util/artifacts';\nimport {createLogger} from '../util/logger';\nimport {UsageError, isErrorWithCode} from '../errors';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n  FileFilter,\n} from '../util/file-filter';\n// Import flow types.\nimport type {OnSourceChangeFn} from '../watcher';\nimport type {ExtensionManifest} from '../util/manifest';\nimport type {FileFilterCreatorFn} from '../util/file-filter';\n\nconst log = createLogger(__filename);\n\n\nexport function safeFileName(name: string): string {\n  return name.toLowerCase().replace(/[^a-z0-9.-]+/g, '_');\n}\n\n\n// defaultPackageCreator types and implementation.\n\nexport type ExtensionBuildResult = {|\n  extensionPath: string,\n|};\n\nexport type PackageCreatorParams = {|\n  manifestData?: ExtensionManifest,\n  sourceDir: string,\n  fileFilter: FileFilter,\n  artifactsDir: string,\n  overwriteDest: boolean,\n  showReadyMessage: boolean\n|};\n\nexport type LocalizedNameParams = {|\n  messageFile: string,\n  manifestData: ExtensionManifest,\n|}\n\nexport type PackageCreatorOptions = {|\n  eventToPromise: typeof defaultEventToPromise,\n|};\n\n// This defines the _locales/messages.json type. See:\n// https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Internationalization#Providing_localized_strings_in__locales\ntype LocalizedMessageData = {|\n  [messageName: string]: {|\n    description: string,\n    message: string,\n  |},\n|}\n\nexport async function getDefaultLocalizedName(\n  {messageFile, manifestData}: LocalizedNameParams\n): Promise<string> {\n\n  let messageData: LocalizedMessageData;\n  let messageContents: string | Buffer;\n  let extensionName: string = manifestData.name;\n\n  try {\n    messageContents = await fs.readFile(messageFile);\n  } catch (error) {\n    throw new UsageError(\n      `Error reading messages.json file at ${messageFile}: ${error}`);\n  }\n\n  try {\n    messageData = parseJSON(String(messageContents), messageFile);\n  } catch (error) {\n    throw new UsageError(\n      `Error parsing messages.json ${error}`);\n  }\n\n  extensionName = manifestData.name.replace(\n    /__MSG_([A-Za-z0-9@_]+?)__/g,\n    (match, messageName) => {\n      if (!(messageData[messageName]\n            && messageData[messageName].message)) {\n        const error = new UsageError(\n          `The locale file ${messageFile} ` +\n            `is missing key: ${messageName}`);\n        throw error;\n      } else {\n        return messageData[messageName].message;\n      }\n    });\n  return Promise.resolve(extensionName);\n}\n\nexport type PackageCreatorFn =\n    (params: PackageCreatorParams) => Promise<ExtensionBuildResult>;\n\nexport async function defaultPackageCreator(\n  {\n    manifestData,\n    sourceDir,\n    fileFilter,\n    artifactsDir,\n    overwriteDest,\n    showReadyMessage,\n  }: PackageCreatorParams,\n  {\n    eventToPromise = defaultEventToPromise,\n  }: PackageCreatorOptions = {}\n): Promise<ExtensionBuildResult> {\n  let id;\n  if (manifestData) {\n    id = getManifestId(manifestData);\n    log.debug(`Using manifest id=${id || '[not specified]'}`);\n  } else {\n    manifestData = await getValidatedManifest(sourceDir);\n  }\n\n  const buffer = await zipDir(sourceDir, {\n    filter: (...args) => fileFilter.wantFile(...args),\n  });\n\n  let extensionName: string = manifestData.name;\n\n  if (manifestData.default_locale) {\n    const messageFile = path.join(\n      sourceDir, '_locales',\n      manifestData.default_locale, 'messages.json'\n    );\n    log.debug('Manifest declared default_locale, localizing extension name');\n    extensionName = await getDefaultLocalizedName({\n      messageFile, manifestData,\n    });\n  }\n  const packageName = safeFileName(\n    `${extensionName}-${manifestData.version}.zip`);\n  const extensionPath = path.join(artifactsDir, packageName);\n\n  // Added 'wx' flags to avoid overwriting of existing package.\n  let stream = createWriteStream(extensionPath, {flags: 'wx'});\n\n  stream.write(buffer, () => stream.end());\n\n  try {\n    await eventToPromise(stream, 'close');\n  } catch (error) {\n    if (!isErrorWithCode('EEXIST', error)) {\n      throw error;\n    }\n    if (!overwriteDest) {\n      throw new UsageError(\n        `Extension exists at the destination path: ${extensionPath}\\n` +\n        'Use --overwrite-dest to enable overwriting.');\n    }\n    log.info(`Destination exists, overwriting: ${extensionPath}`);\n    stream = createWriteStream(extensionPath);\n    stream.write(buffer, () => stream.end());\n    await eventToPromise(stream, 'close');\n  }\n\n  if (showReadyMessage) {\n    log.info(`Your web extension is ready: ${extensionPath}`);\n  }\n  return {extensionPath};\n}\n\n\n// Build command types and implementation.\n\nexport type BuildCmdParams = {|\n  sourceDir: string,\n  artifactsDir: string,\n  asNeeded?: boolean,\n  overwriteDest?: boolean,\n  ignoreFiles?: Array<string>,\n|};\n\nexport type BuildCmdOptions = {|\n  manifestData?: ExtensionManifest,\n  fileFilter?: FileFilter,\n  onSourceChange?: OnSourceChangeFn,\n  packageCreator?: PackageCreatorFn,\n  showReadyMessage?: boolean,\n  createFileFilter?: FileFilterCreatorFn,\n  shouldExitProgram?: boolean,\n|};\n\nexport default async function build(\n  {\n    sourceDir,\n    artifactsDir,\n    asNeeded = false,\n    overwriteDest = false,\n    ignoreFiles = [],\n  }: BuildCmdParams,\n  {\n    manifestData,\n    createFileFilter = defaultFileFilterCreator,\n    fileFilter = createFileFilter({\n      sourceDir,\n      artifactsDir,\n      ignoreFiles,\n    }),\n    onSourceChange = defaultSourceWatcher,\n    packageCreator = defaultPackageCreator,\n    showReadyMessage = true,\n  }: BuildCmdOptions = {}\n): Promise<ExtensionBuildResult> {\n\n  const rebuildAsNeeded = asNeeded; // alias for `build --as-needed`\n  log.info(`Building web extension from ${sourceDir}`);\n\n  const createPackage = () => packageCreator({\n    manifestData,\n    sourceDir,\n    fileFilter,\n    artifactsDir,\n    overwriteDest,\n    showReadyMessage,\n  });\n\n  await prepareArtifactsDir(artifactsDir);\n  const result = await createPackage();\n\n  if (rebuildAsNeeded) {\n    log.info('Rebuilding when files change...');\n    onSourceChange({\n      sourceDir,\n      artifactsDir,\n      onChange: () => {\n        return createPackage().catch((error) => {\n          log.error(error.stack);\n          throw error;\n        });\n      },\n      shouldWatchFile: (...args) => fileFilter.wantFile(...args),\n    });\n  }\n\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/build.js","module.exports = require(\"es6-promisify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promisify\"\n// module id = 32\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport parseJSON from 'parse-json';\nimport stripJsonComments from 'strip-json-comments';\n\nimport {InvalidManifest} from '../errors';\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\n\n// getValidatedManifest helper types and implementation\n\nexport type ExtensionManifestApplications = {|\n  gecko: {|\n    id?: string,\n    strict_min_version?: string,\n    strict_max_version?: string,\n    update_url?: string,\n  |},\n|};\n\nexport type ExtensionManifest = {|\n  name: string,\n  version: string,\n  default_locale?: string,\n  applications?: ExtensionManifestApplications,\n|};\n\nexport default async function getValidatedManifest(\n  sourceDir: string\n): Promise<ExtensionManifest> {\n  const manifestFile = path.join(sourceDir, 'manifest.json');\n  log.debug(`Validating manifest at ${manifestFile}`);\n\n  let manifestContents;\n\n  try {\n    manifestContents = await fs.readFile(manifestFile);\n  } catch (error) {\n    throw new InvalidManifest(\n      `Could not read manifest.json file at ${manifestFile}: ${error}`);\n  }\n\n  let manifestData;\n\n  try {\n    manifestData = parseJSON(stripJsonComments(manifestContents.toString()),\n                             manifestFile);\n  } catch (error) {\n    throw new InvalidManifest(\n      `Error parsing manifest.json at ${manifestFile}: ${error}`);\n  }\n\n  const errors = [];\n  // This is just some basic validation of what web-ext needs, not\n  // what Firefox will need to run the extension.\n  // TODO: integrate with the addons-linter for actual validation.\n  if (!manifestData.name) {\n    errors.push('missing \"name\" property');\n  }\n  if (!manifestData.version) {\n    errors.push('missing \"version\" property');\n  }\n\n  if (manifestData.applications && !manifestData.applications.gecko) {\n    // Since the applications property only applies to gecko, make\n    // sure 'gecko' exists when 'applications' is defined. This should\n    // make introspection of gecko properties easier.\n    errors.push('missing \"applications.gecko\" property');\n  }\n\n  if (errors.length) {\n    throw new InvalidManifest(\n      `Manifest at ${manifestFile} is invalid: ${errors.join('; ')}`);\n  }\n\n  return manifestData;\n}\n\n\nexport function getManifestId(manifestData: ExtensionManifest): string | void {\n  return manifestData.applications ?\n    manifestData.applications.gecko.id : undefined;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/manifest.js","/* @flow */\n\nimport type {\n  BuildCmdParams, BuildCmdOptions, ExtensionBuildResult,\n} from './build';\nimport type {LintCmdParams, LintCmdOptions} from './lint';\nimport type {CmdRunParams, CmdRunOptions} from './run';\nimport type {MultiExtensionRunner} from '../extension-runners';\nimport type {SignParams, SignOptions, SignResult} from './sign';\nimport type {DocsParams, DocsOptions} from './docs';\n\n// This module exports entry points for all supported commands. For performance\n// reasons (faster start-up), the implementations are not statically imported\n// at the top of the file, but lazily loaded in the (exported) functions.\n// The latter would slow down start-up by several seconds, as seen in #1302 .\n\nasync function build(\n  params: BuildCmdParams, options: BuildCmdOptions\n): Promise<ExtensionBuildResult> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./build');\n  return runCommand(params, options);\n}\n\nasync function lint(\n  params: LintCmdParams, options: LintCmdOptions\n): Promise<void> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./lint');\n  return runCommand(params, options);\n}\n\nasync function run(\n  params: CmdRunParams, options: CmdRunOptions\n): Promise<MultiExtensionRunner> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./run');\n  return runCommand(params, options);\n}\n\nasync function sign(\n  params: SignParams, options: SignOptions\n): Promise<SignResult> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./sign');\n  return runCommand(params, options);\n}\n\nasync function docs(\n  params: DocsParams, options: DocsOptions\n): Promise<void> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./docs');\n  return runCommand(params, options);\n}\n\nexport default {build, lint, run, sign, docs};\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/index.js","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 35\n// module chunks = 0","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 36\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 37\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 38\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 39\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport multimatch from 'multimatch';\n\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\n// check if target is a sub directory of src\nexport const isSubPath = (src: string, target: string): boolean => {\n  const relate = path.relative(src, target);\n  // same dir\n  if (!relate) {\n    return false;\n  }\n  if (relate === '..') {\n    return false;\n  }\n  return !relate.startsWith(`..${path.sep}`);\n};\n\n// FileFilter types and implementation.\n\nexport type FileFilterOptions = {|\n  baseIgnoredPatterns?: Array<string>,\n  ignoreFiles?: Array<string>,\n  sourceDir: string,\n  artifactsDir?: string,\n|};\n\n/*\n * Allows or ignores files.\n */\nexport class FileFilter {\n  filesToIgnore: Array<string>;\n  sourceDir: string;\n\n  constructor({\n    baseIgnoredPatterns = [\n      '**/*.xpi',\n      '**/*.zip',\n      '**/.*', // any hidden file and folder\n      '**/.*/**/*', // and the content inside hidden folder\n      '**/node_modules',\n      '**/node_modules/**/*',\n    ],\n    ignoreFiles = [],\n    sourceDir,\n    artifactsDir,\n  }: FileFilterOptions = {}) {\n    sourceDir = path.resolve(sourceDir);\n\n    this.filesToIgnore = [];\n    this.sourceDir = sourceDir;\n\n    this.addToIgnoreList(baseIgnoredPatterns);\n    if (ignoreFiles) {\n      this.addToIgnoreList(ignoreFiles);\n    }\n    if (artifactsDir && isSubPath(sourceDir, artifactsDir)) {\n      artifactsDir = path.resolve(artifactsDir);\n      log.debug(\n        `Ignoring artifacts directory \"${artifactsDir}\" ` +\n        'and all its subdirectories'\n      );\n      this.addToIgnoreList([\n        artifactsDir,\n        path.join(artifactsDir, '**', '*'),\n      ]);\n    }\n  }\n\n  /**\n   *  Resolve relative path to absolute path with sourceDir.\n   */\n  resolveWithSourceDir(file: string): string {\n    const resolvedPath = path.resolve(this.sourceDir, file);\n    log.debug(\n      `Resolved path ${file} with sourceDir ${this.sourceDir} ` +\n      `to ${resolvedPath}`\n    );\n    return resolvedPath;\n  }\n\n  /**\n   *  Insert more files into filesToIgnore array.\n   */\n  addToIgnoreList(files: Array<string>) {\n    for (const file of files) {\n      if (file.charAt(0) === '!') {\n        const resolvedFile = this.resolveWithSourceDir(file.substr(1));\n        this.filesToIgnore.push(`!${resolvedFile}`);\n      } else {\n        this.filesToIgnore.push(this.resolveWithSourceDir(file));\n      }\n    }\n  }\n\n  /*\n   * Returns true if the file is wanted.\n   *\n   * If filePath does not start with a slash, it will be treated as a path\n   * relative to sourceDir when matching it against all configured\n   * ignore-patterns.\n   *\n   * Example: this is called by zipdir as wantFile(filePath) for each\n   * file in the folder that is being archived.\n   */\n  wantFile(filePath: string): boolean {\n    const resolvedPath = this.resolveWithSourceDir(filePath);\n    const matches = multimatch(resolvedPath, this.filesToIgnore);\n    if (matches.length > 0) {\n      log.debug(`FileFilter: ignoring file ${resolvedPath}`);\n      return false;\n    }\n    return true;\n  }\n}\n\n// a helper function to make mocking easier\n\nexport const createFileFilter = (\n  (params: FileFilterOptions): FileFilter => new FileFilter(params)\n);\n\nexport type FileFilterCreatorFn = typeof createFileFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/file-filter.js","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 41\n// module chunks = 0","/* @flow */\nimport nodeFs from 'fs';\nimport path from 'path';\n\nimport {default as defaultFxRunner} from 'fx-runner';\nimport FirefoxProfile, {copyFromUserProfile as defaultUserProfileCopier}\n  from 'firefox-profile';\nimport {fs} from 'mz';\nimport promisify from 'es6-promisify';\nimport eventToPromise from 'event-to-promise';\n\nimport isDirectory from '../util/is-directory';\nimport {isErrorWithCode, UsageError, WebExtError} from '../errors';\nimport {getPrefs as defaultPrefGetter} from './preferences';\nimport {getManifestId} from '../util/manifest';\nimport {createLogger} from '../util/logger';\nimport {connect as defaultFirefoxConnector, REMOTE_PORT} from './remote';\n// Import flow types\nimport type {FirefoxConnectorFn} from './remote';\nimport type {\n  PreferencesAppName,\n  PreferencesGetterFn,\n  FirefoxPreferences,\n} from './preferences';\nimport type {ExtensionManifest} from '../util/manifest';\n\n\nconst log = createLogger(__filename);\n\nexport const defaultFirefoxEnv = {\n  XPCOM_DEBUG_BREAK: 'stack',\n  NS_TRACE_MALLOC_DISABLE_STACKS: '1',\n};\n\n// defaultRemotePortFinder types and implementation.\n\nexport type RemotePortFinderParams = {|\n  portToTry?: number,\n  retriesLeft?: number,\n  connectToFirefox?: FirefoxConnectorFn,\n|};\n\nexport type RemotePortFinderFn =\n  (params?: RemotePortFinderParams) => Promise<number>;\n\nexport async function defaultRemotePortFinder(\n  {\n    portToTry = REMOTE_PORT,\n    retriesLeft = 10,\n    connectToFirefox = defaultFirefoxConnector,\n  }: RemotePortFinderParams = {}\n): Promise<number> {\n  log.debug(`Checking if remote Firefox port ${portToTry} is available`);\n\n  let client;\n\n  while (retriesLeft >= 0) {\n    try {\n      client = await connectToFirefox(portToTry);\n      log.debug(`Remote Firefox port ${portToTry} is in use ` +\n                `(retries remaining: ${retriesLeft})`);\n    } catch (error) {\n      if (isErrorWithCode('ECONNREFUSED', error)) {\n        // The connection was refused so this port is good to use.\n        return portToTry;\n      }\n\n      throw error;\n    }\n\n    client.disconnect();\n    portToTry++;\n    retriesLeft--;\n  }\n\n  throw new WebExtError('Too many retries on port search');\n}\n\n\n// Declare the needed 'fx-runner' module flow types.\n\nexport type FirefoxRunnerParams = {|\n  binary: ?string,\n  profile?: string,\n  'new-instance'?: boolean,\n  'no-remote'?: boolean,\n  'foreground'?: boolean,\n  'listen': number,\n  'binary-args'?: Array<string> | string,\n  'env'?: {\n    [key: string]: string\n  },\n  'verbose'?: boolean,\n|};\n\nexport interface FirefoxProcess extends events$EventEmitter {\n  stderr: events$EventEmitter;\n  stdout: events$EventEmitter;\n  kill: Function;\n}\n\nexport type FirefoxRunnerResults = {|\n  process: FirefoxProcess,\n  binary: string,\n  args: Array<string>,\n|}\n\nexport type FirefoxRunnerFn =\n  (params: FirefoxRunnerParams) => Promise<FirefoxRunnerResults>;\n\n\nexport type FirefoxInfo = {|\n  firefox: FirefoxProcess,\n  debuggerPort: number,\n|}\n\n// Run command types and implementaion.\n\nexport type FirefoxRunOptions = {|\n  fxRunner?: FirefoxRunnerFn,\n  findRemotePort?: RemotePortFinderFn,\n  firefoxBinary?: string,\n  binaryArgs?: Array<string>,\n  args?: Array<any>,\n|};\n\n/*\n * Runs Firefox with the given profile object and resolves a promise on exit.\n */\nexport async function run(\n  profile: FirefoxProfile,\n  {\n    fxRunner = defaultFxRunner,\n    findRemotePort = defaultRemotePortFinder,\n    firefoxBinary, binaryArgs,\n  }: FirefoxRunOptions = {}\n): Promise<FirefoxInfo> {\n\n  log.debug(`Running Firefox with profile at ${profile.path()}`);\n\n  const remotePort = await findRemotePort();\n\n  const results = await fxRunner({\n    // if this is falsey, fxRunner tries to find the default one.\n    'binary': firefoxBinary,\n    'binary-args': binaryArgs,\n    // This ensures a new instance of Firefox is created. It has nothing\n    // to do with the devtools remote debugger.\n    'no-remote': true,\n    'listen': remotePort,\n    'foreground': true,\n    'profile': profile.path(),\n    'env': {\n      ...process.env,\n      ...defaultFirefoxEnv,\n    },\n    'verbose': true,\n  });\n\n  const firefox = results.process;\n\n  log.debug(`Executing Firefox binary: ${results.binary}`);\n  log.debug(`Firefox args: ${results.args.join(' ')}`);\n\n  firefox.on('error', (error) => {\n    // TODO: show a nice error when it can't find Firefox.\n    // if (/No such file/.test(err) || err.code === 'ENOENT') {\n    log.error(`Firefox error: ${error}`);\n    throw error;\n  });\n\n  log.info(\n    'Use --verbose or open Tools > Web Developer > Browser Console ' +\n    'to see logging');\n\n  firefox.stderr.on('data', (data) => {\n    log.debug(`Firefox stderr: ${data.toString().trim()}`);\n  });\n\n  firefox.stdout.on('data', (data) => {\n    log.debug(`Firefox stdout: ${data.toString().trim()}`);\n  });\n\n  firefox.on('close', () => {\n    log.debug('Firefox closed');\n  });\n\n  return { firefox, debuggerPort: remotePort };\n}\n\n\n// isDefaultProfile types and implementation.\n\nconst DEFAULT_PROFILES_NAMES = [\n  'default',\n  'dev-edition-default',\n];\n\nexport type IsDefaultProfileFn = (\n  profilePathOrName: string,\n  ProfileFinder?: typeof FirefoxProfile.Finder,\n  fsStat?: typeof fs.stat,\n) => Promise<boolean>;\n\n/*\n * Tests if a profile is a default Firefox profile (both as a profile name or\n * profile path).\n *\n * Returns a promise that resolves to true if the profile is one of default Firefox profile.\n */\nexport async function isDefaultProfile(\n  profilePathOrName: string,\n  ProfileFinder?: typeof FirefoxProfile.Finder = FirefoxProfile.Finder,\n  fsStat?: typeof fs.stat = fs.stat,\n): Promise<boolean> {\n  if (DEFAULT_PROFILES_NAMES.includes(profilePathOrName)) {\n    return true;\n  }\n\n  const baseProfileDir = ProfileFinder.locateUserDirectory();\n  const profilesIniPath = path.join(baseProfileDir, 'profiles.ini');\n  try {\n    await fsStat(profilesIniPath);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`profiles.ini not found: ${error}`);\n\n      // No profiles exist yet, default to false (the default profile name contains a\n      // random generated component).\n      return false;\n    }\n\n    // Re-throw any unexpected exception.\n    throw error;\n  }\n\n  // Check for profile dir path.\n  const finder = new ProfileFinder(baseProfileDir);\n  const readProfiles = promisify(finder.readProfiles, finder);\n\n  await readProfiles();\n\n  const normalizedProfileDirPath = path.normalize(\n    path.join(path.resolve(profilePathOrName), path.sep)\n  );\n\n  for (const profile of finder.profiles) {\n    // Check if the profile dir path or name is one of the default profiles\n    // defined in the profiles.ini file.\n    if (DEFAULT_PROFILES_NAMES.includes(profile.Name) ||\n        profile.Default === '1') {\n      let profileFullPath;\n\n      // Check for profile name.\n      if (profile.Name === profilePathOrName) {\n        return true;\n      }\n\n      // Check for profile path.\n      if (profile.IsRelative === '1') {\n        profileFullPath = path.join(baseProfileDir, profile.Path, path.sep);\n      } else {\n        profileFullPath = path.join(profile.Path, path.sep);\n      }\n\n      if (path.normalize(profileFullPath) === normalizedProfileDirPath) {\n        return true;\n      }\n    }\n  }\n\n  // Profile directory not found.\n  return false;\n}\n\n// configureProfile types and implementation.\n\nexport type ConfigureProfileOptions = {|\n  app?: PreferencesAppName,\n  getPrefs?: PreferencesGetterFn,\n  customPrefs?: FirefoxPreferences,\n|};\n\nexport type ConfigureProfileFn = (\n  profile: FirefoxProfile,\n  options?: ConfigureProfileOptions\n) => Promise<FirefoxProfile>;\n\n/*\n * Configures a profile with common preferences that are required to\n * activate extension development.\n *\n * Returns a promise that resolves with the original profile object.\n */\nexport function configureProfile(\n  profile: FirefoxProfile,\n  {\n    app = 'firefox',\n    getPrefs = defaultPrefGetter,\n    customPrefs = {},\n  }: ConfigureProfileOptions = {},\n): Promise<FirefoxProfile> {\n  // Set default preferences. Some of these are required for the add-on to\n  // operate, such as disabling signatures.\n  const prefs = getPrefs(app);\n  Object.keys(prefs).forEach((pref) => {\n    profile.setPreference(pref, prefs[pref]);\n  });\n  if (Object.keys(customPrefs).length > 0) {\n    const customPrefsStr = JSON.stringify(customPrefs, null, 2);\n    log.info(`Setting custom Firefox preferences: ${customPrefsStr}`);\n    Object.keys(customPrefs).forEach((custom) => {\n      profile.setPreference(custom, customPrefs[custom]);\n    });\n  }\n  profile.updatePreferences();\n  return Promise.resolve(profile);\n}\n\n// useProfile types and implementation.\n\nexport type UseProfileParams = {\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  isFirefoxDefaultProfile?: IsDefaultProfileFn,\n  customPrefs?: FirefoxPreferences,\n};\n\n// Use the target path as a Firefox profile without cloning it\n\nexport async function useProfile(\n  profilePath: string,\n  {\n    app,\n    configureThisProfile = configureProfile,\n    isFirefoxDefaultProfile = isDefaultProfile,\n    customPrefs = {},\n  }: UseProfileParams = {},\n): Promise<FirefoxProfile> {\n  const isForbiddenProfile = await isFirefoxDefaultProfile(profilePath);\n  if (isForbiddenProfile) {\n    throw new UsageError(\n      'Cannot use --keep-profile-changes on a default profile' +\n      ` (\"${profilePath}\")` +\n      ' because web-ext will make it insecure and unsuitable for daily use.' +\n      '\\nSee https://github.com/mozilla/web-ext/issues/1005'\n    );\n  }\n  const profile = new FirefoxProfile({destinationDirectory: profilePath});\n  return await configureThisProfile(profile, {app, customPrefs});\n}\n\n\n// createProfile types and implementation.\n\nexport type CreateProfileParams = {\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  customPrefs?: FirefoxPreferences,\n};\n\n/*\n * Creates a new temporary profile and resolves with the profile object.\n *\n * The profile will be deleted when the system process exits.\n */\nexport async function createProfile(\n  {\n    app,\n    configureThisProfile = configureProfile,\n    customPrefs = {},\n  }: CreateProfileParams = {},\n): Promise<FirefoxProfile> {\n  const profile = new FirefoxProfile();\n  return await configureThisProfile(profile, {app, customPrefs});\n}\n\n\n// copyProfile types and implementation.\n\nexport type CopyProfileOptions = {|\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  copyFromUserProfile?: Function,\n  customPrefs?: FirefoxPreferences,\n|};\n\n/*\n * Copies an existing Firefox profile and creates a new temporary profile.\n * The new profile will be configured with some preferences required to\n * activate extension development.\n *\n * It resolves with the new profile object.\n *\n * The temporary profile will be deleted when the system process exits.\n *\n * The existing profile can be specified as a directory path or a name of\n * one that exists in the current user's Firefox directory.\n */\nexport async function copyProfile(\n  profileDirectory: string,\n  {\n    app,\n    configureThisProfile = configureProfile,\n    copyFromUserProfile = defaultUserProfileCopier,\n    customPrefs = {},\n  }: CopyProfileOptions = {},\n): Promise<FirefoxProfile> {\n\n  const copy = promisify(FirefoxProfile.copy);\n  const copyByName = promisify(copyFromUserProfile);\n\n  try {\n    const dirExists = await isDirectory(profileDirectory);\n\n    let profile;\n\n    if (dirExists) {\n      log.debug(`Copying profile directory from \"${profileDirectory}\"`);\n      profile = await copy({profileDirectory});\n    } else {\n      log.debug(`Assuming ${profileDirectory} is a named profile`);\n      profile = await copyByName({name: profileDirectory});\n    }\n\n    return configureThisProfile(profile, {app, customPrefs});\n  } catch (error) {\n    throw new WebExtError(\n      `Could not copy Firefox profile from ${profileDirectory}: ${error}`);\n  }\n}\n\n\n// installExtension types and implementation.\n\nexport type InstallExtensionParams = {|\n  asProxy?: boolean,\n  manifestData: ExtensionManifest,\n  profile: FirefoxProfile,\n  extensionPath: string,\n|};\n\n/*\n * Installs an extension into the given Firefox profile object.\n * Resolves when complete.\n *\n * The extension is copied into a special location and you need to turn\n * on some preferences to allow this. See extensions.autoDisableScopes in\n * ./preferences.js.\n *\n * When asProxy is true, a special proxy file will be installed. This is a\n * text file that contains the path to the extension source.\n */\nexport async function installExtension(\n  {\n    asProxy = false,\n    manifestData,\n    profile,\n    extensionPath,\n  }: InstallExtensionParams): Promise<any> {\n  // This more or less follows\n  // https://github.com/saadtazi/firefox-profile-js/blob/master/lib/firefox_profile.js#L531\n  // (which is broken for web extensions).\n  // TODO: maybe uplift a patch that supports web extensions instead?\n\n  if (!profile.extensionsDir) {\n    throw new WebExtError('profile.extensionsDir was unexpectedly empty');\n  }\n\n  try {\n    await fs.stat(profile.extensionsDir);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`Creating extensions directory: ${profile.extensionsDir}`);\n      await fs.mkdir(profile.extensionsDir);\n    } else {\n      throw error;\n    }\n  }\n\n  const id = getManifestId(manifestData);\n  if (!id) {\n    throw new UsageError(\n      'An explicit extension ID is required when installing to ' +\n      'a profile (applications.gecko.id not found in manifest.json)');\n  }\n\n  if (asProxy) {\n    log.debug(`Installing as an extension proxy; source: ${extensionPath}`);\n\n    const isDir = await isDirectory(extensionPath);\n    if (!isDir) {\n      throw new WebExtError(\n        'proxy install: extensionPath must be the extension source ' +\n        `directory; got: ${extensionPath}`);\n    }\n\n    // Write a special extension proxy file containing the source\n    // directory. See:\n    // https://developer.mozilla.org/en-US/Add-ons/Setting_up_extension_development_environment#Firefox_extension_proxy_file\n    const destPath = path.join(profile.extensionsDir, `${id}`);\n    const writeStream = nodeFs.createWriteStream(destPath);\n    writeStream.write(extensionPath);\n    writeStream.end();\n    return await eventToPromise(writeStream, 'close');\n  } else {\n    // Write the XPI file to the profile.\n    const readStream = nodeFs.createReadStream(extensionPath);\n    const destPath = path.join(profile.extensionsDir, `${id}.xpi`);\n    const writeStream = nodeFs.createWriteStream(destPath);\n\n    log.debug(`Installing extension from ${extensionPath} to ${destPath}`);\n    readStream.pipe(writeStream);\n\n    return await Promise.all([\n      eventToPromise(readStream, 'close'),\n      eventToPromise(writeStream, 'close'),\n    ]);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/index.js","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 43\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 44\n// module chunks = 0","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 45\n// module chunks = 0","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 46\n// module chunks = 0","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 47\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 48\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\n// module id = 49\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/typeof.js\n// module id = 50\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = 51\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/inherits.js\n// module id = 52\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\nimport deepcopy from 'deepcopy';\nimport {fs} from 'mz';\n\nimport {onlyInstancesOf, InvalidManifest} from '../../../src/errors';\nimport getValidatedManifest, {getManifestId} from '../../../src/util/manifest';\nimport {withTempDir} from '../../../src/util/temp-dir';\nimport {basicManifest, makeSureItFails} from '../helpers';\n\n\nexport const manifestWithoutApps = deepcopy(basicManifest);\ndelete manifestWithoutApps.applications;\n\n\ndescribe('util/manifest', () => {\n\n  describe('getValidatedManifest', () => {\n\n    it('returns a valid manifest', () => withTempDir(\n      (tmpDir) =>\n        writeManifest(tmpDir.path(), basicManifest)\n          .then(() => getValidatedManifest(tmpDir.path()))\n          .then((manifestData) => {\n            assert.deepEqual(manifestData, basicManifest);\n          })\n    ));\n\n    it('allows manifests without an applications property', () => withTempDir(\n      (tmpDir) =>\n        writeManifest(tmpDir.path(), manifestWithoutApps)\n          .then(() => getValidatedManifest(tmpDir.path()))\n          .then((manifestData) => {\n            assert.deepEqual(manifestData, manifestWithoutApps);\n          })\n    ));\n\n    it('reports an error for a missing manifest file', () => {\n      const nonExistentDir = path.join('dev', 'null', 'nowhere');\n      return getValidatedManifest(nonExistentDir)\n        .then(makeSureItFails())\n        .catch(onlyInstancesOf(InvalidManifest, (error) => {\n          assert.match(error.message, /Could not read manifest\\.json/);\n          // Make sure the filename is included in the exception message.\n          // This is actually done by default in file system error messages.\n          assert.include(error.message, nonExistentDir);\n        }));\n    });\n\n    it('reports an error for invalid manifest JSON', () => withTempDir(\n      (tmpDir) => {\n        const badManifest = `{\n          \"name\": \"I'm an invalid JSON Manifest\n          \"version\": \"0.0.0\"\n        }`;\n        const manifestFile = path.join(tmpDir.path(), 'manifest.json');\n        return fs.writeFile(manifestFile, badManifest)\n          .then(() => getValidatedManifest(tmpDir.path()))\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(InvalidManifest, (error) => {\n            assert.match(error.message, /Error parsing manifest\\.json at /);\n            assert.include(\n              error.message, 'Unexpected token  in JSON at position 49');\n            assert.include(error.message, manifestFile);\n          }));\n      }\n    ));\n\n    it('reports an error when missing a name', () => withTempDir(\n      (tmpDir) => {\n        const noNameManifest = deepcopy(basicManifest);\n        delete noNameManifest.name;\n\n        return writeManifest(tmpDir.path(), noNameManifest)\n          .then((manifestFile) => {\n            return getValidatedManifest(tmpDir.path())\n              .then(makeSureItFails())\n              .catch(onlyInstancesOf(InvalidManifest, (error) => {\n                assert.match(\n                  error.message,\n                  /Manifest at .* is invalid: missing \"name\" property/);\n                assert.include(error.message, manifestFile);\n              }));\n          });\n      }\n    ));\n\n    it('reports an error when missing version', () => withTempDir(\n      (tmpDir) => {\n        const noVersionManifest = deepcopy(basicManifest);\n        delete noVersionManifest.version;\n\n        return writeManifest(tmpDir.path(), noVersionManifest)\n          .then((manifestFile) => {\n            return getValidatedManifest(tmpDir.path())\n              .then(makeSureItFails())\n              .catch(onlyInstancesOf(InvalidManifest, (error) => {\n                assert.match(\n                  error.message,\n                  /Manifest at .* is invalid: missing \"version\" property/);\n                assert.include(error.message, manifestFile);\n              }));\n          });\n      }\n    ));\n\n    it('reports an error when missing applications.gecko', () => withTempDir(\n      (tmpDir) => {\n        const incompleteManifest = deepcopy(basicManifest);\n        delete incompleteManifest.applications.gecko;\n\n        return writeManifest(tmpDir.path(), incompleteManifest)\n          .then((manifestFile) => {\n            return getValidatedManifest(tmpDir.path())\n              .then(makeSureItFails())\n              .catch(onlyInstancesOf(InvalidManifest, (error) => {\n                assert.match(\n                  error.message,\n                  /Manifest at .* is invalid: missing \"applications.gecko\".*/);\n                assert.include(error.message, manifestFile);\n              }));\n          });\n      }\n    ));\n\n    it('allows a missing applications.gecko.id', () => withTempDir(\n      (tmpDir) => {\n        const incompleteManifest = deepcopy(basicManifest);\n        delete incompleteManifest.applications.gecko.id;\n\n        return writeManifest(tmpDir.path(), incompleteManifest)\n          .then(() => getValidatedManifest(tmpDir.path()))\n          .then((manifestData) => {\n            assert.strictEqual(getManifestId(manifestData), undefined);\n          });\n      }\n    ));\n\n    it('concatenates errors in error message', () => withTempDir(\n      (tmpDir) => {\n        const manifestWithErrors = deepcopy(basicManifest);\n        delete manifestWithErrors.name;\n        delete manifestWithErrors.version;\n\n        return writeManifest(tmpDir.path(), manifestWithErrors)\n          .then(() => {\n            return getValidatedManifest(tmpDir.path())\n              .then(makeSureItFails())\n              .catch(onlyInstancesOf(InvalidManifest, (error) => {\n                assert.match(\n                  error.message,\n                  /missing \"name\" property; missing \"version\" property/);\n              }));\n          });\n      }\n    ));\n\n    it('allows comments in manifest JSON', () =>\n      withTempDir(async (tmpDir) => {\n        const manifestWithComments = `{\n          \"name\": \"the extension\",\n          \"version\": \"0.0.1\" // comments\n        }`;\n        const manifestFile = path.join(tmpDir.path(), 'manifest.json');\n        await fs.writeFile(manifestFile, manifestWithComments);\n        const manifestData = await getValidatedManifest(tmpDir.path());\n\n        assert.deepEqual(manifestData, manifestWithoutApps);\n      })\n    );\n\n    it('reports an error with line number in manifest JSON with comments', () =>\n      withTempDir(async (tmpDir) => {\n        const invalidManifestWithComments = `{\n          // a comment in its own line\n          // another comment on its own line\n          \"name\": \"I'm an invalid JSON Manifest\n        }`;\n        const manifestFile = path.join(tmpDir.path(), 'manifest.json');\n        await fs.writeFile(manifestFile, invalidManifestWithComments);\n        const promise = getValidatedManifest(tmpDir.path());\n\n        const error = await assert.isRejected(promise, InvalidManifest);\n        await assert.isRejected(promise, /Error parsing manifest\\.json at /);\n        assert.include(error.message, 'in JSON at position 133');\n        assert.include(error.message, manifestFile);\n      })\n    );\n\n  });\n\n  describe('getManifestId', () => {\n\n    it('returns a gecko ID', () => {\n      assert.equal(getManifestId(basicManifest),\n                   'basic-manifest@web-ext-test-suite');\n    });\n\n    it('returns undefined when ID is not specified', () => {\n      assert.strictEqual(getManifestId(manifestWithoutApps), undefined);\n    });\n\n  });\n\n});\n\n\nfunction writeManifest(destDir, manifestData) {\n  const manifestFile = path.join(destDir, 'manifest.json');\n  return fs.writeFile(manifestFile, JSON.stringify(manifestData))\n    .then(() => manifestFile);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.manifest.js","module.exports = require(\"deepcopy\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"deepcopy\"\n// module id = 54\n// module chunks = 0","/* @flow */\nimport opn from 'opn';\n\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\n\nexport type DocsParams = {\n  noInput?: boolean,\n  shouldExitProgram?: boolean,\n}\n\nexport type DocsOptions = {\n  openUrl?: typeof opn,\n}\n\nexport const url = 'https://developer.mozilla.org/en-US/Add-ons' +\n  '/WebExtensions/Getting_started_with_web-ext';\n\nexport default function docs(\n  params: DocsParams, {openUrl = opn}: DocsOptions = {}\n): Promise<void> {\n  return new Promise((resolve, reject) => {\n    openUrl(url, (error) => {\n      if (error) {\n        log.debug(`Encountered an error while opening URL ${url}`, error);\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/docs.js","/* @flow */\nimport {createInstance as defaultLinterCreator} from 'addons-linter';\n\nimport {createLogger} from '../util/logger';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n} from '../util/file-filter';\n// import flow types\nimport type {FileFilterCreatorFn} from '../util/file-filter';\n\nconst log = createLogger(__filename);\n\n\n// Define the needed 'addons-linter' module flow types.\n\nexport type LinterOutputType = 'text' | 'json';\n\nexport type LinterCreatorParams = {|\n  config: {|\n    logLevel: 'debug' | 'fatal',\n    stack: boolean,\n    pretty?: boolean,\n    warningsAsErrors?: boolean,\n    metadata?: boolean,\n    output?: LinterOutputType,\n    boring?: boolean,\n    selfHosted?: boolean,\n    shouldScanFile: (fileName: string) => boolean,\n    _: Array<string>,\n  |},\n  runAsBinary: boolean,\n|};\n\nexport type Linter = {|\n  run: () => Promise<void>,\n|};\n\nexport type LinterCreatorFn = (params: LinterCreatorParams) => Linter;\n\n\n// Lint command types and implementation.\n\nexport type LintCmdParams = {|\n  artifactsDir?: string,\n  boring?: boolean,\n  ignoreFiles?: Array<string>,\n  metadata?: boolean,\n  output?: LinterOutputType,\n  pretty?: boolean,\n  selfHosted?: boolean,\n  sourceDir: string,\n  verbose?: boolean,\n  warningsAsErrors?: boolean,\n|};\n\nexport type LintCmdOptions = {|\n  createLinter?: LinterCreatorFn,\n  createFileFilter?: FileFilterCreatorFn,\n  shouldExitProgram?: boolean,\n|};\n\nexport default function lint(\n  {\n    artifactsDir,\n    boring,\n    ignoreFiles,\n    metadata,\n    output,\n    pretty,\n    sourceDir,\n    selfHosted,\n    verbose,\n    warningsAsErrors,\n  }: LintCmdParams,\n  {\n    createLinter = defaultLinterCreator,\n    createFileFilter = defaultFileFilterCreator,\n    shouldExitProgram = true,\n  }: LintCmdOptions = {}\n): Promise<void> {\n  const fileFilter = createFileFilter({sourceDir, ignoreFiles, artifactsDir});\n\n  log.debug(`Running addons-linter on ${sourceDir}`);\n  const linter = createLinter({\n    config: {\n      logLevel: verbose ? 'debug' : 'fatal',\n      stack: Boolean(verbose),\n      pretty,\n      warningsAsErrors,\n      metadata,\n      output,\n      boring,\n      selfHosted,\n      shouldScanFile: (fileName) => fileFilter.wantFile(fileName),\n      // This mimics the first command line argument from yargs,\n      // which should be the directory to the extension.\n      _: [sourceDir],\n    },\n    runAsBinary: shouldExitProgram,\n  });\n  return linter.run();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/lint.js","/* @flow */\nimport defaultBuildExtension from './build';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxClient,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\nimport defaultGetValidatedManifest from '../util/manifest';\nimport {\n  createExtensionRunner,\n  defaultReloadStrategy,\n  MultiExtensionRunner as DefaultMultiExtensionRunner,\n} from '../extension-runners';\n// Import objects that are only used as Flow types.\nimport type {FirefoxPreferences} from '../firefox/preferences';\n\nconst log = createLogger(__filename);\n\n\n// Run command types and implementation.\n\nexport type CmdRunParams = {|\n  artifactsDir: string,\n  browserConsole: boolean,\n  pref?: FirefoxPreferences,\n  firefox: string,\n  firefoxArg?: Array<string>,\n  firefoxProfile?: string,\n  ignoreFiles?: Array<string>,\n  keepProfileChanges: boolean,\n  noInput?: boolean,\n  noReload: boolean,\n  preInstall: boolean,\n  sourceDir: string,\n  startUrl?: Array<string>,\n  target?: Array<string>,\n\n  // Android CLI options.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n  firefoxApk?: string,\n|};\n\nexport type CmdRunOptions = {|\n  buildExtension: typeof defaultBuildExtension,\n  desktopNotifications: typeof defaultDesktopNotifications,\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxClient,\n  reloadStrategy: typeof defaultReloadStrategy,\n  shouldExitProgram?: boolean,\n  MultiExtensionRunner?: typeof DefaultMultiExtensionRunner,\n  getValidatedManifest?: typeof defaultGetValidatedManifest,\n|};\n\nexport default async function run(\n  {\n    artifactsDir,\n    browserConsole = false,\n    pref,\n    firefox,\n    firefoxArg,\n    firefoxProfile,\n    keepProfileChanges = false,\n    ignoreFiles,\n    noInput = false,\n    noReload = false,\n    preInstall = false,\n    sourceDir,\n    startUrl,\n    target,\n    // Android CLI options.\n    adbBin,\n    adbHost,\n    adbPort,\n    adbDevice,\n    firefoxApk,\n  }: CmdRunParams,\n  {\n    buildExtension = defaultBuildExtension,\n    desktopNotifications = defaultDesktopNotifications,\n    firefoxApp = defaultFirefoxApp,\n    firefoxClient = defaultFirefoxClient,\n    reloadStrategy = defaultReloadStrategy,\n    MultiExtensionRunner = DefaultMultiExtensionRunner,\n    getValidatedManifest = defaultGetValidatedManifest,\n  }: CmdRunOptions = {}): Promise<DefaultMultiExtensionRunner> {\n\n  log.info(`Running web extension from ${sourceDir}`);\n  if (preInstall) {\n    log.info('Disabled auto-reloading because it\\'s not possible with ' +\n             '--pre-install');\n    noReload = true;\n  }\n\n  // Create an alias for --pref since it has been transformed into an\n  // object containing one or more preferences.\n  const customPrefs = pref;\n  const manifestData = await getValidatedManifest(sourceDir);\n\n  const runners = [];\n\n  const commonRunnerParams = {\n    // Common options.\n    extensions: [{sourceDir, manifestData}],\n    keepProfileChanges,\n    startUrl,\n    desktopNotifications,\n  };\n\n  if (!target || target.length === 0 || target.includes('firefox-desktop')) {\n    const firefoxDesktopRunnerParams = {\n      ...commonRunnerParams,\n\n      // Firefox specific CLI options.\n      firefoxArg,\n      firefoxBinary: firefox,\n      profilePath: firefoxProfile,\n      customPrefs,\n      browserConsole,\n      preInstall,\n\n      // Firefox runner injected dependencies.\n      firefoxApp,\n      firefoxClient,\n    };\n\n    const firefoxDesktopRunner = await createExtensionRunner({\n      target: 'firefox-desktop',\n      params: firefoxDesktopRunnerParams,\n    });\n    runners.push(firefoxDesktopRunner);\n  }\n\n  if (target && target.includes('firefox-android')) {\n    const firefoxAndroidRunnerParams = {\n      ...commonRunnerParams,\n\n      // Firefox specific CLI options.\n      profilePath: firefoxProfile,\n      customPrefs,\n      browserConsole,\n      preInstall,\n      firefoxApk,\n      adbDevice,\n      adbHost,\n      adbPort,\n      adbBin,\n\n      // Injected dependencies.\n      firefoxApp,\n      firefoxClient,\n      desktopNotifications: defaultDesktopNotifications,\n      buildSourceDir: (extensionSourceDir: string, tmpArtifactsDir: string) => {\n        return buildExtension({\n          sourceDir: extensionSourceDir,\n          ignoreFiles,\n          asNeeded: false,\n          // Use a separate temporary directory for building the extension zip file\n          // that we are going to upload on the android device.\n          artifactsDir: tmpArtifactsDir,\n        }, {\n          // Suppress the message usually logged by web-ext build.\n          showReadyMessage: false,\n        });\n      },\n    };\n\n    const firefoxAndroidRunner = await createExtensionRunner({\n      target: 'firefox-android',\n      params: firefoxAndroidRunnerParams,\n    });\n    runners.push(firefoxAndroidRunner);\n  }\n\n  const extensionRunner = new MultiExtensionRunner({\n    desktopNotifications,\n    runners,\n  });\n\n  await extensionRunner.run();\n\n  if (noReload) {\n    log.info('Automatic extension reloading has been disabled');\n  } else {\n    log.info('The extension will reload if any source file changes');\n\n    reloadStrategy({\n      extensionRunner,\n      sourceDir,\n      artifactsDir,\n      ignoreFiles,\n      noInput,\n    });\n  }\n\n  return extensionRunner;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/run.js","/* @flow */\nimport defaultNotifier from 'node-notifier';\n\nimport {createLogger} from './logger';\nimport type {Logger} from './logger';\n\nconst defaultLog = createLogger(__filename);\n\nexport type DesktopNotificationsParams = {|\n  title: string,\n  message: string,\n  icon?: string,\n|};\n\nexport type DesktopNotificationsOptions = {|\n  notifier?: typeof defaultNotifier,\n  log?: Logger,\n|};\n\nexport function showDesktopNotification(\n  {\n    title, message, icon,\n  }: DesktopNotificationsParams,\n  {\n    notifier = defaultNotifier,\n    log = defaultLog,\n  }: DesktopNotificationsOptions = {}\n): Promise<void> {\n\n  return new Promise((resolve, reject) => {\n    notifier.notify({title, message, icon}, (err, res) => {\n      if (err) {\n        log.debug(`Desktop notifier error: ${err.message},` +\n                 ` response: ${res}`);\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/desktop-notifier.js","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport defaultAddonSigner from 'sign-addon';\n\nimport defaultBuilder from './build';\nimport getValidatedManifest, {getManifestId} from '../util/manifest';\nimport {withTempDir} from '../util/temp-dir';\nimport {isErrorWithCode, UsageError, WebExtError} from '../errors';\nimport {prepareArtifactsDir} from '../util/artifacts';\nimport {createLogger} from '../util/logger';\nimport type {ExtensionManifest} from '../util/manifest';\n\n\nconst log = createLogger(__filename);\n\nexport const extensionIdFile = '.web-extension-id';\n\n// Sign command types and implementation.\n\nexport type SignParams = {|\n  apiKey: string,\n  apiProxy: string,\n  apiSecret: string,\n  apiUrlPrefix: string,\n  artifactsDir: string,\n  id?: string,\n  ignoreFiles?: Array<string>,\n  sourceDir: string,\n  timeout: number,\n  verbose?: boolean,\n|};\n\nexport type SignOptions = {\n  build?: typeof defaultBuilder,\n  signAddon?: typeof defaultAddonSigner,\n  preValidatedManifest?: ExtensionManifest,\n  shouldExitProgram?: boolean,\n};\n\nexport type SignResult = {|\n  success: boolean,\n  id: string,\n  downloadedFiles: Array<string>,\n|};\n\nexport default function sign(\n  {\n    apiKey,\n    apiProxy,\n    apiSecret,\n    apiUrlPrefix,\n    artifactsDir,\n    id,\n    ignoreFiles = [],\n    sourceDir,\n    timeout,\n    verbose,\n  }: SignParams,\n  {\n    build = defaultBuilder,\n    preValidatedManifest,\n    signAddon = defaultAddonSigner,\n  }: SignOptions = {}\n): Promise<SignResult> {\n  return withTempDir(\n    async function(tmpDir) {\n      await prepareArtifactsDir(artifactsDir);\n\n      let manifestData;\n\n      if (preValidatedManifest) {\n        manifestData = preValidatedManifest;\n      } else {\n        manifestData = await getValidatedManifest(sourceDir);\n      }\n\n      const [buildResult, idFromSourceDir] = await Promise.all([\n        build({sourceDir, ignoreFiles, artifactsDir: tmpDir.path()},\n              {manifestData, showReadyMessage: false}),\n        getIdFromSourceDir(sourceDir),\n      ]);\n\n      const manifestId = getManifestId(manifestData);\n\n      if (id && manifestId) {\n        throw new UsageError(\n          `Cannot set custom ID ${id} because manifest.json ` +\n          `declares ID ${manifestId}`);\n      }\n      if (id) {\n        log.debug(`Using custom ID declared as --id=${id}`);\n      }\n\n      if (manifestId) {\n        id = manifestId;\n      }\n\n      if (!id && idFromSourceDir) {\n        log.info(\n          `Using previously auto-generated extension ID: ${idFromSourceDir}`);\n        id = idFromSourceDir;\n      }\n\n      if (!id) {\n        log.warn('No extension ID specified (it will be auto-generated)');\n      }\n\n      const signingResult = await signAddon({\n        apiKey,\n        apiSecret,\n        apiUrlPrefix,\n        apiProxy,\n        timeout,\n        verbose,\n        id,\n        xpiPath: buildResult.extensionPath,\n        version: manifestData.version,\n        downloadDir: artifactsDir,\n      });\n\n      if (signingResult.id) {\n        await saveIdToSourceDir(sourceDir, signingResult.id);\n      }\n\n      // All information about the downloaded files would have\n      // already been logged by signAddon().\n      if (signingResult.success) {\n        log.info(`Extension ID: ${signingResult.id}`);\n        log.info('SUCCESS');\n      } else {\n        log.info('FAIL');\n        throw new WebExtError(\n          'The extension could not be signed');\n      }\n\n      return signingResult;\n    }\n  );\n}\n\n\nexport async function getIdFromSourceDir(\n  sourceDir: string\n): Promise<string | void> {\n  const filePath = path.join(sourceDir, extensionIdFile);\n\n  let content;\n\n  try {\n    content = await fs.readFile(filePath);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`No ID file found at: ${filePath}`);\n      return;\n    }\n    throw error;\n  }\n\n  let lines = content.toString().split('\\n');\n  lines = lines.filter((line) => {\n    line = line.trim();\n    if (line && !line.startsWith('#')) {\n      return line;\n    }\n  });\n\n  const id = lines[0];\n  log.debug(`Found extension ID ${id} in ${filePath}`);\n\n  if (!id) {\n    throw new UsageError(`No ID found in extension ID file ${filePath}`);\n  }\n\n  return id;\n}\n\n\nexport async function saveIdToSourceDir(\n  sourceDir: string, id: string\n): Promise<void> {\n  const filePath = path.join(sourceDir, extensionIdFile);\n  await fs.writeFile(filePath, [\n    '# This file was created by https://github.com/mozilla/web-ext',\n    '# Your auto-generated extension ID for addons.mozilla.org is:',\n    id.toString(),\n  ].join('\\n'));\n\n  log.debug(`Saved auto-generated ID ${id} to ${filePath}`);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/sign.js","/* @flow */\nimport os from 'os';\nimport path from 'path';\nimport {readFileSync} from 'fs';\n\nimport camelCase from 'camelcase';\nimport git from 'git-rev-sync';\nimport yargs from 'yargs';\n\nimport defaultCommands from './cmd';\nimport {UsageError} from './errors';\nimport {createLogger, consoleStream as defaultLogStream} from './util/logger';\nimport {coerceCLICustomPreference} from './firefox/preferences';\nimport {checkForUpdates as defaultUpdateChecker} from './util/updates';\nimport {\n  discoverConfigFiles as defaultConfigDiscovery,\n  loadJSConfigFile as defaultLoadJSConfigFile,\n  applyConfigToArgv as defaultApplyConfigToArgv,\n} from './config';\n\nconst log = createLogger(__filename);\nconst envPrefix = 'WEB_EXT';\n\n\ntype ProgramOptions = {|\n  absolutePackageDir?: string,\n|}\n\nexport type VersionGetterFn = (absolutePackageDir: string) => string;\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype ExecuteOptions = {\n  checkForUpdates?: Function,\n  systemProcess?: typeof process,\n  logStream?: typeof defaultLogStream,\n  getVersion?: VersionGetterFn,\n  applyConfigToArgv?: typeof defaultApplyConfigToArgv,\n  discoverConfigFiles?: typeof defaultConfigDiscovery,\n  loadJSConfigFile?: typeof defaultLoadJSConfigFile,\n  shouldExitProgram?: boolean,\n  globalEnv?: string,\n}\n\n\n/*\n * The command line program.\n */\nexport class Program {\n  yargs: any;\n  commands: { [key: string]: Function };\n  shouldExitProgram: boolean;\n  verboseEnabled: boolean;\n  options: Object;\n\n  constructor(\n    argv: ?Array<string>,\n    {\n      absolutePackageDir = process.cwd(),\n    }: ProgramOptions = {}\n  ) {\n    // This allows us to override the process argv which is useful for\n    // testing.\n    // NOTE: process.argv.slice(2) removes the path to node and web-ext\n    // executables from the process.argv array.\n    argv = argv || process.argv.slice(2);\n\n    // NOTE: always initialize yargs explicitly with the package dir\n    // so that we are sure that it is going to load the 'boolean-negation: false'\n    // config (See web-ext#469 for rationale).\n    const yargsInstance = yargs(argv, absolutePackageDir);\n\n    this.verboseEnabled = false;\n    this.shouldExitProgram = true;\n    this.yargs = yargsInstance;\n    this.yargs.strict();\n\n    this.commands = {};\n    this.options = {};\n  }\n\n  command(\n    name: string, description: string, executor: Function,\n    commandOptions: Object = {}\n  ): Program {\n    this.options[camelCase(name)] = commandOptions;\n\n    this.yargs.command(name, description, (yargsForCmd) => {\n      if (!commandOptions) {\n        return;\n      }\n      return yargsForCmd\n        // Make sure the user does not add any extra commands. For example,\n        // this would be a mistake because lint does not accept arguments:\n        // web-ext lint ./src/path/to/file.js\n        .demandCommand(0, 0, undefined,\n                       'This command does not take any arguments')\n        .strict()\n        .exitProcess(this.shouldExitProgram)\n        // Calling env() will be unnecessary after\n        // https://github.com/yargs/yargs/issues/486 is fixed\n        .env(envPrefix)\n        .options(commandOptions);\n    });\n    this.commands[name] = executor;\n    return this;\n  }\n\n  setGlobalOptions(options: Object): Program {\n    // This is a convenience for setting global options.\n    // An option is only global (i.e. available to all sub commands)\n    // with the `global` flag so this makes sure every option has it.\n    this.options = {...this.options, ...options};\n    Object.keys(options).forEach((key) => {\n      options[key].global = true;\n      if (options[key].demand === undefined) {\n        // By default, all options should be \"demanded\" otherwise\n        // yargs.strict() will think they are missing when declared.\n        options[key].demand = true;\n      }\n    });\n    this.yargs.options(options);\n    return this;\n  }\n\n  enableVerboseMode(\n    logStream: typeof defaultLogStream,\n    version: string\n  ): void {\n    if (this.verboseEnabled) {\n      return;\n    }\n\n    logStream.makeVerbose();\n    log.info('Version:', version);\n    this.verboseEnabled = true;\n  }\n\n  async execute(\n    absolutePackageDir: string,\n    {\n      checkForUpdates = defaultUpdateChecker,\n      systemProcess = process,\n      logStream = defaultLogStream,\n      getVersion = defaultVersionGetter,\n      applyConfigToArgv = defaultApplyConfigToArgv,\n      discoverConfigFiles = defaultConfigDiscovery,\n      loadJSConfigFile = defaultLoadJSConfigFile,\n      shouldExitProgram = true,\n      globalEnv = WEBEXT_BUILD_ENV,\n    }: ExecuteOptions = {}\n  ): Promise<void> {\n    this.shouldExitProgram = shouldExitProgram;\n    this.yargs.exitProcess(this.shouldExitProgram);\n\n    const argv = this.yargs.argv;\n    const cmd = argv._[0];\n\n    const version = getVersion(absolutePackageDir);\n    const runCommand = this.commands[cmd];\n\n    if (argv.verbose) {\n      this.enableVerboseMode(logStream, version);\n    }\n\n    let adjustedArgv = {...argv};\n\n    try {\n      if (cmd === undefined) {\n        throw new UsageError('No sub-command was specified in the args');\n      }\n      if (!runCommand) {\n        throw new UsageError(`Unknown command: ${cmd}`);\n      }\n      if (globalEnv === 'production') {\n        checkForUpdates ({\n          version: getVersion(absolutePackageDir),\n        });\n      }\n\n      const configFiles = [];\n\n      if (argv.configDiscovery) {\n        log.debug(\n          'Discovering config files. ' +\n          'Set --no-config-discovery to disable');\n        const discoveredConfigs = await discoverConfigFiles();\n        configFiles.push(...discoveredConfigs);\n      } else {\n        log.debug('Not discovering config files');\n      }\n\n      if (argv.config) {\n        configFiles.push(path.resolve(argv.config));\n      }\n\n      if (configFiles.length) {\n        const niceFileList = configFiles\n          .map((f) => f.replace(process.cwd(), '.'))\n          .map((f) => f.replace(os.homedir(), '~'))\n          .join(', ');\n        log.info(\n          'Applying config file' +\n          `${configFiles.length !== 1 ? 's' : ''}: ` +\n          `${niceFileList}`);\n      }\n\n      configFiles.forEach((configFileName) => {\n        const configObject = loadJSConfigFile(configFileName);\n        adjustedArgv = applyConfigToArgv({\n          argv: adjustedArgv,\n          argvFromCLI: argv,\n          configFileName,\n          configObject,\n          options: this.options,\n        });\n      });\n\n      if (adjustedArgv.verbose) {\n        // Ensure that the verbose is enabled when specified in a config file.\n        this.enableVerboseMode(logStream, version);\n      }\n\n      await runCommand(adjustedArgv, {shouldExitProgram});\n\n    } catch (error) {\n      if (!(error instanceof UsageError) || adjustedArgv.verbose) {\n        log.error(`\\n${error.stack}\\n`);\n      } else {\n        log.error(`\\n${error}\\n`);\n      }\n      if (error.code) {\n        log.error(`Error code: ${error.code}\\n`);\n      }\n\n      log.debug(`Command executed: ${cmd}`);\n\n      if (this.shouldExitProgram) {\n        systemProcess.exit(1);\n      } else {\n        throw error;\n      }\n    }\n  }\n}\n\n// A global variable generated by DefinePlugin, generated in webpack.config.js\ndeclare var WEBEXT_BUILD_ENV: string;\n\n//A defintion of type of argument for defaultVersionGetter\ntype VersionGetterOptions = {\n  globalEnv?: string,\n};\n\nexport function defaultVersionGetter(\n  absolutePackageDir: string,\n  {globalEnv = WEBEXT_BUILD_ENV}: VersionGetterOptions = {}\n): string {\n  if (globalEnv === 'production') {\n    log.debug('Getting the version from package.json');\n    const packageData: any = readFileSync(\n      path.join(absolutePackageDir, 'package.json'));\n    return JSON.parse(packageData).version;\n  } else {\n    log.debug('Getting version from the git revision');\n    return `${git.branch(absolutePackageDir)}-${git.long(absolutePackageDir)}`;\n  }\n}\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype MainParams = {\n  getVersion?: VersionGetterFn,\n  commands?: Object,\n  argv: Array<any>,\n  runOptions?: Object,\n}\n\nexport function main(\n  absolutePackageDir: string,\n  {\n    getVersion = defaultVersionGetter, commands = defaultCommands, argv,\n    runOptions = {},\n  }: MainParams = {}\n): Promise<any> {\n\n  const program = new Program(argv, {absolutePackageDir});\n\n  // yargs uses magic camel case expansion to expose options on the\n  // final argv object. For example, the 'artifacts-dir' option is alternatively\n  // available as argv.artifactsDir.\n  program.yargs\n    .usage(`Usage: $0 [options] command\n\nOption values can also be set by declaring an environment variable prefixed\nwith $${envPrefix}_. For example: $${envPrefix}_SOURCE_DIR=/path is the same as\n--source-dir=/path.\n\nTo view specific help for any given command, add the command name.\nExample: $0 --help run.\n`)\n    .help('help')\n    .alias('h', 'help')\n    .env(envPrefix)\n    .version(() => getVersion(absolutePackageDir))\n    .demandCommand(1, 'You must specify a command')\n    .strict();\n\n  program.setGlobalOptions({\n    'source-dir': {\n      alias: 's',\n      describe: 'Web extension source directory.',\n      default: process.cwd(),\n      requiresArg: true,\n      type: 'string',\n      coerce: path.resolve,\n    },\n    'artifacts-dir': {\n      alias: 'a',\n      describe: 'Directory where artifacts will be saved.',\n      default: path.join(process.cwd(), 'web-ext-artifacts'),\n      normalize: true,\n      requiresArg: true,\n      type: 'string',\n    },\n    'verbose': {\n      alias: 'v',\n      describe: 'Show verbose output',\n      type: 'boolean',\n    },\n    'ignore-files': {\n      alias: 'i',\n      describe: 'A list of glob patterns to define which files should be ' +\n                'ignored. (Example: --ignore-files=path/to/first.js ' +\n                'path/to/second.js \"**/*.log\")',\n      demand: false,\n      requiresArg: true,\n      type: 'array',\n    },\n    'no-input': {\n      describe: 'Disable all features that require standard input',\n      type: 'boolean',\n    },\n    'config': {\n      alias: 'c',\n      describe: 'Path to a CommonJS config file to set ' +\n        'option defaults',\n      default: undefined,\n      demand: false,\n      requiresArg: true,\n      type: 'string',\n    },\n    'config-discovery': {\n      describe: 'Discover config files in home directory and ' +\n        'working directory. Disable with --no-config-discovery.',\n      demand: false,\n      default: true,\n      type: 'boolean',\n    },\n  });\n\n  program\n    .command(\n      'build',\n      'Create an extension package from source',\n      commands.build, {\n        'as-needed': {\n          describe: 'Watch for file changes and re-build as needed',\n          type: 'boolean',\n        },\n        'overwrite-dest': {\n          alias: 'o',\n          describe: 'Overwrite destination package if it exists.',\n          type: 'boolean',\n        },\n      })\n    .command(\n      'sign',\n      'Sign the extension so it can be installed in Firefox',\n      commands.sign, {\n        'api-key': {\n          describe: 'API key (JWT issuer) from addons.mozilla.org',\n          demand: true,\n          type: 'string',\n        },\n        'api-secret': {\n          describe: 'API secret (JWT secret) from addons.mozilla.org',\n          demand: true,\n          type: 'string',\n        },\n        'api-url-prefix': {\n          describe: 'Signing API URL prefix',\n          default: 'https://addons.mozilla.org/api/v3',\n          demand: true,\n          type: 'string',\n        },\n        'api-proxy': {\n          describe:\n            'Use a proxy to access the signing API. ' +\n            'Example: https://yourproxy:6000 ',\n          demand: false,\n          type: 'string',\n        },\n        'id': {\n          describe:\n            'A custom ID for the extension. This has no effect if the ' +\n            'extension already declares an explicit ID in its manifest.',\n          demand: false,\n          type: 'string',\n        },\n        'timeout': {\n          describe: 'Number of milliseconds to wait before giving up',\n          type: 'number',\n        },\n      })\n    .command('run', 'Run the extension', commands.run, {\n      'target': {\n        alias: 't',\n        describe: 'The extensions runners to enable (e.g. firefox-desktop, ' +\n                  'firefox-android). Specify this option multiple times to ' +\n                  'run against multiple targets.',\n        default: 'firefox-desktop',\n        demand: false,\n        type: 'array',\n      },\n      'firefox': {\n        alias: ['f', 'firefox-binary'],\n        describe: 'Path or alias to a Firefox executable such as firefox-bin ' +\n                  'or firefox.exe. ' +\n                  'If not specified, the default Firefox will be used. ' +\n                  'You can specify the following aliases in lieu of a path: ' +\n                  'firefox, beta, nightly, firefoxdeveloperedition.',\n        demand: false,\n        type: 'string',\n      },\n      'firefox-arg': {\n        alias: 'arg',\n        describe: 'Supply an extra argument to Firefox.',\n        demand: false,\n        type: 'array',\n      },\n      'firefox-profile': {\n        alias: 'p',\n        describe: 'Run Firefox using a copy of this profile. The profile ' +\n                  'can be specified as a directory or a name, such as one ' +\n                  'you would see in the Profile Manager. If not specified, ' +\n                  'a new temporary profile will be created.',\n        demand: false,\n        type: 'string',\n      },\n      'keep-profile-changes': {\n        describe: 'Run Firefox directly in custom profile. Any changes to ' +\n                  'the profile will be saved.',\n        demand: false,\n        type: 'boolean',\n      },\n      'no-reload': {\n        describe: 'Do not reload the extension when source files change',\n        demand: false,\n        type: 'boolean',\n      },\n      'pre-install': {\n        describe: 'Pre-install the extension into the profile before ' +\n                  'startup. This is only needed to support older versions ' +\n                  'of Firefox.',\n        demand: false,\n        type: 'boolean',\n      },\n      'pref': {\n        describe: 'Launch firefox with a custom preference ' +\n                  '(example: --pref=general.useragent.locale=fr-FR). ' +\n                  'You can repeat this option to set more than one ' +\n                  'preference.',\n        demand: false,\n        requiresArg: true,\n        type: 'array',\n        coerce: coerceCLICustomPreference,\n      },\n      'start-url': {\n        alias: ['u', 'url'],\n        describe: 'Launch firefox at specified page',\n        demand: false,\n        requiresArg: true,\n        type: 'array',\n      },\n      'browser-console': {\n        alias: ['bc'],\n        describe: 'Open the DevTools Browser Console.',\n        demand: false,\n        type: 'boolean',\n      },\n      // Firefox for Android CLI options.\n      'adb-bin': {\n        describe: 'Specify a custom path to the adb binary',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-host': {\n        describe: 'Connect to adb on the specified host',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-port': {\n        describe: 'Connect to adb on the specified port',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-device': {\n        alias: ['android-device'],\n        describe: 'Connect to the specified adb device name',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'firefox-apk': {\n        describe: (\n          'Run a specific Firefox for Android APK. ' +\n          'Example: org.mozilla.fennec_aurora'\n        ),\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n    })\n    .command('lint', 'Validate the extension source', commands.lint, {\n      'output': {\n        alias: 'o',\n        describe: 'The type of output to generate',\n        type: 'string',\n        default: 'text',\n        choices: ['json', 'text'],\n      },\n      'metadata': {\n        describe: 'Output only metadata as JSON',\n        type: 'boolean',\n        default: false,\n      },\n      'warnings-as-errors': {\n        describe: 'Treat warnings as errors by exiting non-zero for warnings',\n        alias: 'w',\n        type: 'boolean',\n        default: false,\n      },\n      'pretty': {\n        describe: 'Prettify JSON output',\n        type: 'boolean',\n        default: false,\n      },\n      'self-hosted': {\n        describe:\n          'Your extension will be self-hosted. This disables messages ' +\n          'related to hosting on addons.mozilla.org.',\n        type: 'boolean',\n        default: false,\n      },\n      'boring': {\n        describe: 'Disables colorful shell output',\n        type: 'boolean',\n        default: false,\n      },\n    })\n    .command('docs', 'Open the web-ext documentation in a browser',\n             commands.docs, {});\n\n  return program.execute(absolutePackageDir, runOptions);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/program.js","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 61\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 62\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 63\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 64\n// module chunks = 0","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 65\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 66\n// module chunks = 0","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 67\n// module chunks = 0","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2018 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 68\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 69\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 70\n// module chunks = 0","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_classof.js\n// module id = 71\n// module chunks = 0","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator-method.js\n// module id = 72\n// module chunks = 0","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_new-promise-capability.js\n// module id = 73\n// module chunks = 0","module.exports = require(\"event-to-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"event-to-promise\"\n// module id = 74\n// module chunks = 0","/* @flow */\nimport Watchpack from 'watchpack';\nimport debounce from 'debounce';\n\nimport {createLogger} from './util/logger';\n\n\nconst log = createLogger(__filename);\n\n\n// onSourceChange types and implementation\n\nexport type ShouldWatchFn = (filePath: string) => boolean;\n\nexport type OnChangeFn = () => any;\n\nexport type OnSourceChangeParams = {|\n  sourceDir: string,\n  artifactsDir: string,\n  onChange: OnChangeFn,\n  shouldWatchFile: ShouldWatchFn,\n|};\n\n// NOTE: this fix an issue with flow and default exports (which currently\n// lose their type signatures) by explicitly declare the default export\n// signature. Reference: https://github.com/facebook/flow/issues/449\n// eslint-disable-next-line no-shadow\ndeclare function exports(params: OnSourceChangeParams): Watchpack;\n\nexport type OnSourceChangeFn = (params: OnSourceChangeParams) => Watchpack;\n\nexport default function onSourceChange(\n  {sourceDir, artifactsDir, onChange, shouldWatchFile}: OnSourceChangeParams\n): Watchpack {\n  // TODO: For network disks, we would need to add {poll: true}.\n  const watcher = new Watchpack();\n\n  const executeImmediately = true;\n  onChange = debounce(onChange, 1000, executeImmediately);\n\n  watcher.on('change', (filePath) => {\n    proxyFileChanges({artifactsDir, onChange, filePath, shouldWatchFile});\n  });\n\n  log.debug(`Watching for file changes in ${sourceDir}`);\n  watcher.watch([], [sourceDir], Date.now());\n\n  // TODO: support interrupting the watcher on Windows.\n  // https://github.com/mozilla/web-ext/issues/225\n  process.on('SIGINT', () => watcher.close());\n  return watcher;\n}\n\n\n// proxyFileChanges types and implementation.\n\nexport type ProxyFileChangesParams = {|\n  artifactsDir: string,\n  onChange: OnChangeFn,\n  filePath: string,\n  shouldWatchFile: ShouldWatchFn,\n|};\n\nexport function proxyFileChanges(\n  {artifactsDir, onChange, filePath, shouldWatchFile}: ProxyFileChangesParams\n): void {\n  if (filePath.indexOf(artifactsDir) === 0 || !shouldWatchFile(filePath)) {\n    log.debug(`Ignoring change to: ${filePath}`);\n  } else {\n    log.debug(`Changed: ${filePath}`);\n    log.debug(`Last change detection: ${(new Date()).toTimeString()}`);\n    onChange();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/watcher.js","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-ext.js\n// module id = 76\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-define.js\n// module id = 77\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 78\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\nimport mkdirp from 'mkdirp';\nimport promisify from 'es6-promisify';\n\nimport {UsageError, isErrorWithCode} from '../errors';\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\nconst defaultAsyncMkdirp = promisify(mkdirp);\n\ntype PrepareArtifactsDirOptions = {\n  asyncMkdirp?: typeof defaultAsyncMkdirp,\n}\n\nexport async function prepareArtifactsDir(\n  artifactsDir: string,\n  {asyncMkdirp = defaultAsyncMkdirp}: PrepareArtifactsDirOptions = {},\n): Promise<string> {\n  try {\n    const stats = await fs.stat(artifactsDir);\n    if (!stats.isDirectory()) {\n      throw new UsageError(\n        `--artifacts-dir=\"${artifactsDir}\" exists but it is not a directory.`);\n    }\n    // If the artifactsDir already exists, check that we have the write permissions on it.\n    try {\n      await fs.access(artifactsDir, fs.W_OK);\n    } catch (accessErr) {\n      if (isErrorWithCode('EACCES', accessErr)) {\n        throw new UsageError(\n          `--artifacts-dir=\"${artifactsDir}\" exists but the user lacks ` +\n          'permissions on it.');\n      } else {\n        throw accessErr;\n      }\n    }\n  } catch (error) {\n    if (isErrorWithCode('EACCES', error)) {\n      // Handle errors when the artifactsDir cannot be accessed.\n      throw new UsageError(\n        `Cannot access --artifacts-dir=\"${artifactsDir}\" because the user ` +\n        `lacks permissions: ${error}`);\n    } else if (isErrorWithCode('ENOENT', error)) {\n      // Create the artifact dir if it doesn't exist yet.\n      try {\n        log.debug(`Creating artifacts directory: ${artifactsDir}`);\n        await asyncMkdirp(artifactsDir);\n      } catch (mkdirErr) {\n        if (isErrorWithCode('EACCES', mkdirErr)) {\n          // Handle errors when the artifactsDir cannot be created for lack of permissions.\n          throw new UsageError(\n            `Cannot create --artifacts-dir=\"${artifactsDir}\" because the ` +\n            `user lacks permissions: ${mkdirErr}`);\n        } else {\n          throw mkdirErr;\n        }\n      }\n    } else {\n      throw error;\n    }\n  }\n\n  return artifactsDir;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/artifacts.js","module.exports = require(\"tty\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tty\"\n// module id = 80\n// module chunks = 0","/* @flow */\nimport {WebExtError, UsageError} from '../errors';\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\nexport const nonOverridablePreferences = [\n  'devtools.debugger.remote-enabled', 'devtools.debugger.prompt-connection',\n  'xpinstall.signatures.required',\n];\n\n// Flow Types\n\nexport type FirefoxPreferences = {\n  [key: string]: boolean | string | number,\n};\n\nexport type PreferencesAppName = 'firefox' | 'fennec';\n\n\n// Preferences Maps\n\nconst prefsCommon: FirefoxPreferences = {\n  // Allow debug output via dump to be printed to the system console\n  'browser.dom.window.dump.enabled': true,\n  // Warn about possibly incorrect code.\n  'javascript.options.strict': true,\n  'javascript.options.showInConsole': true,\n\n  // Allow remote connections to the debugger.\n  'devtools.debugger.remote-enabled': true,\n  // Disable the prompt for allowing connections.\n  'devtools.debugger.prompt-connection': false,\n\n  // Turn off platform logging because it is a lot of info.\n  'extensions.logging.enabled': false,\n\n  // Disable extension updates and notifications.\n  'extensions.checkCompatibility.nightly': false,\n  'extensions.update.enabled': false,\n  'extensions.update.notifyUser': false,\n\n  // From:\n  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l372\n  // Only load extensions from the application and user profile.\n  // AddonManager.SCOPE_PROFILE + AddonManager.SCOPE_APPLICATION\n  'extensions.enabledScopes': 5,\n  // Disable metadata caching for installed add-ons by default.\n  'extensions.getAddons.cache.enabled': false,\n  // Disable intalling any distribution add-ons.\n  'extensions.installDistroAddons': false,\n  // Allow installing extensions dropped into the profile folder.\n  'extensions.autoDisableScopes': 10,\n\n  // Disable app update.\n  'app.update.enabled': false,\n\n  // Allow unsigned add-ons.\n  'xpinstall.signatures.required': false,\n};\n\n// Prefs specific to Firefox for Android.\nconst prefsFennec: FirefoxPreferences = {\n  'browser.console.showInPanel': true,\n  'browser.firstrun.show.uidiscovery': false,\n  'devtools.remote.usb.enabled': true,\n};\n\n// Prefs specific to Firefox for desktop.\nconst prefsFirefox: FirefoxPreferences = {\n  'browser.startup.homepage': 'about:blank',\n  'startup.homepage_welcome_url': 'about:blank',\n  'startup.homepage_welcome_url.additional': '',\n  'devtools.errorconsole.enabled': true,\n  'devtools.chrome.enabled': true,\n\n  // From:\n  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l388\n  // Make url-classifier updates so rare that they won't affect tests.\n  'urlclassifier.updateinterval': 172800,\n  // Point the url-classifier to a nonexistent local URL for fast failures.\n  'browser.safebrowsing.provider.0.gethashURL':\n    'http://localhost/safebrowsing-dummy/gethash',\n  'browser.safebrowsing.provider.0.keyURL':\n    'http://localhost/safebrowsing-dummy/newkey',\n  'browser.safebrowsing.provider.0.updateURL':\n    'http://localhost/safebrowsing-dummy/update',\n\n  // Disable self repair/SHIELD\n  'browser.selfsupport.url': 'https://localhost/selfrepair',\n  // Disable Reader Mode UI tour\n  'browser.reader.detectedFirstArticle': true,\n\n  // Set the policy firstURL to an empty string to prevent\n  // the privacy info page to be opened on every \"web-ext run\".\n  // (See #1114 for rationale)\n  'datareporting.policy.firstRunURL': '',\n};\n\nconst prefs = {\n  common: prefsCommon,\n  fennec: prefsFennec,\n  firefox: prefsFirefox,\n};\n\n\n// Module exports\n\nexport type PreferencesGetterFn =\n  (appName: PreferencesAppName) => FirefoxPreferences;\n\nexport function getPrefs(\n  app: PreferencesAppName = 'firefox'\n): FirefoxPreferences {\n  const appPrefs = prefs[app];\n  if (!appPrefs) {\n    throw new WebExtError(`Unsupported application: ${app}`);\n  }\n  return {\n    ...prefsCommon,\n    ...appPrefs,\n  };\n}\n\nexport function coerceCLICustomPreference(\n  cliPrefs: Array<string>\n): FirefoxPreferences {\n  const customPrefs = {};\n\n  for (const pref of cliPrefs) {\n    const prefsAry = pref.split('=');\n\n    if (prefsAry.length < 2) {\n      throw new UsageError(\n        `Incomplete custom preference: \"${pref}\". ` +\n        'Syntax expected: \"prefname=prefvalue\".'\n      );\n    }\n\n    const key = prefsAry[0];\n    let value = prefsAry.slice(1).join('=');\n\n    if (/[^\\w{@}.-]/.test(key)) {\n      throw new UsageError(`Invalid custom preference name: ${key}`);\n    }\n\n    if (value === `${parseInt(value)}`) {\n      value = parseInt(value, 10);\n    } else if (value === 'true' || value === 'false') {\n      value = (value === 'true');\n    }\n\n    if (nonOverridablePreferences.includes(key)) {\n      log.warn(`'${key}' preference cannot be customized.`);\n      continue;\n    }\n    customPrefs[`${key}`] = value;\n  }\n\n  return customPrefs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/preferences.js","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Console = require(\"./console\"),\n    Memory = require(\"./memory\"),\n    DOM = require(\"./dom\"),\n    Network = require(\"./network\"),\n    StyleSheets = require(\"./stylesheets\");\n\nmodule.exports = Tab;\n\nfunction Tab(client, tab) {\n  this.initialize(client, tab.actor);\n\n  this.tab = tab;\n  this.updateInfo(tab);\n\n  this.on(\"tabNavigated\", this.onTabNavigated.bind(this));\n}\n\nTab.prototype = extend(ClientMethods, {\n  updateInfo: function(form) {\n    this.url = form.url;\n    this.title = form.title;\n  },\n\n  get StyleSheets() {\n    if (!this._StyleSheets) {\n      this._StyleSheets = new StyleSheets(this.client, this.tab.styleSheetsActor);\n    }\n    return this._StyleSheets;\n  },\n\n  get DOM() {\n    if (!this._DOM) {\n      this._DOM = new DOM(this.client, this.tab.inspectorActor);\n    }\n    return this._DOM;\n  },\n\n  get Network() {\n    if (!this._Network) {\n      this._Network = new Network(this.client, this.tab.consoleActor);\n    }\n    return this._Network;\n  },\n\n  get Console() {\n    if (!this._Console) {\n      this._Console = new Console(this.client, this.tab.consoleActor);\n    }\n    return this._Console;\n  },\n\n  get Memory() {\n    if (!this._Memory) {\n      this._Memory = new Memory(this.client, this.tab.memoryActor);\n    }\n    return this._Memory;\n  },\n\n  onTabNavigated: function(event) {\n    if (event.state == \"start\") {\n      this.emit(\"before-navigate\", { url: event.url });\n    }\n    else if (event.state == \"stop\") {\n      this.updateInfo(event);\n\n      this.emit(\"navigate\", { url: event.url, title: event.title });\n    }\n  },\n\n  attach: function(cb) {\n    this.request(\"attach\", cb);\n  },\n\n  detach: function(cb) {\n    this.request(\"detach\", cb);\n  },\n\n  reload: function(cb) {\n    this.request(\"reload\", cb);\n  },\n\n  navigateTo: function(url, cb) {\n    this.request(\"navigateTo\", { url: url }, cb);\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/tab.js\n// module id = 82\n// module chunks = 0","/* @flow */\n\n/**\n * This module provide an ExtensionRunner subclass that manage an extension executed\n * in a Firefox for Desktop instance.\n */\n\n// Import flow types from npm dependencies.\nimport type FirefoxProfile from 'firefox-profile';\n\nimport {\n  MultiExtensionsReloadError,\n  RemoteTempInstallNotSupported,\n  WebExtError,\n} from '../errors';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxConnector,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\n// Import flow types from project files.\nimport type {\n  FirefoxRDPResponseAddon,\n  RemoteFirefox,\n} from '../firefox/remote';\nimport type {\n  ExtensionRunnerParams,\n  ExtensionRunnerReloadResult,\n} from './base';\nimport type {FirefoxPreferences} from '../firefox/preferences';\nimport type {FirefoxInfo} from '../firefox/index'; // eslint-disable-line import/named\n\ntype FirefoxDesktopSpecificRunnerParams = {|\n  customPrefs?: FirefoxPreferences,\n  browserConsole: boolean,\n  firefoxArg: Array<string>,\n  firefoxBinary: string,\n  preInstall: boolean,\n\n  // Firefox desktop injected dependencies.\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxConnector,\n|};\n\nexport type FirefoxDesktopExtensionRunnerParams = {|\n  ...ExtensionRunnerParams,\n  // Firefox desktop CLI params.\n  ...FirefoxDesktopSpecificRunnerParams,\n|};\n\nconst log = createLogger(__filename);\n\n/**\n * Implements an IExtensionRunner which manages a Firefox Desktop instance.\n */\nexport class FirefoxDesktopExtensionRunner {\n  cleanupCallbacks: Set<Function>;\n  params: FirefoxDesktopExtensionRunnerParams;\n  profile: FirefoxProfile;\n  // Map extensions sourceDir to their related addon ids.\n  reloadableExtensions: Map<string, string>;\n  remoteFirefox: RemoteFirefox;\n  runningInfo: FirefoxInfo;\n\n  constructor(params: FirefoxDesktopExtensionRunnerParams) {\n    this.params = params;\n\n    this.reloadableExtensions = new Map();\n    this.cleanupCallbacks = new Set();\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Firefox Desktop';\n  }\n\n  /**\n   * Setup the Firefox Profile and run a Firefox Desktop instance.\n   */\n  async run(): Promise<void> {\n    // Get a firefox profile with the custom Prefs set (a new or a cloned one).\n    // Pre-install extensions as proxy if needed (and disable auto-reload if you do)\n    await this.setupProfileDir();\n\n    // (if reload is enabled):\n    // - Connect to the firefox instance on RDP\n    // - Install any extension if needed (if not installed as proxy)\n    // - Keep track of the extension id assigned in a map with the sourceDir as a key\n    await this.startFirefoxInstance();\n  }\n\n  /**\n   * Reloads all the extensions, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const reloadErrors = new Map();\n    for (const {sourceDir} of this.params.extensions) {\n      const [res] = await this.reloadExtensionBySourceDir(sourceDir);\n      if (res.reloadError instanceof Error) {\n        reloadErrors.set(sourceDir, res.reloadError);\n      }\n    }\n\n    if (reloadErrors.size > 0) {\n      return [{\n        runnerName,\n        reloadError: new MultiExtensionsReloadError(reloadErrors),\n      }];\n    }\n\n    return [{runnerName}];\n  }\n\n  /**\n   * Reloads a single extension, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadExtensionBySourceDir(\n    extensionSourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const addonId = this.reloadableExtensions.get(extensionSourceDir);\n\n    if (!addonId) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: new WebExtError(\n          'Extension not reloadable: ' +\n          `no addonId has been mapped to \"${extensionSourceDir}\"`\n        ),\n        runnerName,\n      }];\n    }\n\n    try {\n      await this.remoteFirefox.reloadAddon(addonId);\n    } catch (error) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: error,\n        runnerName,\n      }];\n    }\n\n    return [{runnerName, sourceDir: extensionSourceDir}];\n  }\n\n  /**\n   * Register a callback to be called when the runner has been exited\n   * (e.g. the Firefox instance exits or the user has requested web-ext\n   * to exit).\n   */\n  registerCleanup(fn: Function): void {\n    this.cleanupCallbacks.add(fn);\n  }\n\n  /**\n   * Exits the runner, by closing the managed Firefox instance.\n   */\n  async exit(): Promise<void> {\n    if (!this.runningInfo || !this.runningInfo.firefox) {\n      throw new WebExtError('No firefox instance is currently running');\n    }\n\n    this.runningInfo.firefox.kill();\n  }\n\n  // Private helper methods.\n\n  async setupProfileDir() {\n    const {\n      customPrefs,\n      extensions,\n      keepProfileChanges,\n      preInstall,\n      profilePath,\n      firefoxApp,\n    } = this.params;\n\n    if (profilePath) {\n      if (keepProfileChanges) {\n        log.debug(`Using Firefox profile from ${profilePath}`);\n        this.profile = await firefoxApp.useProfile(profilePath, {customPrefs});\n      } else {\n        log.debug(`Copying Firefox profile from ${profilePath}`);\n        this.profile = await firefoxApp.copyProfile(profilePath, {customPrefs});\n      }\n    } else {\n      log.debug('Creating new Firefox profile');\n      this.profile = await firefoxApp.createProfile({customPrefs});\n    }\n\n    // preInstall the extensions if needed.\n    if (preInstall) {\n      for (const extension of extensions) {\n        await firefoxApp.installExtension({\n          asProxy: true,\n          extensionPath: extension.sourceDir,\n          manifestData: extension.manifestData,\n          profile: this.profile,\n        });\n      }\n    }\n  }\n\n  async startFirefoxInstance() {\n    const {\n      browserConsole,\n      extensions,\n      firefoxArg,\n      firefoxBinary,\n      preInstall,\n      startUrl,\n      firefoxApp,\n      firefoxClient,\n    } = this.params;\n\n    const binaryArgs = [];\n\n    if (browserConsole) {\n      binaryArgs.push('-jsconsole');\n    }\n    if (startUrl) {\n      const urls = Array.isArray(startUrl) ? startUrl : [startUrl];\n      for (const url of urls) {\n        binaryArgs.push('--url', url);\n      }\n    }\n    if (firefoxArg) {\n      const args = Array.isArray(firefoxArg) ? firefoxArg : [firefoxArg];\n      for (const arg of args) {\n        binaryArgs.push(arg);\n      }\n    }\n\n    this.runningInfo = await firefoxApp.run(this.profile, {\n      firefoxBinary, binaryArgs,\n    });\n\n    this.runningInfo.firefox.on('close', () => {\n      for (const cleanupCb of this.cleanupCallbacks) {\n        try {\n          cleanupCb();\n        } catch (error) {\n          log.error(`Exception on executing cleanup callback: ${error}`);\n        }\n      }\n    });\n\n    if (!preInstall) {\n      const remoteFirefox = this.remoteFirefox = await firefoxClient({\n        port: this.runningInfo.debuggerPort,\n      });\n\n      // Install all the temporary addons.\n      for (const extension of extensions) {\n        try {\n          const addonId = await (\n            remoteFirefox.installTemporaryAddon(extension.sourceDir)\n              .then((installResult: FirefoxRDPResponseAddon) => {\n                return installResult.addon.id;\n              })\n          );\n\n          if (!addonId) {\n            throw new WebExtError(\n              'Unexpected missing addonId in the installAsTemporaryAddon result'\n            );\n          }\n\n          this.reloadableExtensions.set(extension.sourceDir, addonId);\n        } catch (error) {\n          if (error instanceof RemoteTempInstallNotSupported) {\n            log.debug(`Caught: ${error}`);\n            throw new WebExtError(\n              'Temporary add-on installation is not supported in this version' +\n              ' of Firefox (you need Firefox 49 or higher). For older Firefox' +\n              ' versions, use --pre-install'\n            );\n          } else {\n            throw error;\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/firefox-desktop.js","/* @flow */\n\n/**\n * This module provide an ExtensionRunner subclass that manage an extension executed\n * in a Firefox for Android instance.\n */\n\nimport net from 'net';\nimport path from 'path';\nimport readline from 'readline';\nimport tty from 'tty';\n\nimport {withTempDir} from '../util/temp-dir';\nimport DefaultADBUtils from '../util/adb';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport {\n  MultiExtensionsReloadError,\n  UsageError,\n  WebExtError,\n} from '../errors';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxConnector,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\nimport type {\n  ExtensionRunnerParams,\n  ExtensionRunnerReloadResult,\n} from './base';\nimport type {\n  FirefoxPreferences,\n} from '../firefox/preferences';\nimport type {\n  FirefoxRDPResponseAddon,\n  RemoteFirefox,\n} from '../firefox/remote';\nimport type {\n  ExtensionBuildResult,\n} from '../cmd/build';\n\nconst log = createLogger(__filename);\n\nexport type FirefoxAndroidExtensionRunnerParams = {|\n  ...ExtensionRunnerParams,\n\n  // Firefox specific.\n  customPrefs?: FirefoxPreferences,\n\n  // Not supported (currently ignored with logged warning).\n  preInstall?: boolean,\n  browserConsole?: boolean,\n\n  // Firefox android injected dependencies.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n  firefoxApk?: string,\n  firefoxAndroidTimeout?: number,\n\n  // Injected Dependencies.\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxConnector,\n  ADBUtils?: typeof DefaultADBUtils,\n  buildSourceDir: (string, string) => Promise<ExtensionBuildResult>,\n  desktopNotifications: typeof defaultDesktopNotifications,\n  stdin?: stream$Readable,\n|};\n\n/**\n * Implements an IExtensionRunner which manages a Firefox for Android instance.\n */\nexport class FirefoxAndroidExtensionRunner {\n  // Wait 3s before the next unix socket discovery loop.\n  static unixSocketDiscoveryRetryInterval = 3 * 1000;\n  // Wait for at most 3 minutes before giving up.\n  static unixSocketDiscoveryMaxTime = 3 * 60 * 1000;\n\n  params: FirefoxAndroidExtensionRunnerParams;\n  adbUtils: DefaultADBUtils;\n  exiting: boolean;\n  selectedAdbDevice: string;\n  selectedFirefoxApk: string;\n  selectedArtifactsDir: string;\n  selectedRDPSocketFile: string;\n  selectedTCPPort: number;\n  cleanupCallbacks: Set<Function>;\n  adbExtensionsPathBySourceDir: Map<string, string>;\n  reloadableExtensions: Map<string, string>;\n  remoteFirefox: RemoteFirefox;\n\n  constructor(params: FirefoxAndroidExtensionRunnerParams) {\n    this.params = params;\n    this.cleanupCallbacks = new Set();\n    this.adbExtensionsPathBySourceDir = new Map();\n    this.reloadableExtensions = new Map();\n\n    // Print warning for not currently supported options (e.g. preInstall,\n    // cloned profiles, browser console).\n    this.printIgnoredParamsWarnings();\n  }\n\n  async run(): Promise<void> {\n    const {\n      adbBin,\n      adbHost,\n      adbPort,\n      ADBUtils = DefaultADBUtils,\n    } = this.params;\n\n    this.adbUtils = new ADBUtils({\n      adbBin, adbHost, adbPort,\n    });\n\n    await this.adbDevicesDiscoveryAndSelect();\n    await this.apkPackagesDiscoveryAndSelect();\n    await this.adbCheckRuntimePermissions();\n    await this.adbForceStopSelectedPackage();\n\n    // Create profile prefs (with enabled remote RDP server), prepare the\n    // artifacts and temporary directory on the selected device, and\n    // push the profile preferences to the remote profile dir.\n    await this.adbPrepareProfileDir();\n\n    // NOTE: running Firefox for Android on the Android Emulator can be\n    // pretty slow, we can run the following 3 steps in parallel to speed up\n    // it a bit.\n    await Promise.all([\n      // Start Firefox for Android instance on the created profile.\n      this.adbStartSelectedPackage(),\n\n      // Build and push to devices all the extension xpis\n      // and keep track of the xpi built and uploaded by extension sourceDir.\n      this.buildAndPushExtensions(),\n\n      // Wait for RDP unix socket file created and\n      // Create an ADB forward connection on a free tcp port\n      this.adbDiscoveryAndForwardRDPUnixSocket(),\n    ]);\n\n    // Connect to RDP socket on the local tcp server, install all the pushed extension\n    // and keep track of the built and installed extension by extension sourceDir.\n    await this.rdpInstallExtensions();\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Firefox Android';\n  }\n\n  /**\n   * Reloads all the extensions, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const reloadErrors = new Map();\n\n    for (const {sourceDir} of this.params.extensions) {\n      const [res] = await this.reloadExtensionBySourceDir(sourceDir);\n      if (res.reloadError instanceof Error) {\n        reloadErrors.set(sourceDir, res.reloadError);\n      }\n    }\n\n    if (reloadErrors.size > 0) {\n      return [{\n        runnerName,\n        reloadError: new MultiExtensionsReloadError(reloadErrors),\n      }];\n    }\n\n    return [{runnerName}];\n  }\n\n  /**\n   * Reloads a single extension, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadExtensionBySourceDir(\n    extensionSourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const addonId = this.reloadableExtensions.get(extensionSourceDir);\n\n    if (!addonId) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: new WebExtError(\n          'Extension not reloadable: ' +\n            `no addonId has been mapped to \"${extensionSourceDir}\"`\n        ),\n        runnerName,\n      }];\n    }\n\n    try {\n      await this.buildAndPushExtension(extensionSourceDir);\n      await this.remoteFirefox.reloadAddon(addonId);\n    } catch (error) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: error,\n        runnerName,\n      }];\n    }\n\n    return [{runnerName, sourceDir: extensionSourceDir}];\n  }\n\n  /**\n   * Register a callback to be called when the runner has been exited\n   * (e.g. the Firefox instance exits or the user has requested web-ext\n   * to exit).\n   */\n  registerCleanup(fn: Function): void {\n    this.cleanupCallbacks.add(fn);\n  }\n\n  /**\n   * Exits the runner, by closing the managed Firefox instance.\n   */\n  async exit(): Promise<void> {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedArtifactsDir,\n    } = this;\n\n    this.exiting = true;\n\n    // If a Firefox for Android instance has been started,\n    // we should ensure that it has been stopped when we exit.\n    await this.adbForceStopSelectedPackage();\n\n    if (selectedArtifactsDir) {\n      log.debug('Cleaning up artifacts directory on the Android device...');\n      await adbUtils.clearArtifactsDir(selectedAdbDevice);\n    }\n\n    // Call all the registered cleanup callbacks.\n    for (const fn of this.cleanupCallbacks) {\n      try {\n        fn();\n      } catch (error) {\n        log.error(error);\n      }\n    }\n  }\n\n  // Private helper methods.\n\n  getDeviceProfileDir(): string {\n    return `${this.selectedArtifactsDir}/profile`;\n  }\n\n  printIgnoredParamsWarnings() {\n    if (this.params.profilePath) {\n      log.warn(\n        'Firefox for Android target does not support custom profile paths.'\n      );\n    }\n\n    if (this.params.keepProfileChanges) {\n      log.warn(\n        'Firefox for Android target does not support --keep-profile-changes.'\n      );\n    }\n\n    if (this.params.browserConsole) {\n      log.warn(\n        'Firefox for Android target does not support --browser-console option.'\n      );\n    }\n\n    if (this.params.preInstall) {\n      log.warn(\n        'Firefox for Android target does not support --pre-install option.'\n      );\n    }\n\n    if (this.params.startUrl) {\n      log.warn(\n        'Firefox for Android target does not support --start-url option.'\n      );\n    }\n  }\n\n  async adbDevicesDiscoveryAndSelect() {\n    const {adbUtils} = this;\n    const {adbDevice} = this.params;\n    let devices = [];\n\n    log.debug('Listing android devices');\n    devices = await adbUtils.discoverDevices();\n\n    if (devices.length === 0) {\n      throw new UsageError(\n        'No Android device found through ADB. ' +\n        'Make sure the device is connected and USB debugging is enabled.'\n      );\n    }\n\n    if (!adbDevice) {\n      const devicesMsg = devices.map((dev) => ` - ${dev}`).join('\\n');\n      log.info(`\\nAndroid devices found:\\n${devicesMsg}`);\n      throw new UsageError(\n        'Select an android device using --android-device=<name>');\n    }\n\n    const foundDevices = devices.filter((device) => {\n      return device === adbDevice;\n    });\n\n    if (foundDevices.length === 0) {\n      const devicesMsg = JSON.stringify(devices);\n      throw new UsageError(\n        `Android device ${adbDevice} was not found in list: ${devicesMsg}`);\n    }\n\n    this.selectedAdbDevice = foundDevices[0];\n    log.info(`Selected ADB device: ${this.selectedAdbDevice}`);\n  }\n\n  async apkPackagesDiscoveryAndSelect() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      params: {\n        firefoxApk,\n      },\n    } = this;\n    // Discovery and select a Firefox for Android version.\n    const packages = await adbUtils.discoverInstalledFirefoxAPKs(\n      selectedAdbDevice,\n      firefoxApk\n    );\n\n    if (packages.length === 0) {\n      throw new UsageError(\n        'No Firefox packages were found on the selected Android device');\n    }\n\n    const pkgsListMsg = (pkgs) => {\n      return pkgs.map((pkg) => ` - ${ pkg}`).join('\\n');\n    };\n\n    if (!firefoxApk) {\n      log.info(`\\nPackages found:\\n${pkgsListMsg(packages)}`);\n\n      if (packages.length > 1) {\n        throw new UsageError('Select one of the packages using --firefox-apk');\n      }\n\n      // If only one APK has been found, select it even if it has not been\n      // specified explicitly on the comment line.\n      this.selectedFirefoxApk = packages[0];\n      log.info(`Selected Firefox for Android APK: ${this.selectedFirefoxApk}`);\n      return;\n    }\n\n    const filteredPackages = packages.filter((line) => line === firefoxApk);\n\n    if (filteredPackages.length === 0) {\n      const pkgsList = pkgsListMsg(filteredPackages);\n      throw new UsageError(\n        `Package ${firefoxApk} was not found in list: ${pkgsList}`\n      );\n    }\n\n    this.selectedFirefoxApk = filteredPackages[0];\n    log.debug(`Selected Firefox for Android APK: ${this.selectedFirefoxApk}`);\n  }\n\n  async adbForceStopSelectedPackage() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n    } = this;\n\n    log.info(`Stopping existing instances of ${selectedFirefoxApk}...`);\n    await adbUtils.amForceStopAPK(selectedAdbDevice, selectedFirefoxApk);\n  }\n\n  async adbCheckRuntimePermissions() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n    } = this;\n\n    log.debug(`Discovering Android version for ${selectedAdbDevice}...`);\n\n    const androidVersion = await adbUtils.getAndroidVersionNumber(\n      selectedAdbDevice\n    );\n\n    if (typeof androidVersion !== 'number' || Number.isNaN(androidVersion)) {\n      throw new WebExtError(`Invalid Android version: ${androidVersion}`);\n    }\n\n    log.debug(`Detected Android version ${androidVersion}`);\n\n    if (androidVersion < 23) {\n      return;\n    }\n\n    log.debug('Checking read/write permissions needed for web-ext' +\n              `on ${selectedFirefoxApk}...`);\n\n    // Runtime permission needed to be able to run Firefox on a temporarily created profile\n    // on android versions >= 23 (Android Marshmallow, which is the first version where\n    // these permissions are optional and have to be granted explicitly).\n    await adbUtils.ensureRequiredAPKRuntimePermissions(\n      selectedAdbDevice, selectedFirefoxApk, [\n        'android.permission.READ_EXTERNAL_STORAGE',\n        'android.permission.WRITE_EXTERNAL_STORAGE',\n      ]\n    );\n  }\n\n  async adbPrepareProfileDir() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n      params: {\n        firefoxApp,\n      },\n    } = this;\n    // Create the preferences file and the Fennec temporary profile.\n    log.debug(`Preparing a temporary profile for ${selectedFirefoxApk}...`);\n\n    const profile = await firefoxApp.createProfile({app: 'fennec'});\n\n    // Choose a artifacts dir name for the assets pushed to the\n    // Android device.\n    this.selectedArtifactsDir = await adbUtils.getOrCreateArtifactsDir(\n      selectedAdbDevice\n    );\n\n    const deviceProfileDir = this.getDeviceProfileDir();\n\n    await adbUtils.runShellCommand(selectedAdbDevice, [\n      'mkdir', '-p', deviceProfileDir,\n    ]);\n    await adbUtils.pushFile(selectedAdbDevice,\n                            path.join(profile.profileDir, 'user.js'),\n                            `${deviceProfileDir}/user.js`);\n\n    log.debug(`Created temporary profile at ${deviceProfileDir}.`);\n  }\n\n  async adbStartSelectedPackage() {\n    const {\n      adbUtils,\n      selectedFirefoxApk,\n      selectedAdbDevice,\n    } = this;\n\n    const deviceProfileDir = this.getDeviceProfileDir();\n\n    log.info(`Starting ${selectedFirefoxApk}...`);\n\n    log.debug(`Using profile ${deviceProfileDir}`);\n\n    await adbUtils.startFirefoxAPK(\n      selectedAdbDevice, selectedFirefoxApk, deviceProfileDir\n    );\n  }\n\n  async buildAndPushExtension(sourceDir: string) {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedArtifactsDir,\n      params: {\n        buildSourceDir,\n      },\n    } = this;\n\n    await withTempDir(async (tmpDir) => {\n      const {extensionPath} = await buildSourceDir(sourceDir, tmpDir.path());\n\n      const extFileName = path.basename(extensionPath, '.zip');\n\n      let adbExtensionPath = this.adbExtensionsPathBySourceDir.get(sourceDir);\n\n      if (!adbExtensionPath) {\n        adbExtensionPath = `${selectedArtifactsDir}/${extFileName}.xpi`;\n      }\n\n      log.debug(`Uploading ${extFileName} on the android device`);\n\n      await adbUtils.pushFile(\n        selectedAdbDevice, extensionPath, adbExtensionPath\n      );\n\n      log.debug(`Upload completed: ${adbExtensionPath}`);\n\n      this.adbExtensionsPathBySourceDir.set(sourceDir, adbExtensionPath);\n    });\n  }\n\n  async buildAndPushExtensions() {\n    for (const {sourceDir} of this.params.extensions) {\n      await this.buildAndPushExtension(sourceDir);\n    }\n  }\n\n  async adbDiscoveryAndForwardRDPUnixSocket() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n      params: {\n        firefoxAndroidTimeout,\n      },\n    } = this;\n\n    const stdin = this.params.stdin || process.stdin;\n\n    const {\n      unixSocketDiscoveryRetryInterval,\n    } = FirefoxAndroidExtensionRunner;\n\n    let {\n      unixSocketDiscoveryMaxTime,\n    } = FirefoxAndroidExtensionRunner;\n\n    if (typeof firefoxAndroidTimeout === 'number') {\n      unixSocketDiscoveryMaxTime = firefoxAndroidTimeout;\n    }\n\n    const handleCtrlC = (str, key) => {\n      if (key.ctrl && key.name === 'c') {\n        adbUtils.setUserAbortDiscovery(true);\n      }\n    };\n\n    // TODO: use noInput property to decide if we should\n    // disable direct keypress handling.\n    if (stdin.isTTY && stdin instanceof tty.ReadStream) {\n      readline.emitKeypressEvents(stdin);\n      stdin.setRawMode(true);\n\n      stdin.on('keypress', handleCtrlC);\n    }\n\n    try {\n      // Got a debugger socket file to connect.\n      this.selectedRDPSocketFile = (\n        await adbUtils.discoverRDPUnixSocket(\n          selectedAdbDevice, selectedFirefoxApk, {\n            maxDiscoveryTime: unixSocketDiscoveryMaxTime,\n            retryInterval: unixSocketDiscoveryRetryInterval,\n          }\n        )\n      );\n    } finally {\n      if (stdin.isTTY && stdin instanceof tty.ReadStream) {\n        stdin.removeListener('keypress', handleCtrlC);\n      }\n    }\n\n    log.debug(`RDP Socket File selected: ${this.selectedRDPSocketFile}`);\n\n    const tcpPort = await this.chooseLocalTcpPort();\n\n    // Log the choosen tcp port at info level (useful to the user to be able\n    // to connect the Firefox DevTools to the Firefox for Android instance).\n    log.info(`You can connect to this Android device on TCP port ${tcpPort}`);\n\n    await adbUtils.setupForward(\n      selectedAdbDevice,\n      `localfilesystem:${this.selectedRDPSocketFile}`,\n      `tcp:${tcpPort}`\n    );\n\n    this.selectedTCPPort = tcpPort;\n  }\n\n  chooseLocalTcpPort(): Promise<number> {\n    return new Promise((resolve) => {\n      const srv = net.createServer();\n      // $FLOW_FIXME: flow has his own opinions on this method signature.\n      srv.listen(0, () => {\n        const freeTcpPort = srv.address().port;\n        srv.close();\n        resolve(freeTcpPort);\n      });\n    });\n  }\n\n  async rdpInstallExtensions() {\n    const {\n      selectedTCPPort,\n      params: {\n        extensions,\n        firefoxClient,\n      },\n    } = this;\n\n    const remoteFirefox = this.remoteFirefox = await firefoxClient({\n      port: selectedTCPPort,\n    });\n\n    // Exit and cleanup the extension runner if the connection to the\n    // remote Firefox for Android instance has been closed.\n    remoteFirefox.client.on('end', () => {\n      if (!this.exiting) {\n        log.info('Exiting the device because Firefox for Android disconnected');\n        this.exit();\n      }\n    });\n\n    // Install all the temporary addons.\n    for (const extension of extensions) {\n      const {sourceDir} = extension;\n      const adbExtensionPath = this.adbExtensionsPathBySourceDir.get(\n        sourceDir\n      );\n\n      if (!adbExtensionPath) {\n        throw new WebExtError(\n          `ADB extension path for \"${sourceDir}\" was unexpectedly empty`\n        );\n      }\n\n      const addonId = await (\n        remoteFirefox.installTemporaryAddon(adbExtensionPath)\n          .then((installResult: FirefoxRDPResponseAddon) => {\n            return installResult.addon.id;\n          })\n      );\n\n      if (!addonId) {\n        throw new WebExtError(\n          'Received an empty addonId from ' +\n          `remoteFirefox.installTemporaryAddon(\"${adbExtensionPath}\")`\n        );\n      }\n\n      this.reloadableExtensions.set(extension.sourceDir, addonId);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/firefox-android.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/objectWithoutProperties.js\n// module id = 85\n// module chunks = 0","/* @flow */\nimport os from 'os';\nimport path from 'path';\n\nimport requireUncached from 'require-uncached';\nimport camelCase from 'camelcase';\nimport decamelize from 'decamelize';\n\nimport fileExists from './util/file-exists';\nimport {createLogger} from './util/logger';\nimport {UsageError, WebExtError} from './errors';\n\nconst log = createLogger(__filename);\n\ntype ApplyConfigToArgvParams = {|\n  // This is the argv object which will get updated by each\n  // config applied.\n  argv: Object,\n  // This is the argv that only has CLI values applied to it.\n  argvFromCLI: Object,\n  configObject: Object,\n  options: Object,\n  configFileName: string,\n|};\n\nexport function applyConfigToArgv({\n  argv,\n  argvFromCLI,\n  configObject,\n  options,\n  configFileName,\n}: ApplyConfigToArgvParams): Object {\n  let newArgv = {...argv};\n\n  for (const option of Object.keys(configObject)) {\n    if (camelCase(option) !== option) {\n      throw new UsageError(\n        `The config option \"${option}\" must be ` +\n        `specified in camel case: \"${camelCase(option)}\"`);\n    }\n\n    // A config option cannot be a sub-command config\n    // object if it is an array.\n    if (!Array.isArray(configObject[option]) &&\n      typeof options[option] === 'object' &&\n      typeof configObject[option] === 'object') {\n      // Descend into the nested configuration for a sub-command.\n      newArgv = applyConfigToArgv({\n        argv: newArgv,\n        argvFromCLI,\n        configObject: configObject[option],\n        options: options[option],\n        configFileName});\n      continue;\n    }\n\n    const decamelizedOptName = decamelize(option, '-');\n\n    if (typeof options[decamelizedOptName] !== 'object') {\n      throw new UsageError(`The config file at ${configFileName} specified ` +\n        `an unknown option: \"${option}\"`);\n    }\n    if (options[decamelizedOptName].type === undefined) {\n      // This means yargs option type wasn't not defined correctly\n      throw new WebExtError(\n        `Option: ${option} was defined without a type.`);\n    }\n\n    const expectedType = options[decamelizedOptName].type ===\n      'count' ? 'number' : options[decamelizedOptName].type;\n\n    const optionType = (\n      Array.isArray(configObject[option]) ?\n        'array' : typeof configObject[option]\n    );\n\n    if (optionType !== expectedType) {\n      throw new UsageError(`The config file at ${configFileName} specified ` +\n        `the type of \"${option}\" incorrectly as \"${optionType}\"` +\n        ` (expected type \"${expectedType}\")`);\n    }\n\n    let defaultValue;\n    if (options[decamelizedOptName]) {\n      if (options[decamelizedOptName].default !== undefined) {\n        defaultValue = options[decamelizedOptName].default;\n      } else if (expectedType === 'boolean') {\n        defaultValue = false;\n      }\n    }\n\n    // This is our best effort (without patching yargs) to detect\n    // if a value was set on the CLI instead of in the config.\n    // It looks for a default value and if the argv value is\n    // different, it assumes that the value was configured on the CLI.\n\n    const wasValueSetOnCLI =\n      typeof argvFromCLI[option] !== 'undefined' &&\n      argvFromCLI[option] !== defaultValue;\n    if (wasValueSetOnCLI) {\n      log.debug(\n        `Favoring CLI: ${option}=${argvFromCLI[option]} over ` +\n        `configuration: ${option}=${configObject[option]}`);\n      newArgv[option] = argvFromCLI[option];\n      continue;\n    }\n\n    newArgv[option] = configObject[option];\n\n    const coerce = options[decamelizedOptName].coerce;\n    if (coerce) {\n      log.debug(\n        `Calling coerce() on configured value for ${option}`);\n      newArgv[option] = coerce(newArgv[option]);\n    }\n  }\n  return newArgv;\n}\n\nexport function loadJSConfigFile(filePath: string): Object {\n  const resolvedFilePath = path.resolve(filePath);\n  log.debug(\n    `Loading JS config file: \"${filePath}\" ` +\n    `(resolved to \"${resolvedFilePath}\")`);\n  let configObject;\n  try {\n    configObject = requireUncached(resolvedFilePath);\n  } catch (error) {\n    log.debug('Handling error:', error);\n    throw new UsageError(\n      `Cannot read config file: ${resolvedFilePath}\\n` +\n      `Error: ${error.message}`);\n  }\n  if (filePath.endsWith('package.json')) {\n    log.debug('Looking for webExt key inside package.json file');\n    configObject = configObject.webExt || {};\n  }\n  if (Object.keys(configObject).length === 0) {\n    log.debug(`Config file ${resolvedFilePath} did not define any options. ` +\n      'Did you set module.exports = {...}?');\n  }\n  return configObject;\n}\n\ntype DiscoverConfigFilesParams = {|\n  getHomeDir: () => string,\n|};\n\nexport async function discoverConfigFiles(\n  {getHomeDir = os.homedir}: DiscoverConfigFilesParams = {}\n): Promise<Array<string>> {\n  const magicConfigName = 'web-ext-config.js';\n\n  // Config files will be loaded in this order.\n  const possibleConfigs = [\n    // Look for a magic hidden config (preceded by dot) in home dir.\n    path.join(getHomeDir(), `.${magicConfigName}`),\n    // Look for webExt key inside package.json file\n    path.join(process.cwd(), 'package.json'),\n    // Look for a magic config in the current working directory.\n    path.join(process.cwd(), magicConfigName),\n  ];\n\n  const configs = await Promise.all(possibleConfigs.map(\n    async (fileName) => {\n      const resolvedFileName = path.resolve(fileName);\n      if (await fileExists(resolvedFileName)) {\n        return resolvedFileName;\n      } else {\n        log.debug(\n          `Discovered config \"${resolvedFileName}\" does not ` +\n          'exist or is not readable');\n        return undefined;\n      }\n    }\n  ));\n\n  const existingConfigs = [];\n  configs.forEach((f) => {\n    if (typeof f === 'string') {\n      existingConfigs.push(f);\n    }\n  });\n  return existingConfigs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 88\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 89\n// module chunks = 0","module.exports = require('./_hide');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 90\n// module chunks = 0","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 91\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 92\n// module chunks = 0","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 93\n// module chunks = 0","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-call.js\n// module id = 94\n// module chunks = 0","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array-iter.js\n// module id = 95\n// module chunks = 0","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_species-constructor.js\n// module id = 96\n// module chunks = 0","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_task.js\n// module id = 97\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_perform.js\n// module id = 98\n// module chunks = 0","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_promise-resolve.js\n// module id = 99\n// module chunks = 0","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-detect.js\n// module id = 100\n// module chunks = 0","module.exports = require(\"parse-json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"parse-json\"\n// module id = 101\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = 102\n// module chunks = 0","module.exports = require(\"bunyan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bunyan\"\n// module id = 103\n// module chunks = 0","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn.js\n// module id = 104\n// module chunks = 0","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopd.js\n// module id = 105\n// module chunks = 0","module.exports = require(\"es6-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-error\"\n// module id = 106\n// module chunks = 0","module.exports = require(\"firefox-profile\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"firefox-profile\"\n// module id = 107\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\n\nimport {onlyErrorsWithCode} from '../errors';\n\n/*\n * Resolves true if the path is a readable directory.\n *\n * Usage:\n *\n * isDirectory('/some/path')\n *  .then((dirExists) => {\n *    // dirExists will be true or false.\n *  });\n *\n * */\nexport default function isDirectory(path: string): Promise<boolean> {\n  return fs.stat(path)\n    .then((stats) => stats.isDirectory())\n    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], () => {\n      return false;\n    }));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/is-directory.js","var select = require(\"js-select\"),\n    extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = JSObject;\n\nfunction JSObject(client, obj) {\n  this.initialize(client, obj.actor);\n  this.obj = obj;\n}\n\nJSObject.prototype = extend(ClientMethods, {\n  type: \"object\",\n\n  get class() {\n    return this.obj.class;\n  },\n\n  get name() {\n    return this.obj.name;\n  },\n\n  get displayName() {\n    return this.obj.displayName;\n  },\n\n  ownPropertyNames: function(cb) {\n    this.request('ownPropertyNames', function(resp) {\n      return resp.ownPropertyNames;\n    }, cb);\n  },\n\n  ownPropertyDescriptor: function(name, cb) {\n    this.request('property', { name: name }, function(resp) {\n      return this.transformDescriptor(resp.descriptor);\n    }.bind(this), cb);\n  },\n\n  ownProperties: function(cb) {\n    this.request('prototypeAndProperties', function(resp) {\n      return this.transformProperties(resp.ownProperties);\n    }.bind(this), cb);\n  },\n\n  prototype: function(cb) {\n    this.request('prototype', function(resp) {\n      return this.createJSObject(resp.prototype);\n    }.bind(this), cb);\n  },\n\n  ownPropertiesAndPrototype: function(cb) {\n    this.request('prototypeAndProperties', function(resp) {\n      resp.ownProperties = this.transformProperties(resp.ownProperties);\n      resp.safeGetterValues = this.transformGetters(resp.safeGetterValues);\n      resp.prototype = this.createJSObject(resp.prototype);\n\n      return resp;\n    }.bind(this), cb);\n  },\n\n  /* helpers */\n  transformProperties: function(props) {\n    var transformed = {};\n    for (var prop in props) {\n      transformed[prop] = this.transformDescriptor(props[prop]);\n    }\n    return transformed;\n  },\n\n  transformGetters: function(getters) {\n    var transformed = {};\n    for (var prop in getters) {\n      transformed[prop] = this.transformGetter(getters[prop]);\n    }\n    return transformed;\n  },\n\n  transformDescriptor: function(descriptor) {\n    descriptor.value = this.createJSObject(descriptor.value);\n    return descriptor;\n  },\n\n  transformGetter: function(getter) {\n    return {\n      value: this.createJSObject(getter.getterValue),\n      prototypeLevel: getter.getterPrototypeLevel,\n      enumerable: getter.enumerable,\n      writable: getter.writable\n    }\n  }\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/jsobject.js\n// module id = 109\n// module chunks = 0","module.exports = require(\"js-select\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-select\"\n// module id = 110\n// module chunks = 0","module.exports = require(\"net\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"net\"\n// module id = 111\n// module chunks = 0","/* @flow */\n\nimport readline from 'readline';\nimport tty from 'tty';\n\nimport type Watchpack from 'watchpack';\n\nimport type {\n  IExtensionRunner, // eslint-disable-line import/named\n  ExtensionRunnerReloadResult,\n} from './base';\nimport {WebExtError} from '../errors';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport type {FirefoxAndroidExtensionRunnerParams} from './firefox-android';\nimport type {FirefoxDesktopExtensionRunnerParams} from './firefox-desktop';\nimport {createLogger} from '../util/logger';\nimport type {FileFilterCreatorFn} from '../util/file-filter';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n} from '../util/file-filter';\nimport defaultSourceWatcher from '../watcher';\nimport type {OnSourceChangeFn} from '../watcher';\n\n\nconst log = createLogger(__filename);\n\nexport type ExtensionRunnerConfig = {|\n  target: 'firefox-desktop',\n  params: FirefoxDesktopExtensionRunnerParams,\n|} | {|\n  target: 'firefox-android',\n  params: FirefoxAndroidExtensionRunnerParams,\n|};\n\nexport type MultiExtensionRunnerParams = {|\n  runners: Array<IExtensionRunner>,\n  desktopNotifications: typeof defaultDesktopNotifications,\n|};\n\nexport async function createExtensionRunner(config: ExtensionRunnerConfig) {\n  switch (config.target) {\n    case 'firefox-desktop': {\n      // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n      const {FirefoxDesktopExtensionRunner} = require('./firefox-desktop');\n      return new FirefoxDesktopExtensionRunner(config.params);\n    }\n    case 'firefox-android': {\n      // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n      const {FirefoxAndroidExtensionRunner} = require('./firefox-android');\n      return new FirefoxAndroidExtensionRunner(config.params);\n    }\n    default:\n      throw new WebExtError(`Unknown target: \"${config.target}\"`);\n  }\n}\n\n/**\n * Implements an IExtensionRunner which allow the caller to\n * manage multiple extension runners at the same time (e.g. by running\n * a Firefox Desktop instance alongside to a Firefox for Android instance).\n */\nexport class MultiExtensionRunner {\n  extensionRunners: Array<IExtensionRunner>;\n  desktopNotifications: typeof defaultDesktopNotifications;\n\n  constructor(params: MultiExtensionRunnerParams) {\n    this.extensionRunners = params.runners;\n    this.desktopNotifications = params.desktopNotifications;\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Multi Extension Runner';\n  }\n\n  /**\n   * Call the `run` method on all the managed extension runners,\n   * and awaits that all the runners has been successfully started.\n   */\n  async run(): Promise<void> {\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      promises.push(runner.run());\n    }\n\n    await Promise.all(promises);\n  }\n\n  /**\n   * Reloads all the extensions on all the managed extension runners,\n   * collect any reload error, and resolves to an array composed by\n   * a ExtensionRunnerReloadResult object per managed runner.\n   *\n   * Any detected reload error is also logged on the terminal and shows as a\n   * desktop notification.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    log.debug('Reloading all reloadable add-ons');\n\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      const reloadPromise = runner.reloadAllExtensions().then(\n        () => {\n          return {runnerName: runner.getName()};\n        },\n        (error) => {\n          return {\n            runnerName: runner.getName(),\n            reloadError: error,\n          };\n        }\n      );\n\n      promises.push(reloadPromise);\n    }\n\n    return await Promise.all(promises).then((results) => {\n      this.handleReloadResults(results);\n      return results;\n    });\n  }\n\n  /**\n   * Reloads a single extension on all the managed extension runners,\n   * collect any reload error and resolves to an array composed by\n   * a ExtensionRunnerReloadResult object per managed runner.\n   *\n   * Any detected reload error is also logged on the terminal and shows as a\n   * desktop notification.\n   */\n  async reloadExtensionBySourceDir(\n    sourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    log.debug(`Reloading add-on at ${sourceDir}`);\n\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      const reloadPromise = runner.reloadExtensionBySourceDir(sourceDir).then(\n        () => {\n          return {runnerName: runner.getName(), sourceDir};\n        },\n        (error) => {\n          return {\n            runnerName: runner.getName(),\n            reloadError: error,\n            sourceDir,\n          };\n        }\n      );\n\n      promises.push(reloadPromise);\n    }\n\n    // $FLOW_FIXME: When upgrading to Flow 0.61.0, it could not follow the type of sourceDir in the array of promises.\n    return await Promise.all(promises).then((results) => {\n      this.handleReloadResults(results);\n      return results;\n    });\n  }\n\n  /**\n   * Register a callback to be called when all the managed runners has been exited.\n   */\n  registerCleanup(cleanupCallback: Function): void {\n    const promises = [];\n\n    // Create a promise for every extension runner managed by this instance,\n    // the promise will be resolved when the particular runner calls its\n    // registered cleanup callbacks.\n    for (const runner of this.extensionRunners) {\n      promises.push(new Promise((resolve) => {\n        runner.registerCleanup(resolve);\n      }));\n    }\n\n    // Wait for all the created promises to be resolved or rejected\n    // (once each one of the runners has cleaned up) and then call\n    // the cleanup callback registered to this runner.\n    Promise.all(promises).then(cleanupCallback, cleanupCallback);\n  }\n\n  /**\n   * Exits all the managed runner has been exited.\n   */\n  async exit(): Promise<void> {\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      promises.push(runner.exit());\n    }\n\n    await Promise.all(promises);\n  }\n\n  // Private helper methods.\n\n  handleReloadResults(results: Array<ExtensionRunnerReloadResult>): void {\n    for (const {runnerName, reloadError, sourceDir} of results) {\n      if (reloadError instanceof Error) {\n        let message = 'Error occurred while reloading';\n        if (sourceDir) {\n          message += ` \"${sourceDir}\" `;\n        }\n\n        message += `on \"${runnerName}\" - ${reloadError.message}`;\n\n        log.error(`\\n${message}`);\n        log.debug(reloadError.stack);\n\n        this.desktopNotifications({\n          title: 'web-ext run: extension reload error',\n          message,\n        });\n      }\n    }\n  }\n}\n\n// defaultWatcherCreator types and implementation.\n\nexport type WatcherCreatorParams = {|\n  reloadExtension: (string) => void,\n  sourceDir: string,\n  artifactsDir: string,\n  onSourceChange?: OnSourceChangeFn,\n  ignoreFiles?: Array<string>,\n  createFileFilter?: FileFilterCreatorFn,\n|};\n\nexport type WatcherCreatorFn = (params: WatcherCreatorParams) => Watchpack;\n\nexport function defaultWatcherCreator(\n  {\n    reloadExtension, sourceDir, artifactsDir, ignoreFiles,\n    onSourceChange = defaultSourceWatcher,\n    createFileFilter = defaultFileFilterCreator,\n  }: WatcherCreatorParams\n): Watchpack {\n  const fileFilter = createFileFilter(\n    {sourceDir, artifactsDir, ignoreFiles}\n  );\n  return onSourceChange({\n    sourceDir,\n    artifactsDir,\n    onChange: () => reloadExtension(sourceDir),\n    shouldWatchFile: (file) => fileFilter.wantFile(file),\n  });\n}\n\n\n// defaultReloadStrategy types and implementation.\n\nexport type ReloadStrategyParams = {|\n  extensionRunner: IExtensionRunner,\n  sourceDir: string,\n  artifactsDir: string,\n  ignoreFiles?: Array<string>,\n  noInput?: boolean,\n|};\n\nexport type ReloadStrategyOptions = {|\n  createWatcher?: WatcherCreatorFn,\n  stdin?: stream$Readable,\n  kill?: typeof process.kill,\n|};\n\nexport function defaultReloadStrategy(\n  {\n    artifactsDir,\n    extensionRunner,\n    ignoreFiles,\n    noInput = false,\n    sourceDir,\n  }: ReloadStrategyParams,\n  {\n    createWatcher = defaultWatcherCreator,\n    stdin = process.stdin,\n    kill = process.kill,\n  }: ReloadStrategyOptions = {}\n): void {\n  const allowInput = !noInput;\n  if (!allowInput) {\n    log.debug('Input has been disabled because of noInput==true');\n  }\n\n  const watcher: Watchpack = createWatcher({\n    reloadExtension: (watchedSourceDir) => {\n      extensionRunner.reloadExtensionBySourceDir(watchedSourceDir);\n    },\n    sourceDir,\n    artifactsDir,\n    ignoreFiles,\n  });\n\n  extensionRunner.registerCleanup(() => {\n    watcher.close();\n    if (allowInput) {\n      stdin.pause();\n    }\n  });\n\n  if (allowInput && stdin instanceof tty.ReadStream && stdin.isTTY) {\n    readline.emitKeypressEvents(stdin);\n    stdin.setRawMode(true);\n\n    const keypressUsageInfo = 'Press R to reload (and Ctrl-C to quit)';\n\n    // NOTE: this `Promise.resolve().then(...)` is basically used to spawn a \"co-routine\"\n    // that is executed before the callback attached to the Promise returned by this function\n    // (and it allows the `run` function to not be stuck in the while loop).\n    Promise.resolve().then(async function() {\n      log.info(keypressUsageInfo);\n\n      let userExit = false;\n\n      while (!userExit) {\n        const keyPressed = await new Promise((resolve) => {\n          stdin.once('keypress', (str, key) => resolve(key));\n        });\n\n        if (keyPressed.ctrl && keyPressed.name === 'c') {\n          userExit = true;\n        } else if (keyPressed.name === 'z') {\n          // Prepare to suspend.\n\n          // NOTE: Switch the raw mode off before suspending (needed to make the keypress event\n          // to work correctly when the nodejs process is resumed).\n          if (stdin instanceof tty.ReadStream) {\n            stdin.setRawMode(false);\n          }\n\n          log.info('\\nweb-ext has been suspended on user request');\n          kill(process.pid, 'SIGTSTP');\n\n          // Prepare to resume.\n\n          log.info(`\\nweb-ext has been resumed. ${keypressUsageInfo}`);\n          // Switch the raw mode on on resume.\n          if (stdin instanceof tty.ReadStream) {\n            stdin.setRawMode(true);\n          }\n        } else if (keyPressed.name === 'r') {\n          log.debug('Reloading installed extensions on user request');\n          extensionRunner.reloadAllExtensions();\n        }\n      }\n\n      log.info('\\nExiting web-ext on user request');\n      extensionRunner.exit();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/index.js","module.exports = require(\"readline\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"readline\"\n// module id = 113\n// module chunks = 0","/* @flow */\nimport defaultADB from 'adbkit';\n\nimport {\n  isErrorWithCode,\n  UsageError,\n  WebExtError,\n} from '../errors';\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\n\nexport type ADBUtilsParams = {|\n  adb?: typeof defaultADB,\n  // ADB configs.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n|};\n\nexport type DiscoveryParams = {|\n  maxDiscoveryTime: number,\n  retryInterval: number,\n|};\n\n// Helper function used to raise an UsageError when the adb binary has not been found.\nasync function wrapADBCall(asyncFn: (...any) => Promise<any>): Promise<any> {\n  try {\n    return await asyncFn();\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error) &&\n        error.message.includes('spawn adb')) {\n      throw new UsageError(\n        'No adb executable has been found. ' +\n          'You can Use --adb-bin, --adb-host/--adb-port ' +\n          'to configure it manually if needed.');\n    }\n\n    throw error;\n  }\n}\n\nexport default class ADBUtils {\n  params: ADBUtilsParams;\n  adb: typeof defaultADB;\n  adbClient: any; // TODO: better flow typing here.\n\n  // Map<deviceId -> artifactsDir>\n  artifactsDirMap: Map<string, string>;\n  // Toggled when the user wants to abort the RDP Unix Socket discovery loop\n  // while it is still executing.\n  userAbortDiscovery: boolean;\n\n  constructor(params: ADBUtilsParams) {\n    this.params = params;\n\n    const {\n      adb,\n      adbBin,\n      adbHost,\n      adbPort,\n    } = params;\n\n    this.adb = adb || defaultADB;\n\n    this.adbClient = this.adb.createClient({\n      bin: adbBin,\n      host: adbHost,\n      port: adbPort,\n    });\n\n    this.artifactsDirMap = new Map();\n\n    this.userAbortDiscovery = false;\n  }\n\n  runShellCommand(\n    deviceId: string, cmd: string | Array<string>\n  ): Promise<string> {\n    const {adb, adbClient} = this;\n\n    log.debug(`Run adb shell command on ${deviceId}: ${JSON.stringify(cmd)}`);\n\n    return wrapADBCall(async () => {\n      return await adbClient.shell(deviceId, cmd).then(adb.util.readAll);\n    }).then((res) => res.toString());\n  }\n\n  async discoverDevices(): Promise<Array<string>> {\n    const {adbClient} = this;\n\n    let devices = [];\n\n    log.debug('Listing android devices');\n    devices = await wrapADBCall(async () => adbClient.listDevices());\n\n    return devices.map((dev) => dev.id);\n  }\n\n  async discoverInstalledFirefoxAPKs(\n    deviceId: string,\n    firefoxApk?: string\n  ): Promise<Array<string>> {\n    log.debug(`Listing installed Firefox APKs on ${deviceId}`);\n\n    const pmList = await this.runShellCommand(deviceId, [\n      'pm', 'list', 'packages',\n    ]);\n\n    return pmList.split('\\n')\n      .map((line) => line.replace('package:', '').trim())\n      .filter((line) => {\n        // Look for an exact match if firefoxApk is defined.\n        if (firefoxApk) {\n          return line === firefoxApk;\n        }\n        // Match any package name that starts with the package name of a Firefox for Android browser.\n        return (\n          line.startsWith('org.mozilla.fennec') ||\n            line.startsWith('org.mozilla.firefox')\n        );\n      });\n  }\n\n  async getAndroidVersionNumber(deviceId: string): Promise<number> {\n    const androidVersion = (await this.runShellCommand(deviceId, [\n      'getprop', 'ro.build.version.sdk',\n    ])).trim();\n\n    const androidVersionNumber = parseInt(androidVersion);\n\n    // No need to check the granted runtime permissions on Android versions < Lollypop.\n    if (isNaN(androidVersionNumber)) {\n      throw new WebExtError(\n        'Unable to discovery android version on ' +\n        `${deviceId}: ${androidVersion}`\n      );\n    }\n\n    return androidVersionNumber;\n  }\n\n  // Raise an UsageError when the given APK does not have the required runtime permissions.\n  async ensureRequiredAPKRuntimePermissions(\n    deviceId: string, apk: string, permissions: Array<string>\n  ): Promise<void> {\n    const permissionsMap = {};\n\n    // Initialize every permission to false in the permissions map.\n    for (const perm of permissions) {\n      permissionsMap[perm] = false;\n    }\n\n    // Retrieve the permissions information for the given apk.\n    const pmDumpLogs = (await this.runShellCommand(deviceId, [\n      'pm', 'dump', apk,\n    ])).split('\\n');\n\n    // Set to true the required permissions that have been granted.\n    for (const line of pmDumpLogs) {\n      for (const perm of permissions) {\n        if (line.includes(`${perm}: granted=true`)) {\n          permissionsMap[perm] = true;\n        }\n      }\n    }\n\n    for (const perm of permissions) {\n      if (!permissionsMap[perm]) {\n        throw new UsageError(\n          `Required ${perm} has not be granted for ${apk}. ` +\n          'Please grant them using the Android Settings ' +\n          'or using the following adb command:\\n' +\n          `\\t adb shell pm grant ${apk} ${perm}\\n`\n        );\n      }\n    }\n  }\n\n  async amForceStopAPK(deviceId: string, apk: string): Promise<void> {\n    await this.runShellCommand(deviceId, [\n      'am', 'force-stop', apk,\n    ]);\n  }\n\n  async getOrCreateArtifactsDir(deviceId: string): Promise<string> {\n    let artifactsDir = this.artifactsDirMap.get(deviceId);\n\n    if (artifactsDir) {\n      return artifactsDir;\n    }\n\n    artifactsDir = `/sdcard/web-ext-artifacts-${Date.now()}`;\n\n    const testDirOut = (await this.runShellCommand(\n      deviceId, `test -d ${artifactsDir} ; echo $?`\n    )).trim();\n\n    if (testDirOut !== '1') {\n      throw new WebExtError(\n        `Cannot create artifacts directory ${artifactsDir} ` +\n        `because it exists on ${deviceId}.`\n      );\n    }\n\n    await this.runShellCommand(deviceId, ['mkdir', '-p', artifactsDir]);\n\n    this.artifactsDirMap.set(deviceId, artifactsDir);\n\n    return artifactsDir;\n  }\n\n  async clearArtifactsDir(deviceId: string): Promise<void> {\n    const artifactsDir = this.artifactsDirMap.get(deviceId);\n\n    if (!artifactsDir) {\n      // nothing to do here.\n      return;\n    }\n\n    this.artifactsDirMap.delete(deviceId);\n\n    log.debug(\n      `Removing ${artifactsDir} artifacts directory on ${deviceId} device`\n    );\n\n    await this.runShellCommand(deviceId, [\n      'rm', '-rf', artifactsDir,\n    ]);\n  }\n\n  async pushFile(\n    deviceId: string, localPath: string, devicePath: string\n  ): Promise<void> {\n    const {adbClient} = this;\n\n    log.debug(`Pushing ${localPath} to ${devicePath} on ${deviceId}`);\n\n    await wrapADBCall(async () => {\n      await adbClient.push(deviceId, localPath, devicePath)\n        .then(function(transfer) {\n          return new Promise((resolve) => {\n            transfer.on('end', resolve);\n          });\n        });\n    });\n  }\n\n  async startFirefoxAPK(\n    deviceId: string, apk: string, deviceProfileDir: string\n  ): Promise<void> {\n    const {adbClient} = this;\n\n    log.debug(\n      `Starting ${apk} with profile ${deviceProfileDir} on ${deviceId}`\n    );\n\n    await wrapADBCall(async () => {\n      await adbClient.startActivity(deviceId, {\n        wait: true,\n        action: 'android.activity.MAIN',\n        component: `${apk}/.App`,\n        extras: [\n          {\n            key: 'args',\n            value: `-profile ${deviceProfileDir}`,\n          },\n        ],\n      });\n    });\n  }\n\n  setUserAbortDiscovery(value: boolean) {\n    this.userAbortDiscovery = value;\n  }\n\n  async discoverRDPUnixSocket(\n    deviceId: string, apk: string,\n    {maxDiscoveryTime, retryInterval}: DiscoveryParams = {}\n  ): Promise<string> {\n    let rdpUnixSockets = [];\n\n    const discoveryStartedAt = Date.now();\n\n    while (rdpUnixSockets.length === 0) {\n      if (this.userAbortDiscovery) {\n        throw new UsageError(\n          'Exiting Firefox Remote Debugging socket discovery on user request'\n        );\n      }\n\n      if (Date.now() - discoveryStartedAt > maxDiscoveryTime) {\n        throw new WebExtError(\n          'Timeout while waiting for the Android Firefox Debugger Socket'\n        );\n      }\n\n      rdpUnixSockets = (await this.runShellCommand(deviceId, [\n        'cat', '/proc/net/unix',\n      ])).split('\\n').filter((line) => {\n        // The RDP unix socket is expected to be a path in the form:\n        //   /data/data/org.mozilla.fennec_rpl/firefox-debugger-socket\n        return line.trim().endsWith(`${apk}/firefox-debugger-socket`);\n      });\n\n      if (rdpUnixSockets.length === 0) {\n        await new Promise((resolve) => setTimeout(resolve, retryInterval));\n      }\n    }\n\n    // Convert into an array of unix socket filenames.\n    rdpUnixSockets = rdpUnixSockets.map((line) => {\n      return line.trim().split(/\\s/).pop();\n    });\n\n    if (rdpUnixSockets.length > 1) {\n      throw new WebExtError(\n        'Unexpected multiple RDP sockets: ' +\n        `${JSON.stringify(rdpUnixSockets)}`\n      );\n    }\n\n    return rdpUnixSockets[0];\n  }\n\n  async setupForward(deviceId: string, remote: string, local: string) {\n    const {adbClient} = this;\n\n    // TODO(rpl): we should use adb.listForwards and reuse the existing one if any (especially\n    // because adbkit doesn't seem to support `adb forward --remote` yet).\n    log.debug(`Configuring ADB forward for ${deviceId}: ${remote} -> ${local}`);\n\n    await wrapADBCall(async () => {\n      await adbClient.forward(deviceId, local, remote);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/adb.js","module.exports = require(\"stream\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"stream\"\n// module id = 115\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\n\nimport {isErrorWithCode} from '../errors';\n\ntype FileExistsOptions = {|\n  fileIsReadable: (filePath: string) => Promise<boolean>,\n|};\n\n/*\n * Resolves true if the path is a readable file.\n *\n * Usage:\n *\n * const exists = await fileExists(filePath);\n * if (exists) {\n *   // ...\n * }\n *\n * */\nexport default async function fileExists(\n  path: string,\n  {\n    fileIsReadable = (f) => fs.access(f, fs.constants.R_OK),\n  }: FileExistsOptions = {}\n): Promise<boolean> {\n  try {\n    await fileIsReadable(path);\n    const stat = await fs.stat(path);\n    return stat.isFile();\n  } catch (error) {\n    if (isErrorWithCode(['EACCES', 'ENOENT'], error)) {\n      return false;\n    }\n    throw error;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/file-exists.js","/* @flow */\nimport defaultUpdateNotifier from 'update-notifier';\n\ntype CheckForUpdatesParams = {|\n  version: string,\n  updateNotifier?: typeof defaultUpdateNotifier,\n|};\n\nexport function checkForUpdates(\n  {\n    version,\n    updateNotifier = defaultUpdateNotifier,\n  }: CheckForUpdatesParams\n) {\n  const pkg = {name: 'web-ext', version};\n\n  updateNotifier({\n    pkg,\n    updateCheckInterval: 1000 * 60 * 60 * 24 * 3, // 3 days,\n  }).notify();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/updates.js","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 118\n// module chunks = 0","module.exports = require(\"camelcase\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"camelcase\"\n// module id = 119\n// module chunks = 0","module.exports = require(\"git-rev-sync\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"git-rev-sync\"\n// module id = 120\n// module chunks = 0","// Webpack tests entry point. Bundles all the test files\n// into a single file.\n\nimport 'babel-polyfill';\n\nimport chai from 'chai';\nimport chaiAsPromised from 'chai-as-promised';\n\n// Enable chai-as-promised plugin.\nchai.use(chaiAsPromised);\n\nvar context = require.context('.', true, /.*?test\\..*?.js$/);\ncontext.keys().forEach(context);\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/runner.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 122\n// module chunks = 0","module.exports = require(\"chai-as-promised\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chai-as-promised\"\n// module id = 123\n// module chunks = 0","var map = {\n\t\"./test-cmd/test.build.js\": 125,\n\t\"./test-cmd/test.docs.js\": 204,\n\t\"./test-cmd/test.lint.js\": 206,\n\t\"./test-cmd/test.run.js\": 208,\n\t\"./test-cmd/test.sign.js\": 211,\n\t\"./test-extension-runners/test.extension-runners.js\": 214,\n\t\"./test-extension-runners/test.firefox-android.js\": 215,\n\t\"./test-extension-runners/test.firefox-desktop.js\": 216,\n\t\"./test-firefox/test.firefox.js\": 217,\n\t\"./test-firefox/test.preferences.js\": 218,\n\t\"./test-firefox/test.remote.js\": 219,\n\t\"./test-util/test.adb.js\": 220,\n\t\"./test-util/test.artifacts.js\": 221,\n\t\"./test-util/test.desktop-notifier.js\": 222,\n\t\"./test-util/test.file-exists.js\": 223,\n\t\"./test-util/test.file-filter.js\": 224,\n\t\"./test-util/test.is-directory.js\": 225,\n\t\"./test-util/test.logger.js\": 226,\n\t\"./test-util/test.manifest.js\": 53,\n\t\"./test-util/test.temp-dir.js\": 227,\n\t\"./test-util/test.updates.js\": 228,\n\t\"./test.config.js\": 230,\n\t\"./test.errors.js\": 239,\n\t\"./test.program.js\": 240,\n\t\"./test.setup.js\": 242,\n\t\"./test.watcher.js\": 243,\n\t\"./test.web-ext.js\": 244\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 124;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./tests/unit .*?test\\..*?.js$\n// module id = 124\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport {it, describe} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\nimport defaultEventToPromise from 'event-to-promise';\n\nimport build, {\n  safeFileName,\n  getDefaultLocalizedName,\n  defaultPackageCreator,\n} from '../../../src/cmd/build';\nimport {FileFilter} from '../../../src/util/file-filter';\nimport {withTempDir} from '../../../src/util/temp-dir';\nimport {\n  basicManifest,\n  fixturePath,\n  makeSureItFails,\n  ZipFile,\n} from '../helpers';\nimport {manifestWithoutApps} from '../test-util/test.manifest';\nimport {UsageError} from '../../../src/errors';\nimport {createLogger} from '../../../src/util/logger';\n\nconst log = createLogger(__filename);\n\ndescribe('build', () => {\n\n  it('zips a package', () => {\n    const zipFile = new ZipFile();\n\n    return withTempDir(\n      (tmpDir) =>\n        build({\n          sourceDir: fixturePath('minimal-web-ext'),\n          artifactsDir: tmpDir.path(),\n        })\n          .then((buildResult) => {\n            assert.match(buildResult.extensionPath,\n                         /minimal_extension-1\\.0\\.zip$/);\n            return buildResult.extensionPath;\n          })\n          .then((extensionPath) => zipFile.open(extensionPath))\n          .then(() => zipFile.extractFilenames())\n          .then((fileNames) => {\n            fileNames.sort();\n            assert.deepEqual(fileNames,\n                             ['background-script.js', 'manifest.json']);\n            return zipFile.close();\n          })\n    );\n  });\n\n  it('configures a build command with the expected fileFilter', () => {\n    const packageCreator = sinon.spy(\n      () => ({extensionPath: 'extension/path'})\n    );\n    const fileFilter = {wantFile: () => true};\n    const createFileFilter = sinon.spy(() => fileFilter);\n    const params = {\n      sourceDir: '/src',\n      artifactsDir: 'artifacts',\n      ignoreFiles: ['**/*.log'],\n    };\n    return build(params, {packageCreator, createFileFilter}).then(() => {\n      // ensure sourceDir, artifactsDir, ignoreFiles is used\n      sinon.assert.calledWithMatch(createFileFilter, params);\n      // ensure packageCreator received correct fileFilter\n      sinon.assert.calledWithMatch(packageCreator, {fileFilter});\n    });\n  });\n\n  it('gives the correct name to a localized extension', () => {\n    return withTempDir(\n      (tmpDir) =>\n        build({\n          sourceDir: fixturePath('minimal-localizable-web-ext'),\n          artifactsDir: tmpDir.path(),\n        })\n          .then((buildResult) => {\n            assert.match(buildResult.extensionPath,\n                         /name_of_the_extension-1\\.0\\.zip$/);\n            return buildResult.extensionPath;\n          })\n    );\n  });\n\n  it('handles repeating localization keys', () => {\n    return withTempDir(\n      (tmpDir) => {\n        const messageFileName = path.join(tmpDir.path(), 'messages.json');\n        fs.writeFileSync(\n          messageFileName,\n          `{\"extensionName\": {\n              \"message\": \"example extension\",\n              \"description\": \"example description\"\n            }\n          }`\n        );\n\n        const manifestWithRepeatingPattern = {\n          name: '__MSG_extensionName__ __MSG_extensionName__',\n          version: '0.0.1',\n        };\n\n        return getDefaultLocalizedName({\n          messageFile: messageFileName,\n          manifestData: manifestWithRepeatingPattern,\n        })\n          .then((result) => {\n            assert.match(result, /example extension example extension/);\n          });\n      }\n    );\n  });\n\n  it('checks locale file for malformed json', () => {\n    return withTempDir(\n      (tmpDir) => {\n        const messageFileName = path.join(tmpDir.path(), 'messages.json');\n        fs.writeFileSync(\n          messageFileName,\n          '{\"simulated:\" \"json syntax error\"'\n        );\n\n        return getDefaultLocalizedName({\n          messageFile: messageFileName,\n          manifestData: manifestWithoutApps,\n        })\n          .then(makeSureItFails())\n          .catch((error) => {\n            assert.instanceOf(error, UsageError);\n            assert.match(\n              error.message, /Unexpected string in JSON at position 14/);\n            assert.match(error.message, /^Error parsing messages\\.json/);\n            assert.include(error.message, messageFileName);\n          });\n      }\n    );\n  });\n\n  it('checks locale file for incorrect format', () => {\n    return withTempDir(\n      (tmpDir) => {\n        const messageFileName = path.join(tmpDir.path(), 'messages.json');\n        //This is missing the 'message' key\n        fs.writeFileSync(\n          messageFileName,\n          `{\"extensionName\": {\n              \"description\": \"example extension\"\n              }\n          }`\n        );\n\n        const basicLocalizedManifest = {\n          name: '__MSG_extensionName__',\n          version: '0.0.1',\n        };\n        return getDefaultLocalizedName({\n          messageFile: messageFileName,\n          manifestData: basicLocalizedManifest,\n        })\n          .then(makeSureItFails())\n          .catch((error) => {\n            assert.instanceOf(error, UsageError);\n            assert.match(\n              error.message,\n              /The locale file .*messages\\.json is missing key: extensionName/);\n          });\n      }\n    );\n  });\n\n  it('throws an error if the locale file does not exist', () => {\n    return getDefaultLocalizedName({\n      messageFile: '/path/to/non-existent-dir/messages.json',\n      manifestData: manifestWithoutApps,\n    })\n      .then(makeSureItFails())\n      .catch((error) => {\n        log.info(error);\n        assert.instanceOf(error, UsageError);\n        assert.match(\n          error.message,\n          /Error: ENOENT: no such file or directory, open .*messages.json/);\n        assert.match(error.message, /^Error reading messages.json/);\n        assert.include(error.message,\n                       '/path/to/non-existent-dir/messages.json');\n      });\n  });\n\n  it('can build an extension without an ID', () => {\n    return withTempDir(\n      (tmpDir) => {\n        // Make sure a manifest without an ID doesn't throw an error.\n        return build({\n          sourceDir: fixturePath('minimal-web-ext'),\n          artifactsDir: tmpDir.path(),\n        }, {manifestData: manifestWithoutApps});\n      }\n    );\n  });\n\n  it('prepares the artifacts dir', () => withTempDir(\n    (tmpDir) => {\n      const artifactsDir = path.join(tmpDir.path(), 'artifacts');\n      return build({\n        sourceDir: fixturePath('minimal-web-ext'),\n        artifactsDir,\n      })\n        .then(() => fs.stat(artifactsDir))\n        .then((stats) => {\n          assert.equal(stats.isDirectory(), true);\n        });\n    }\n  ));\n\n  it('lets you specify a manifest', () => withTempDir(\n    (tmpDir) =>\n      build({\n        sourceDir: fixturePath('minimal-web-ext'),\n        artifactsDir: tmpDir.path(),\n      }, {\n        manifestData: basicManifest,\n      })\n        .then((buildResult) => {\n          assert.match(buildResult.extensionPath,\n                       /the_extension-0\\.0\\.1\\.zip$/);\n          return buildResult.extensionPath;\n        })\n  ));\n\n  it('asks FileFilter what files to include in the ZIP', () => {\n    const zipFile = new ZipFile();\n    const fileFilter = new FileFilter({\n      sourceDir: '.',\n      baseIgnoredPatterns: ['**/background-script.js'],\n    });\n\n    return withTempDir(\n      (tmpDir) =>\n        build({\n          sourceDir: fixturePath('minimal-web-ext'),\n          artifactsDir: tmpDir.path(),\n        }, {fileFilter})\n          .then((buildResult) => zipFile.open(buildResult.extensionPath))\n          .then(() => zipFile.extractFilenames())\n          .then((fileNames) => {\n            assert.notInclude(fileNames, 'background-script.js');\n            return zipFile.close();\n          })\n    );\n  });\n\n  it('lets you rebuild when files change', () => withTempDir(\n    (tmpDir) => {\n      const sourceDir = fixturePath('minimal-web-ext');\n      const artifactsDir = tmpDir.path();\n      const fileFilter = new FileFilter({sourceDir, artifactsDir});\n      sinon.spy(fileFilter, 'wantFile');\n      const onSourceChange = sinon.spy(() => {});\n      return build({\n        sourceDir, artifactsDir, asNeeded: true,\n      }, {\n        manifestData: basicManifest, onSourceChange, fileFilter,\n      })\n        .then((buildResult) => {\n          // Make sure we still have a build result.\n          assert.match(buildResult.extensionPath, /\\.zip$/);\n          return buildResult;\n        })\n        .then((buildResult) => {\n          const args = onSourceChange.firstCall.args[0];\n\n          sinon.assert.called(onSourceChange);\n          sinon.assert.calledWithMatch(onSourceChange, {\n            artifactsDir,\n            sourceDir,\n          });\n\n          assert.typeOf(args.onChange, 'function');\n\n          // Make sure it uses the file filter.\n          assert.typeOf(args.shouldWatchFile, 'function');\n          args.shouldWatchFile('/some/path');\n          sinon.assert.called(fileFilter.wantFile);\n\n          // Remove the built extension.\n          return fs.unlink(buildResult.extensionPath)\n            // Execute the onChange handler to make sure it gets built\n            // again. This simulates what happens when the file watcher\n            // executes the callback.\n            .then(() => args.onChange());\n        })\n        .then((buildResult) => {\n          assert.match(buildResult.extensionPath, /\\.zip$/);\n          return fs.stat(buildResult.extensionPath);\n        })\n        .then((stat) => {\n          assert.equal(stat.isFile(), true);\n        });\n    }\n  ));\n\n  it('throws errors when rebuilding in source watcher', () => withTempDir(\n    (tmpDir) => {\n      var packageResult = Promise.resolve({});\n      const packageCreator = sinon.spy(() => packageResult);\n      const onSourceChange = sinon.spy(() => {});\n      return build({\n        sourceDir: fixturePath('minimal-web-ext'),\n        artifactsDir: tmpDir.path(),\n        asNeeded: true,\n      }, {\n        manifestData: basicManifest, onSourceChange, packageCreator,\n      })\n        .then(() => {\n          sinon.assert.called(onSourceChange);\n          sinon.assert.calledOnce(packageCreator);\n          const {onChange} = onSourceChange.firstCall.args[0];\n          packageResult = Promise.reject(new Error(\n            'Simulate an error on the second call to packageCreator()'));\n          // Invoke the stub packageCreator() again which should throw an error\n          return onChange();\n        })\n        .then(makeSureItFails())\n        .catch((error) => {\n          assert.include(\n            error.message,\n            'Simulate an error on the second call to packageCreator()');\n        });\n    }\n  ));\n\n  it('raises an UsageError if zip file exists', () => {\n    return withTempDir(\n      (tmpDir) => {\n        const testFileName = path.join(tmpDir.path(),\n                                       'minimal_extension-1.0.zip');\n        return fs.writeFile(testFileName, 'test')\n          .then(() => build(\n            {\n              sourceDir: fixturePath('minimal-web-ext'),\n              artifactsDir: tmpDir.path(),\n            }))\n          .catch ((error) => {\n            assert.instanceOf(error, UsageError);\n            assert.match(error.message,\n                         /Extension exists at the destination path/);\n          });\n      });\n  });\n\n  it('overwrites zip file if it exists', () => {\n    return withTempDir(\n      (tmpDir) => {\n        const testFileName = path.join(tmpDir.path(),\n                                       'minimal_extension-1.0.zip');\n        return fs.writeFile(testFileName, 'test')\n          .then(() => build(\n            {\n              sourceDir: fixturePath('minimal-web-ext'),\n              artifactsDir: tmpDir.path(),\n              overwriteDest: true,\n            }))\n          .then((buildResult) => {\n            assert.match(buildResult.extensionPath,\n                         /minimal_extension-1\\.0\\.zip$/);\n          });\n      });\n  });\n\n  it('zips a package and includes a file from a negated filter', () => {\n    const zipFile = new ZipFile();\n\n    return withTempDir(\n      (tmpDir) =>\n        build({\n          sourceDir: fixturePath('minimal-web-ext'),\n          artifactsDir: tmpDir.path(),\n          ignoreFiles: [\n            '!node_modules',\n            '!node_modules/pkg1',\n            '!node_modules/pkg1/**',\n          ],\n        })\n          .then((buildResult) => {\n            assert.match(buildResult.extensionPath,\n                         /minimal_extension-1\\.0\\.zip$/);\n            return buildResult.extensionPath;\n          })\n          .then((extensionPath) => zipFile.open(extensionPath))\n          .then(() => zipFile.extractFilenames())\n          .then((fileNames) => {\n            fileNames.sort();\n            assert.deepEqual(fileNames, [\n              'background-script.js', 'manifest.json',\n              'node_modules/',\n              'node_modules/pkg1/',\n              'node_modules/pkg1/file1.txt',\n            ]);\n            return zipFile.close();\n          })\n    );\n  });\n\n  describe('safeFileName', () => {\n\n    it('makes names safe for writing to a file system', () => {\n      assert.equal(safeFileName('Bob Loblaw\\'s 2005 law-blog.net'),\n                   'bob_loblaw_s_2005_law-blog.net');\n    });\n\n  });\n\n  describe('defaultPackageCreator', () => {\n    it('should reject on Unexpected errors', () => {\n      return withTempDir(\n        (tmpDir) => {\n          const fakeEventToPromise = sinon.spy(async (stream) => {\n            await defaultEventToPromise(stream, 'close');\n            // Remove contents of tmpDir before removal of directory.\n            const files = await fs.readdir(tmpDir.path());\n            for (const file of files) {\n              await fs.unlink(path.join(tmpDir.path(), file));\n            }\n            return Promise.reject(new Error('Unexpected error'));\n          });\n          const sourceDir = fixturePath('minimal-web-ext');\n          const artifactsDir = tmpDir.path();\n          const fileFilter = new FileFilter({sourceDir, artifactsDir});\n          const params = {\n            manifestData: basicManifest,\n            sourceDir,\n            fileFilter,\n            artifactsDir,\n            overwriteDest: false,\n            showReadyMessage: false,\n          };\n          const options = {\n            eventToPromise: fakeEventToPromise,\n          };\n\n          return defaultPackageCreator(params, options)\n            .then(makeSureItFails())\n            .catch ((error) => {\n              assert.match(error.message, /Unexpected error/);\n            });\n        });\n    });\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-cmd/test.build.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 126\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/promise.js\n// module id = 127\n// module chunks = 0","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/promise.js\n// module id = 128\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 129\n// module chunks = 0","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 130\n// module chunks = 0","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 131\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 132\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 133\n// module chunks = 0","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 134\n// module chunks = 0","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 135\n// module chunks = 0","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 136\n// module chunks = 0","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 137\n// module chunks = 0","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.promise.js\n// module id = 138\n// module chunks = 0","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-instance.js\n// module id = 139\n// module chunks = 0","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_for-of.js\n// module id = 140\n// module chunks = 0","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_invoke.js\n// module id = 141\n// module chunks = 0","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_microtask.js\n// module id = 142\n// module chunks = 0","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_user-agent.js\n// module id = 143\n// module chunks = 0","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine-all.js\n// module id = 144\n// module chunks = 0","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-species.js\n// module id = 145\n// module chunks = 0","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.promise.finally.js\n// module id = 146\n// module chunks = 0","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.promise.try.js\n// module id = 147\n// module chunks = 0","module.exports = require(\"watchpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"watchpack\"\n// module id = 148\n// module chunks = 0","module.exports = require(\"debounce\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debounce\"\n// module id = 149\n// module chunks = 0","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 150\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = 151\n// module chunks = 0","/* @flow */\nimport zipDirModule from 'zip-dir';\nimport promisify from 'es6-promisify';\n\nexport const zipDir = promisify(zipDirModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/zip-dir.js","module.exports = require(\"zip-dir\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"zip-dir\"\n// module id = 153\n// module chunks = 0","module.exports = require(\"strip-json-comments\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"strip-json-comments\"\n// module id = 154\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/is-iterable.js\n// module id = 155\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/is-iterable.js\n// module id = 156\n// module chunks = 0","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.is-iterable.js\n// module id = 157\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = 158\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = 159\n// module chunks = 0","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = 160\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol/iterator.js\n// module id = 161\n// module chunks = 0","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/iterator.js\n// module id = 162\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol.js\n// module id = 163\n// module chunks = 0","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/index.js\n// module id = 164\n// module chunks = 0","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.symbol.js\n// module id = 165\n// module chunks = 0","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 166\n// module chunks = 0","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-keys.js\n// module id = 167\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 168\n// module chunks = 0","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn-ext.js\n// module id = 169\n// module chunks = 0","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 170\n// module chunks = 0","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.observable.js\n// module id = 171\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/set-prototype-of.js\n// module id = 172\n// module chunks = 0","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/set-prototype-of.js\n// module id = 173\n// module chunks = 0","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js\n// module id = 174\n// module chunks = 0","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-proto.js\n// module id = 175\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/create.js\n// module id = 176\n// module chunks = 0","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/create.js\n// module id = 177\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.create.js\n// module id = 178\n// module chunks = 0","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 179\n// module chunks = 0","module.exports = require(\"multimatch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multimatch\"\n// module id = 180\n// module chunks = 0","module.exports = require(\"tmp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tmp\"\n// module id = 181\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/assign.js\n// module id = 182\n// module chunks = 0","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/assign.js\n// module id = 183\n// module chunks = 0","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.assign.js\n// module id = 184\n// module chunks = 0","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-assign.js\n// module id = 185\n// module chunks = 0","module.exports = require(\"yauzl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yauzl\"\n// module id = 186\n// module chunks = 0","module.exports = require(\"fx-runner\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fx-runner\"\n// module id = 187\n// module chunks = 0","'use strict';\n\n// See https://github.com/jshint/jshint/issues/1747 for context\n/* global -Promise */\nvar Promise = require('es6-promise').Promise;\nvar FirefoxClient = require('@cliqz-oss/firefox-client');\n\nmodule.exports = connect;\n\nfunction connect(port) {\n  return new Promise(function(resolve, reject) {\n\n    var client = new FirefoxClient();\n    client.connect(port, function(err) {\n      if (err) {\n        reject(err);\n      }\n      resolve(client);\n    });\n\n    client.on('error', reject);\n    client.on('timeout', reject);\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/node-firefox-connect/index.js\n// module id = 188\n// module chunks = 0","module.exports = require(\"es6-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promise\"\n// module id = 189\n// module chunks = 0","module.exports = require(\"./lib/browser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/index.js\n// module id = 190\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Client = require(\"./client\"),\n    Tab = require(\"./tab\"),\n    Webapps = require(\"./webapps\"),\n    Device = require(\"./device\"),\n    SimulatorApps = require(\"./simulator\");\n\nconst DEFAULT_PORT = 6000;\nconst DEFAULT_HOST = \"localhost\";\n\nmodule.exports = FirefoxClient;\n\nfunction FirefoxClient(options) {\n  var client = new Client(options);\n  var actor = 'root';\n\n  client.on(\"error\", this.onError.bind(this));\n  client.on(\"end\", this.onEnd.bind(this));\n  client.on(\"timeout\", this.onTimeout.bind(this));\n\n  this.initialize(client, actor);\n}\n\nFirefoxClient.prototype = extend(ClientMethods, {\n  connect: function(port, host, cb) {\n    if (typeof port == \"function\") {\n      // (cb)\n      cb = port;\n      port = DEFAULT_PORT;\n      host = DEFAULT_HOST;\n\n    }\n    if (typeof host == \"function\") {\n      // (port, cb)\n      cb = host;\n      host = DEFAULT_HOST;\n    }\n    // (port, host, cb)\n\n    this.client.connect(port, host, cb);\n\n    this.client.expectReply(this.actor, function(packet) {\n      // root message\n    });\n  },\n\n  disconnect: function() {\n    this.client.disconnect();\n  },\n\n  onError: function(error) {\n    this.emit(\"error\", error);\n  },\n\n  onEnd: function() {\n    this.emit(\"end\");\n  },\n\n  onTimeout: function() {\n    this.emit(\"timeout\");\n  },\n\n  selectedTab: function(cb) {\n    this.request(\"listTabs\", function(resp) {\n      var tab = resp.tabs[resp.selected];\n      return new Tab(this.client, tab);\n    }.bind(this), cb);\n  },\n\n  listTabs: function(cb) {\n    this.request(\"listTabs\", function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n\n      if (resp.simulatorWebappsActor) {\n        // the server is the Firefox OS Simulator, return apps as \"tabs\"\n        var apps = new SimulatorApps(this.client, resp.simulatorWebappsActor);\n        apps.listApps(cb);\n      }\n      else {\n        var tabs = resp.tabs.map(function(tab) {\n          return new Tab(this.client, tab);\n        }.bind(this));\n        cb(null, tabs);\n      }\n    }.bind(this));\n  },\n\n  getWebapps: function(cb) {\n    this.request(\"listTabs\", (function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n      var webapps = new Webapps(this.client, resp);\n      cb(null, webapps);\n    }).bind(this));\n  },\n\n  getDevice: function(cb) {\n    this.request(\"listTabs\", (function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n      var device = new Device(this.client, resp);\n      cb(null, device);\n    }).bind(this));\n  },\n\n  getRoot: function(cb) {\n    this.request(\"listTabs\", (function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n      if (!resp.consoleActor) {\n        return cb(\"No root actor being available.\");\n      }\n      var root = new Tab(this.client, resp);\n      cb(null, root);\n    }).bind(this));\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/browser.js\n// module id = 191\n// module chunks = 0","var net = require(\"net\"),\n    events = require(\"events\"),\n    extend = require(\"./extend\");\n\nvar colors = require(\"colors\");\n\nmodule.exports = Client;\n\n// this is very unfortunate! and temporary. we can't\n// rely on 'type' property to signify an event, and we\n// need to write clients for each actor to handle differences\n// in actor protocols\nvar unsolicitedEvents = {\n  \"tabNavigated\": \"tabNavigated\",\n  \"styleApplied\": \"styleApplied\",\n  \"propertyChange\": \"propertyChange\",\n  \"networkEventUpdate\": \"networkEventUpdate\",\n  \"networkEvent\": \"networkEvent\",\n  \"propertyChange\": \"propertyChange\",\n  \"newMutations\": \"newMutations\",\n  \"appOpen\": \"appOpen\",\n  \"appClose\": \"appClose\",\n  \"appInstall\": \"appInstall\",\n  \"appUninstall\": \"appUninstall\",\n  \"frameUpdate\": \"frameUpdate\",\n  \"tabListChanged\": \"tabListChanged\"\n};\n\n/**\n * a Client object handles connecting with a Firefox remote debugging\n * server instance (e.g. a Firefox instance), plus sending and receiving\n * packets on that conection using the Firefox remote debugging protocol.\n *\n * Important methods:\n * connect - Create the connection to the server.\n * makeRequest - Make a request to the server with a JSON message,\n *   and a callback to call with the response.\n *\n * Important events:\n * 'message' - An unsolicited (e.g. not a response to a prior request)\n *    packet has been received. These packets usually describe events.\n */\nfunction Client(options) {\n  this.options = options || {};\n\n  this.incoming = new Buffer(\"\");\n\n  this._pendingRequests = [];\n  this._activeRequests = {};\n}\n\nClient.prototype = extend(events.EventEmitter.prototype, {\n  connect: function(port, host, cb) {\n    this.client = net.createConnection({\n      port: port,\n      host: host\n    });\n\n    this.client.on(\"connect\", cb);\n    this.client.on(\"data\", this.onData.bind(this));\n    this.client.on(\"error\", this.onError.bind(this));\n    this.client.on(\"end\", this.onEnd.bind(this));\n    this.client.on(\"timeout\", this.onTimeout.bind(this));\n  },\n\n  disconnect: function() {\n    if (this.client) {\n      this.client.end();\n    }\n  },\n\n  /**\n   * Set a request to be sent to an actor on the server. If the actor\n   * is already handling a request, queue this request until the actor\n   * has responded to the previous request.\n   *\n   * @param {object} request\n   *        Message to be JSON-ified and sent to server.\n   * @param {function} callback\n   *        Function that's called with the response from the server.\n   */\n  makeRequest: function(request, callback) {\n    this.log(\"request: \" + JSON.stringify(request).green);\n\n    if (!request.to) {\n      var type = request.type || \"\";\n      throw new Error(type + \" request packet has no destination.\");\n    }\n    this._pendingRequests.push({ to: request.to,\n                                 message: request,\n                                 callback: callback });\n    this._flushRequests();\n  },\n\n  /**\n   * Activate (send) any pending requests to actors that don't have an\n   * active request.\n   */\n  _flushRequests: function() {\n    this._pendingRequests = this._pendingRequests.filter(function(request) {\n      // only one active request per actor at a time\n      if (this._activeRequests[request.to]) {\n        return true;\n      }\n\n      // no active requests for this actor, so activate this one\n      this.sendMessage(request.message);\n      this.expectReply(request.to, request.callback);\n\n      // remove from pending requests\n      return false;\n    }.bind(this));\n  },\n\n  /**\n   * Send a JSON message over the connection to the server.\n   */\n  sendMessage: function(message) {\n    if (!message.to) {\n      throw new Error(\"No actor specified in request\");\n    }\n    if (!this.client) {\n      throw new Error(\"Not connected, connect() before sending requests\");\n    }\n    var str = JSON.stringify(message);\n\n    // message is preceded by byteLength(message):\n    str = (new Buffer(str).length) + \":\" + str;\n\n    this.client.write(str);\n  },\n\n  /**\n   * Arrange to hand the next reply from |actor| to |handler|.\n   */\n  expectReply: function(actor, handler) {\n    if (this._activeRequests[actor]) {\n      throw Error(\"clashing handlers for next reply from \" + uneval(actor));\n    }\n    this._activeRequests[actor] = handler;\n  },\n\n  /**\n   * Handler for a new message coming in. It's either an unsolicited event\n   * from the server, or a response to a previous request from the client.\n   */\n  handleMessage: function(message) {\n    if (!message.from) {\n      if (message.error) {\n        throw new Error(message.message);\n      }\n      throw new Error(\"Server didn't specify an actor: \" + JSON.stringify(message));\n    }\n\n    if (!(message.type in unsolicitedEvents)\n        && this._activeRequests[message.from]) {\n      this.log(\"response: \" + JSON.stringify(message).yellow);\n\n      var callback = this._activeRequests[message.from];\n      delete this._activeRequests[message.from];\n\n      callback(message);\n\n      this._flushRequests();\n    }\n    else if (message.type) {\n      // this is an unsolicited event from the server\n      this.log(\"unsolicited event: \".grey + JSON.stringify(message).grey);\n\n      this.emit('message', message);\n      return;\n    }\n    else {\n      throw new Error(\"Unexpected packet from actor \" +  message.from\n      +  JSON.stringify(message));\n    }\n  },\n\n  /**\n   * Called when a new data chunk is received on the connection.\n   * Parse data into message(s) and call message handler for any full\n   * messages that are read in.\n   */\n  onData: function(data) {\n    this.incoming = Buffer.concat([this.incoming, data]);\n\n    while(this.readMessage()) {};\n  },\n\n  /**\n   * Parse out and process the next message from the data read from\n   * the connection. Returns true if a full meassage was parsed, false\n   * otherwise.\n   */\n  readMessage: function() {\n    var sep = this.incoming.toString().indexOf(':');\n    if (sep < 0) {\n      return false;\n    }\n\n    // beginning of a message is preceded by byteLength(message) + \":\"\n    var count = parseInt(this.incoming.slice(0, sep));\n\n    if (this.incoming.length - (sep + 1) < count) {\n      this.log(\"no complete response yet\".grey);\n      return false;\n    }\n    this.incoming = this.incoming.slice(sep + 1);\n\n    var packet = this.incoming.slice(0, count);\n\n    this.incoming = this.incoming.slice(count);\n\n    var message;\n    try {\n      message = JSON.parse(packet.toString());\n    } catch(e) {\n      throw new Error(\"Couldn't parse packet from server as JSON \" + e\n        + \", message:\\n\" + packet);\n    }\n    this.handleMessage(message);\n\n    return true;\n  },\n\n  onError: function(error) {\n    var code = error.code ? error.code : error;\n    this.log(\"connection error: \".red + code.red);\n    this.emit(\"error\", error);\n  },\n\n  onEnd: function() {\n    this.log(\"connection closed by server\".red);\n    this.emit(\"end\");\n  },\n\n  onTimeout: function() {\n    this.log(\"connection timeout\".red);\n    this.emit(\"timeout\");\n  },\n\n  log: function(str) {\n    if (this.options.log) {\n      console.log(str);\n    }\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/client.js\n// module id = 192\n// module chunks = 0","module.exports = require(\"colors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"colors\"\n// module id = 193\n// module chunks = 0","var select = require(\"js-select\"),\n    extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    JSObject = require(\"./jsobject\");\n\nmodule.exports = Console;\n\nfunction Console(client, actor) {\n  this.initialize(client, actor);\n\n  this.on(\"consoleAPICall\", this.onConsoleAPI.bind(this));\n  this.on(\"pageError\", this.onPageError.bind(this));\n}\n\nConsole.prototype = extend(ClientMethods, {\n  types: [\"PageError\", \"ConsoleAPI\"],\n\n  /**\n   * Response object:\n   *   -empty-\n   */\n  startListening: function(cb) {\n    this.request('startListeners', { listeners: this.types }, cb);\n  },\n\n  /**\n   * Response object:\n   *   -empty-\n   */\n  stopListening: function(cb) {\n    this.request('stopListeners', { listeners: this.types }, cb);\n  },\n\n  /**\n   * Event object:\n   *   level - \"log\", etc.\n   *   filename - file with call\n   *   lineNumber - line number of call\n   *   functionName - function log called from\n   *   timeStamp - ms timestamp of call\n   *   arguments - array of the arguments to log call\n   *   private -\n   */\n  onConsoleAPI: function(event) {\n    var message = this.transformConsoleCall(event.message);\n\n    this.emit(\"console-api-call\", message);\n  },\n\n  /**\n   * Event object:\n   *   errorMessage - string error message\n   *   sourceName - file error\n   *   lineText\n   *   lineNumber - line number of error\n   *   columnNumber - column number of error\n   *   category - usually \"content javascript\",\n   *   timeStamp - time in ms of error occurance\n   *   warning - whether it's a warning\n   *   error - whether it's an error\n   *   exception - whether it's an exception\n   *   strict -\n   *   private -\n   */\n  onPageError: function(event) {\n    this.emit(\"page-error\", event.pageError);\n  },\n\n  /**\n   * Response object: array of page error or console call objects.\n   */\n  getCachedLogs: function(cb) {\n    var message = {\n      messageTypes: this.types\n    };\n    this.request('getCachedMessages', message, function(resp) {\n      select(resp, \".messages > *\").update(this.transformConsoleCall.bind(this));\n      return resp.messages;\n    }.bind(this), cb);\n  },\n\n  /**\n   * Response object:\n   *   -empty-\n   */\n  clearCachedLogs: function(cb) {\n    this.request('clearMessagesCache', cb);\n  },\n\n  /**\n   * Response object:\n   *   input - original input\n   *   result - result of the evaluation, a value or JSObject\n   *   timestamp - timestamp in ms of the evaluation\n   *   exception - any exception as a result of the evaluation\n   */\n  evaluateJS: function(text, cb) {\n    this.request('evaluateJS', { text: text }, function(resp) {\n      return select(resp, \".result, .exception\")\n             .update(this.createJSObject.bind(this));\n    }.bind(this), cb)\n  },\n\n  transformConsoleCall: function(message) {\n    return select(message, \".arguments > *\").update(this.createJSObject.bind(this));\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/console.js\n// module id = 194\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Memory;\n\nfunction Memory(client, actor) {\n  this.initialize(client, actor);\n}\n\nMemory.prototype = extend(ClientMethods, {\n  measure: function(cb) {\n    this.request('measure', function (err, resp) {\n      cb(err, resp);\n    });\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/memory.js\n// module id = 195\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Node = require(\"./domnode\");\n\nmodule.exports = DOM;\n\nfunction DOM(client, actor) {\n  this.initialize(client, actor);\n  this.walker = null;\n}\n\nDOM.prototype = extend(ClientMethods, {\n  document: function(cb) {\n    this.walkerRequest(\"document\", function(err, resp) {\n      if (err) return cb(err);\n\n      var node = new Node(this.client, this.walker, resp.node);\n      cb(null, node);\n    }.bind(this))\n  },\n\n  documentElement: function(cb) {\n    this.walkerRequest(\"documentElement\", function(err, resp) {\n      var node = new Node(this.client, this.walker, resp.node);\n      cb(err, node);\n    }.bind(this))\n  },\n\n  querySelector: function(selector, cb) {\n    this.document(function(err, node) {\n      if (err) return cb(err);\n\n      node.querySelector(selector, cb);\n    })\n  },\n\n  querySelectorAll: function(selector, cb) {\n    this.document(function(err, node) {\n      if (err) return cb(err);\n\n      node.querySelectorAll(selector, cb);\n    })\n  },\n\n  getComputedStyle: function(node, cb) {\n    this.styleRequest(\"getComputed\", { node: node.actor },\n                      this.pluck('computed'), cb);\n  },\n\n  getUsedFontFaces: function(node, options, cb) {\n    var message = {\n      node: node.actor,\n      includePreviews: options.includePreviews,\n      previewText: options.previewText,\n      previewFontSize: options.previewFontSize\n    };\n\n    this.styleRequest(\"getUsedFontFaces\", message,\n                      this.pluck('fontFaces'), cb);\n  },\n\n  getFontPreview: function(node, font, cb) {\n    this.styleRequest(\"getFontPreview\", { node: node.actor, font: font }, cb);\n  },\n\n  walkerRequest: function(type, message, cb) {\n    this.getWalker(function(err, walker) {\n      walker.request(type, message, cb);\n    });\n  },\n\n  getWalker: function(cb) {\n    if (this.walker) {\n      return cb(null, this.walker);\n    }\n    this.request('getWalker', function(err, resp) {\n      this.walker = new Walker(this.client, resp.walker);\n      cb(err, this.walker);\n    }.bind(this))\n  },\n\n  styleRequest: function(type, message, transform, cb) {\n    this.getStyle(function(err, style) {\n      if (err) throw err;\n\n      style.request(type, message, transform, cb);\n    })\n  },\n\n  getStyle: function(cb) {\n    if (this.style) {\n      return cb(null, this.style);\n    }\n    this.request('getPageStyle', function(err, resp) {\n      this.style = new Style(this.client, resp.pageStyle);\n      cb(err, this.style);\n    }.bind(this))\n  }\n})\n\nfunction Walker(client, walker) {\n  this.initialize(client, walker.actor);\n\n  this.root = new Node(client, this, walker.root);\n}\n\nWalker.prototype = extend(ClientMethods, {});\n\nfunction Style(client, style) {\n  this.initialize(client, style.actor);\n}\n\nStyle.prototype = extend(ClientMethods, {});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/dom.js\n// module id = 196\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Node;\n\nfunction Node(client, walker, node) {\n  this.initialize(client, node.actor);\n  this.walker = walker;\n\n  this.getNode = this.getNode.bind(this);\n  this.getNodeArray = this.getNodeArray.bind(this);\n  this.getNodeList = this.getNodeList.bind(this);\n\n  walker.on('newMutations', function(event) {\n    //console.log(\"on new mutations! \", JSON.stringify(event));\n  });\n\n  ['nodeType', 'nodeName', 'namespaceURI', 'attrs']\n  .forEach(function(attr) {\n    this[attr] = node[attr];\n  }.bind(this));\n}\n\nNode.prototype = extend(ClientMethods, {\n  getAttribute: function(name) {\n    for (var i in this.attrs) {\n      var attr = this.attrs[i];\n      if (attr.name == name) {\n        return attr.value;\n      }\n    }\n  },\n\n  setAttribute: function(name, value, cb) {\n    var mods = [{\n      attributeName: name,\n      newValue: value\n    }];\n    this.request('modifyAttributes', { modifications: mods }, cb);\n  },\n\n  parentNode: function(cb) {\n    this.parents(function(err, nodes) {\n      if (err) {\n        return cb(err);\n      }\n      var node = null;\n      if (nodes.length) {\n        node = nodes[0];\n      }\n      cb(null, node);\n    })\n  },\n\n  parents: function(cb) {\n    this.nodeRequest('parents', this.getNodeArray, cb);\n  },\n\n  children: function(cb) {\n    this.nodeRequest('children', this.getNodeArray, cb);\n  },\n\n  siblings: function(cb) {\n    this.nodeRequest('siblings', this.getNodeArray, cb);\n  },\n\n  nextSibling: function(cb) {\n    this.nodeRequest('nextSibling', this.getNode, cb);\n  },\n\n  previousSibling: function(cb) {\n    this.nodeRequest('previousSibling', this.getNode, cb);\n  },\n\n  querySelector: function(selector, cb) {\n    this.nodeRequest('querySelector', { selector: selector },\n                     this.getNode, cb);\n  },\n\n  querySelectorAll: function(selector, cb) {\n    this.nodeRequest('querySelectorAll', { selector: selector },\n                     this.getNodeList, cb);\n  },\n\n  getUniqueSelector: function(cb) {\n    this.request('getUniqueSelector', cb);\n  },\n\n  innerHTML: function(cb) {\n    this.nodeRequest('innerHTML', function(resp) {\n      return resp.value;\n    }, cb)\n  },\n\n  outerHTML: function(cb) {\n    this.nodeRequest('outerHTML', function(resp) {\n      return resp.value;\n    }, cb)\n  },\n\n  remove: function(cb) {\n    this.nodeRequest('removeNode', function(resp) {\n      return new Node(this.client, this.walker, resp.nextSibling);\n    }.bind(this), cb);\n  },\n\n  highlight: function(cb) {\n    this.nodeRequest('highlight', cb);\n  },\n\n  release: function(cb) {\n    this.nodeRequest('releaseNode', cb);\n  },\n\n  getNode: function(resp) {\n    if (resp.node) {\n      return new Node(this.client, this.walker, resp.node);\n    }\n    return null;\n  },\n\n  getNodeArray: function(resp) {\n    return resp.nodes.map(function(form) {\n      return new Node(this.client, this.walker, form);\n    }.bind(this));\n  },\n\n  getNodeList: function(resp) {\n    return new NodeList(this.client, this.walker, resp.list);\n  },\n\n  nodeRequest: function(type, message, transform, cb) {\n    if (!cb) {\n      cb = transform;\n      transform = message;\n      message = {};\n    }\n    message.node = this.actor;\n\n    this.walker.request(type, message, transform, cb);\n  }\n});\n\nfunction NodeList(client, walker, list) {\n  this.client = client;\n  this.walker = walker;\n  this.actor = list.actor;\n\n  this.length = list.length;\n}\n\nNodeList.prototype = extend(ClientMethods, {\n  items: function(start, end, cb) {\n    if (typeof start == \"function\") {\n      cb = start;\n      start = 0;\n      end = this.length;\n    }\n    else if (typeof end == \"function\") {\n      cb = end;\n      end = this.length;\n    }\n    this.request('items', { start: start, end: end },\n      this.getNodeArray.bind(this), cb);\n  },\n\n  // TODO: add this function to ClientMethods\n  getNodeArray: function(resp) {\n    return resp.nodes.map(function(form) {\n      return new Node(this.client, this.walker, form);\n    }.bind(this));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/domnode.js\n// module id = 197\n// module chunks = 0","var extend = require(\"./extend\");\nvar ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Network;\n\nfunction Network(client, actor) {\n  this.initialize(client, actor);\n\n  this.on(\"networkEvent\", this.onNetworkEvent.bind(this));\n}\n\nNetwork.prototype = extend(ClientMethods, {\n  types: [\"NetworkActivity\"],\n\n  startLogging: function(cb) {\n    this.request('startListeners', { listeners: this.types }, cb);\n  },\n\n  stopLogging: function(cb) {\n    this.request('stopListeners', { listeners: this.types }, cb);\n  },\n\n  onNetworkEvent: function(event) {\n    var networkEvent = new NetworkEvent(this.client, event.eventActor);\n\n    this.emit(\"network-event\", networkEvent);\n  },\n\n  sendHTTPRequest: function(request, cb) {\n    this.request('sendHTTPRequest', { request: request }, function(resp) {\n      return new NetworkEvent(this.client, resp.eventActor);\n    }.bind(this), cb);\n  }\n})\n\nfunction NetworkEvent(client, event) {\n  this.initialize(client, event.actor);\n  this.event = event;\n\n  this.on(\"networkEventUpdate\", this.onUpdate.bind(this));\n}\n\nNetworkEvent.prototype = extend(ClientMethods, {\n  get url() {\n   return this.event.url;\n  },\n\n  get method() {\n    return this.event.method;\n  },\n\n  get isXHR() {\n    return this.event.isXHR;\n  },\n\n  getRequestHeaders: function(cb) {\n    this.request('getRequestHeaders', cb);\n  },\n\n  getRequestCookies: function(cb) {\n    this.request('getRequestCookies', this.pluck('cookies'), cb);\n  },\n\n  getRequestPostData: function(cb) {\n    this.request('getRequestPostData', cb);\n  },\n\n  getResponseHeaders: function(cb) {\n    this.request('getResponseHeaders', cb);\n  },\n\n  getResponseCookies: function(cb) {\n    this.request('getResponseCookies', this.pluck('cookies'), cb);\n  },\n\n  getResponseContent: function(cb) {\n    this.request('getResponseContent', cb);\n  },\n\n  getEventTimings: function(cb) {\n    this.request('getEventTimings', cb);\n  },\n\n  onUpdate: function(event) {\n    var types = {\n      \"requestHeaders\": \"request-headers\",\n      \"requestCookies\": \"request-cookies\",\n      \"requestPostData\": \"request-postdata\",\n      \"responseStart\": \"response-start\",\n      \"responseHeaders\": \"response-headers\",\n      \"responseCookies\": \"response-cookies\",\n      \"responseContent\": \"response-content\",\n      \"eventTimings\": \"event-timings\"\n    }\n\n    var type = types[event.updateType];\n    delete event.updateType;\n\n    this.emit(type, event);\n  }\n})\n\n\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/network.js\n// module id = 198\n// module chunks = 0","var extend = require(\"./extend\");\nvar ClientMethods = require(\"./client-methods\");\n\nmodule.exports = StyleSheets;\n\nfunction StyleSheets(client, actor) {\n  this.initialize(client, actor);\n}\n\nStyleSheets.prototype = extend(ClientMethods, {\n  getStyleSheets: function(cb) {\n    this.request('getStyleSheets', function(resp) {\n      return resp.styleSheets.map(function(sheet) {\n        return new StyleSheet(this.client, sheet);\n      }.bind(this));\n    }.bind(this), cb);\n  },\n\n  addStyleSheet: function(text, cb) {\n    this.request('addStyleSheet', { text: text }, function(resp) {\n      return new StyleSheet(this.client, resp.styleSheet);\n    }.bind(this), cb);\n  }\n})\n\nfunction StyleSheet(client, sheet) {\n  this.initialize(client, sheet.actor);\n  this.sheet = sheet;\n\n  this.on(\"propertyChange\", this.onPropertyChange.bind(this));\n}\n\nStyleSheet.prototype = extend(ClientMethods, {\n  get href() {\n    return this.sheet.href;\n  },\n\n  get disabled() {\n    return this.sheet.disabled;\n  },\n\n  get ruleCount() {\n    return this.sheet.ruleCount;\n  },\n\n  onPropertyChange: function(event) {\n    this.sheet[event.property] = event.value;\n    this.emit(event.property + \"-changed\", event.value);\n  },\n\n  toggleDisabled: function(cb) {\n    this.request('toggleDisabled', function(err, resp) {\n      if (err) return cb(err);\n\n      this.sheet.disabled = resp.disabled;\n      cb(null, resp.disabled);\n    }.bind(this));\n  },\n\n  getOriginalSources: function(cb) {\n    this.request('getOriginalSources', function(resp) {\n      if (resp.originalSources === null) {\n        return [];\n      }\n      return resp.originalSources.map(function(form) {\n        return new OriginalSource(this.client, form);\n      }.bind(this));\n    }.bind(this), cb);\n  },\n\n  getMediaRules: function(cb) {\n    this.request('getMediaRules', function(resp) {\n      return resp.mediaRules.map(function(form) {\n        return new MediaRule(this.client, form);\n      }.bind(this));\n    }.bind(this), cb);\n  },\n\n  update: function(text, cb) {\n    this.request('update', { text: text, transition: true }, cb);\n  },\n\n  getText: function(cb) {\n    this.request('getText', this.pluck('text'), cb);\n  }\n});\n\nfunction MediaRule(client, rule) {\n  this.initialize(client, rule.actor);\n  this.rule = rule;\n\n  this.on(\"matchesChange\", function(event) {\n    this.emit(\"matches-change\", event.matches);\n  }.bind(this));\n}\nMediaRule.prototype = extend(ClientMethods, {\n  get mediaText() {\n    return this.rule.mediaText;\n  },\n\n  get matches() {\n    return this.rule.matches;\n  }\n})\n\nfunction OriginalSource(client, source) {\n  console.log(\"source\", source);\n  this.initialize(client, source.actor);\n\n  this.source = source;\n}\n\nOriginalSource.prototype = extend(ClientMethods, {\n  get url()  {\n    return this.source.url\n  },\n\n  getText: function(cb) {\n    this.request('getText', this.pluck('text'), cb);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/stylesheets.js\n// module id = 199\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Tab = require(\"./tab\"),\n    fs = require(\"fs\"),\n    spawn = require(\"child_process\").spawn;\n\nmodule.exports = Webapps;\n\nvar CHUNK_SIZE = 20480;\n\n// Also dispatch appOpen/appClose, appInstall/appUninstall events\nfunction Webapps(client, tab) {\n  this.initialize(client, tab.webappsActor);\n}\n\nWebapps.prototype = extend(ClientMethods, {\n  watchApps: function(cb) {\n    this.request(\"watchApps\", cb);\n  },\n  unwatchApps: function(cb) {\n    this.request(\"unwatchApps\", cb);\n  },\n  launch: function(manifestURL, cb) {\n    this.request(\"launch\", {manifestURL: manifestURL}, cb);\n  },\n  close: function(manifestURL, cb) {\n    this.request(\"close\", {manifestURL: manifestURL}, cb);\n  },\n  getInstalledApps: function(cb) {\n    this.request(\"getAll\", function (err, resp) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      cb(null, resp.apps);\n    });\n  },\n  listRunningApps: function(cb) {\n    this.request(\"listRunningApps\", function (err, resp) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      cb(null, resp.apps);\n    });\n  },\n  getApp: function(manifestURL, cb) {\n    this.request(\"getAppActor\", {manifestURL: manifestURL}, (function (err, resp) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      var actor = new Tab(this.client, resp.actor);\n      cb(null, actor);\n    }).bind(this));\n  },\n  installHosted: function(options, cb) {\n    this.request(\n      \"install\",\n      { appId: options.appId,\n        metadata: options.metadata,\n        manifest: options.manifest },\n      function (err, resp) {\n        if (err || resp.error) {\n          cb(err || resp.error);\n          return;\n        }\n        cb(null, resp.appId);\n      });\n  },\n  _upload: function (path, cb) {\n    // First create an upload actor\n    this.request(\"uploadPackage\", function (err, resp) {\n      var actor = resp.actor;\n      fs.readFile(path, function(err, data) {\n        chunk(actor, data);\n      });\n    });\n    // Send push the file chunk by chunk\n    var self = this;\n    var step = 0;\n    function chunk(actor, data) {\n      var i = step++ * CHUNK_SIZE;\n      var m = Math.min(i + CHUNK_SIZE, data.length);\n      var c = \"\";\n      for(; i < m; i++)\n        c += String.fromCharCode(data[i]);\n      var message = {\n        to: actor,\n        type: \"chunk\",\n        chunk: c\n      };\n      self.client.makeRequest(message, function(resp) {\n        if (resp.error) {\n          cb(resp);\n          return;\n        }\n        if (i < data.length) {\n          setTimeout(chunk, 0, actor, data);\n        } else {\n          done(actor);\n        }\n      });\n    }\n    // Finally close the upload\n    function done(actor) {\n      var message = {\n        to: actor,\n        type: \"done\"\n      };\n      self.client.makeRequest(message, function(resp) {\n        if (resp.error) {\n          cb(resp);\n        } else {\n          cb(null, actor, cleanup.bind(null, actor));\n        }\n      });\n    }\n\n    // Remove the temporary uploaded file from the server:\n    function cleanup(actor) {\n      var message = {\n        to: actor,\n        type: \"remove\"\n      };\n      self.client.makeRequest(message, function () {});\n    }\n  },\n  installPackaged: function(path, appId, cb) {\n    this._upload(path, (function (err, actor, cleanup) {\n      this.request(\"install\", {appId: appId, upload: actor},\n        function (err, resp) {\n          if (err) {\n            cb(err);\n            return;\n          }\n          cb(null, resp.appId);\n          cleanup();\n        });\n    }).bind(this));\n  },\n  installPackagedWithADB: function(path, appId, cb) {\n    var self = this;\n    // First ensure the temporary folder exists\n    function createTemporaryFolder() {\n      var c = spawn(\"adb\", [\"shell\", \"mkdir -p /data/local/tmp/b2g/\" + appId], {stdio:\"inherit\"});\n      c.on(\"close\", uploadPackage);\n    }\n    // then upload the package to the temporary directory\n    function uploadPackage() {\n      var child = spawn(\"adb\", [\"push\", path, \"/data/local/tmp/b2g/\" + appId + \"/application.zip\"], {stdio:\"inherit\"});\n      child.on(\"close\", installApp);\n    }\n    // finally order the webapps actor to install the app\n    function installApp() {\n      self.request(\"install\", {appId: appId},\n        function (err, resp) {\n          if (err) {\n            cb(err);\n            return;\n          }\n          cb(null, resp.appId);\n        });\n    }\n    createTemporaryFolder();\n  },\n  uninstall: function(manifestURL, cb) {\n    this.request(\"uninstall\", {manifestURL: manifestURL}, cb);\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/webapps.js\n// module id = 200\n// module chunks = 0","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 201\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Device;\n\nfunction Device(client, tab) {\n  this.initialize(client, tab.deviceActor);\n}\n\nDevice.prototype = extend(ClientMethods, {\n  getDescription: function(cb) {\n    this.request(\"getDescription\", function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n\n      cb(null, resp.value);\n    });\n  },\n  getRawPermissionsTable: function(cb) {\n    this.request(\"getRawPermissionsTable\", function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n\n      cb(null, resp.value.rawPermissionsTable);\n    });\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/device.js\n// module id = 202\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Tab = require(\"./tab\");\n\nmodule.exports = SimulatorApps;\n\nfunction SimulatorApps(client, actor) {\n  this.initialize(client, actor);\n}\n\nSimulatorApps.prototype = extend(ClientMethods, {\n  listApps: function(cb) {\n    this.request('listApps', function(resp) {\n      var apps = [];\n      for (var url in resp.apps) {\n        var app = resp.apps[url];\n        apps.push(new Tab(this.client, app));\n      }\n      return apps;\n    }.bind(this), cb);\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/simulator.js\n// module id = 203\n// module chunks = 0","/* @flow */\nimport {it, describe} from 'mocha';\nimport sinon from 'sinon';\nimport {assert} from 'chai';\n\nimport {makeSureItFails} from '../helpers';\nimport defaultDocsCommand, {url} from '../../../src/cmd/docs';\n\ndescribe('docs', () => {\n  it('passes the correct url to docs', () => {\n    const openUrl = sinon.spy((urlToOpen, callback) => callback(null));\n    return defaultDocsCommand({}, {openUrl}).then(() => {\n      sinon.assert.calledWith(openUrl, url);\n    });\n  });\n\n  it('throws an error when open fails', () => {\n    const openUrl = sinon.spy((urlToOpen, callback) => callback(\n      new Error('pretends this is an error from open()')\n    ));\n    return defaultDocsCommand({}, {openUrl})\n      .then(makeSureItFails()).catch((error) => {\n        assert.match(error.message, /error from open()/);\n      });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-cmd/test.docs.js","module.exports = require(\"opn\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"opn\"\n// module id = 205\n// module chunks = 0","/* @flow */\nimport {it, describe} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\n\nimport defaultLintCommand from '../../../src/cmd/lint';\nimport {makeSureItFails} from '../helpers';\n\ntype setUpParams = {|\n  createLinter?: Function,\n  createFileFilter?: Function,\n|}\n\ndescribe('lint', () => {\n\n  function setUp({createLinter, createFileFilter}: setUpParams = {}) {\n    const lintResult = '<lint.run() result placeholder>';\n    const runLinter = sinon.spy(() => Promise.resolve(lintResult));\n    if (!createLinter) {\n      createLinter = sinon.spy(() => {\n        return {run: runLinter};\n      });\n    }\n    return {\n      lintResult,\n      createLinter,\n      runLinter,\n      lint: (params = {}, options = {}) => {\n        return defaultLintCommand({\n          sourceDir: '/fake/source/dir',\n          ...params,\n        }, {\n          createLinter,\n          createFileFilter,\n          ...options,\n        });\n      },\n    };\n  }\n\n  it('creates and runs a linter', () => {\n    const {lint, createLinter, runLinter, lintResult} = setUp();\n    return lint().then((actualLintResult) => {\n      assert.equal(actualLintResult, lintResult);\n      sinon.assert.called(createLinter);\n      sinon.assert.called(runLinter);\n    });\n  });\n\n  it('fails when the linter fails', () => {\n    const createLinter = () => {\n      return {\n        run: () => Promise.reject(new Error('some error from the linter')),\n      };\n    };\n    const {lint} = setUp({createLinter});\n    return lint().then(makeSureItFails(), (error) => {\n      assert.match(error.message, /error from the linter/);\n    });\n  });\n\n  it('runs as a binary', () => {\n    const {lint, createLinter} = setUp();\n    return lint().then(() => {\n      sinon.assert.calledWithMatch(createLinter, {runAsBinary: true});\n    });\n  });\n\n  it('sets runAsBinary according shouldExitProgram option', () => {\n    const {lint, createLinter} = setUp();\n    return lint({}, {shouldExitProgram: false}).then(() => {\n      sinon.assert.calledWithMatch(createLinter, {runAsBinary: false});\n    });\n  });\n\n  it('passes sourceDir to the linter', () => {\n    const {lint, createLinter} = setUp();\n    return lint({sourceDir: '/some/path'}).then(() => {\n      const config = createLinter.firstCall.args[0].config;\n      assert.equal(config._[0], '/some/path');\n    });\n  });\n\n  it('passes warningsAsErrors to the linter', () => {\n    const {lint, createLinter} = setUp();\n    return lint({warningsAsErrors: true}).then(() => {\n      sinon.assert.calledWithMatch(createLinter, {\n        config: {\n          warningsAsErrors: true,\n        },\n      });\n    });\n  });\n\n  it('passes warningsAsErrors undefined to the linter', () => {\n    const {lint, createLinter} = setUp();\n    return lint().then(() => {\n      sinon.assert.calledWithMatch(createLinter, {\n        config: {\n          warningsAsErrors: undefined,\n        },\n      });\n    });\n  });\n\n  it('configures the linter when verbose', () => {\n    const {lint, createLinter} = setUp();\n    return lint({verbose: true}).then(() => {\n      sinon.assert.calledWithMatch(createLinter, {\n        config: {\n          logLevel: 'debug',\n          stack: true,\n        },\n      });\n    });\n  });\n\n  it('configures the linter when not verbose', () => {\n    const {lint, createLinter} = setUp();\n    return lint({verbose: false}).then(() => {\n      sinon.assert.calledWithMatch(createLinter, {\n        config: {\n          logLevel: 'fatal',\n          stack: false,\n        },\n      });\n    });\n  });\n\n  it('passes through linter configuration', () => {\n    const {lint, createLinter} = setUp();\n    return lint({\n      pretty: true,\n      metadata: true,\n      output: 'json',\n      boring: true,\n      selfHosted: true,\n    }).then(() => {\n      sinon.assert.calledWithMatch(createLinter, {\n        config: {\n          pretty: true,\n          metadata: true,\n          output: 'json',\n          boring: true,\n          selfHosted: true,\n        },\n      });\n    });\n  });\n\n  it('configures a lint command with the expected fileFilter', () => {\n    const fileFilter = {wantFile: sinon.spy(() => true)};\n    const createFileFilter = sinon.spy(() => fileFilter);\n    const {lint, createLinter} = setUp({createFileFilter});\n    const params = {\n      sourceDir: '.',\n      artifactsDir: 'artifacts',\n      ignoreFiles: ['file1', '**/file2'],\n    };\n    return lint(params).then(() => {\n      sinon.assert.calledWith(createFileFilter, params);\n\n      assert.ok(createLinter.called);\n      const {shouldScanFile} = createLinter.firstCall.args[0].config;\n      shouldScanFile('path/to/file');\n      sinon.assert.calledWith(fileFilter.wantFile, 'path/to/file');\n    });\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-cmd/test.lint.js","module.exports = require(\"addons-linter\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"addons-linter\"\n// module id = 207\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {afterEach, beforeEach, describe, it} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\n\nimport run from '../../../src/cmd/run';\nimport {\n  fixturePath,\n  FakeExtensionRunner,\n  getFakeFirefox,\n  getFakeRemoteFirefox,\n} from '../helpers';\nimport {createLogger} from '../../../src/util/logger';\n\nconst log = createLogger(__filename);\n// Fake result for client.installTemporaryAddon().then(installResult => ...)\nconst tempInstallResult = {\n  addon: {id: 'some-addon@test-suite'},\n};\n\nfunction prepareRun(fakeInstallResult) {\n  const sourceDir = fixturePath('minimal-web-ext');\n\n  const argv = {\n    artifactsDir: path.join(sourceDir, 'web-ext-artifacts'),\n    sourceDir,\n    noReload: true,\n    keepProfileChanges: false,\n    browserConsole: false,\n  };\n  const options = {\n    buildExtension: sinon.spy(() => {}),\n    firefoxApp: getFakeFirefox(),\n    firefoxClient: sinon.spy(() => {\n      return Promise.resolve(getFakeRemoteFirefox({\n        installTemporaryAddon: () =>\n          Promise.resolve(\n            fakeInstallResult || tempInstallResult\n          ),\n      }));\n    }),\n    reloadStrategy: sinon.spy(() => {\n      log.debug('fake: reloadStrategy()');\n    }),\n    MultiExtensionRunner: sinon.spy(FakeExtensionRunner),\n    desktopNotifications: sinon.spy(() => {}),\n  };\n\n  return {\n    argv,\n    options,\n    run: (customArgv = {}, customOpt = {}) => run(\n      {...argv, ...customArgv},\n      {...options, ...customOpt}\n    ),\n  };\n}\n\ndescribe('run', () => {\n  let androidRunnerStub: sinon.SinonStub;\n  let desktopRunnerStub: sinon.SinonStub;\n\n  beforeEach(() => {\n    androidRunnerStub = sinon.stub(\n      // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n      require('../../../src/extension-runners/firefox-android'),\n      'FirefoxAndroidExtensionRunner');\n\n    desktopRunnerStub = sinon.stub(\n      // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n      require('../../../src/extension-runners/firefox-desktop'),\n      'FirefoxDesktopExtensionRunner');\n  });\n  afterEach(() => {\n    androidRunnerStub.restore();\n    androidRunnerStub = undefined;\n    desktopRunnerStub.restore();\n    desktopRunnerStub = undefined;\n  });\n\n  it('passes a custom Firefox binary when specified', async () => {\n    const firefox = '/pretend/path/to/Firefox/firefox-bin';\n    const cmd = prepareRun();\n    await cmd.run({firefox});\n    sinon.assert.calledWithMatch(desktopRunnerStub, {firefoxBinary: firefox});\n  });\n\n  it('passes startUrl parameter to Firefox when specified', async () => {\n    const cmd = prepareRun();\n    const expectedStartUrls = ['www.example.com'];\n\n    await cmd.run({startUrl: expectedStartUrls});\n    sinon.assert.calledWithMatch(\n      desktopRunnerStub, {startUrl: expectedStartUrls}\n    );\n  });\n\n  it('passes the expected parameters to the extension runner', async () => {\n    const cmd = prepareRun();\n    const runOptions = {\n      preInstall: true,\n      keepProfileChanges: true,\n      browserConsole: true,\n      firefox: '/path/to/custom/bin/firefox',\n      pref: {'my.custom.pref': 'value'},\n      firefoxProfile: '/path/to/custom/profile',\n    };\n\n    await cmd.run(runOptions);\n\n    sinon.assert.calledOnce(desktopRunnerStub);\n    const runnerParams = desktopRunnerStub.firstCall.args[0];\n\n    // The runner should receive the same parameters as the options sent\n    // to run() with just a few minor adjustments.\n    const expectedRunnerParams = {\n      ...runOptions,\n      firefoxBinary: runOptions.firefox,\n      customPrefs: runOptions.pref,\n    };\n    delete expectedRunnerParams.firefox;\n    delete expectedRunnerParams.pref;\n\n    assert.deepEqual({\n      preInstall: runnerParams.preInstall,\n      keepProfileChanges: runnerParams.keepProfileChanges,\n      browserConsole: runnerParams.browserConsole,\n      firefoxBinary: runnerParams.firefoxBinary,\n      customPrefs: runnerParams.customPrefs,\n      firefoxProfile: runnerParams.profilePath,\n    }, expectedRunnerParams);\n    assert.equal(runnerParams.extensions.length, 1);\n    assert.equal(runnerParams.extensions[0].sourceDir, cmd.argv.sourceDir);\n  });\n\n  it('passes the expected dependencies to the extension runner', async () => {\n    const cmd = prepareRun();\n    const {firefoxApp, firefoxClient} = cmd.options;\n\n    await cmd.run({});\n    sinon.assert.calledOnce(desktopRunnerStub);\n    const runnerParams = desktopRunnerStub.firstCall.args[0];\n    assert.deepEqual({\n      firefoxApp: runnerParams.firefoxApp,\n      firefoxClient: runnerParams.firefoxClient,\n    }, {firefoxApp, firefoxClient});\n  });\n\n  it('can watch and reload the extension', async () => {\n    const cmd = prepareRun();\n    const {sourceDir, artifactsDir} = cmd.argv;\n    const {reloadStrategy} = cmd.options;\n\n    await cmd.run({noReload: false});\n    assert.equal(reloadStrategy.called, true);\n    const args = reloadStrategy.firstCall.args[0];\n    assert.equal(args.sourceDir, sourceDir);\n    assert.equal(args.artifactsDir, artifactsDir);\n  });\n\n  it('can disable input in the reload strategy', async () => {\n    const cmd = prepareRun();\n    const {reloadStrategy} = cmd.options;\n\n    await cmd.run({noInput: true, noReload: false});\n    sinon.assert.calledWithMatch(reloadStrategy, {noInput: true});\n  });\n\n  it('will not reload when using --pre-install', async () => {\n    const cmd = prepareRun();\n    const {reloadStrategy} = cmd.options;\n\n    // --pre-install should imply --no-reload\n    await cmd.run({noReload: false, preInstall: true});\n    assert.equal(reloadStrategy.called, false);\n  });\n\n  it('allows you to opt out of extension reloading', async () => {\n    const cmd = prepareRun();\n    const {reloadStrategy} = cmd.options;\n\n    await cmd.run({noReload: true});\n    assert.equal(reloadStrategy.called, false);\n  });\n\n  it('allows to replace manifest parser', async () => {\n    const cmd = prepareRun();\n    const getFakeManifest = sinon.spy();\n\n    await cmd.run({}, { getValidatedManifest: getFakeManifest });\n    assert.equal(getFakeManifest.called, true);\n  });\n\n  it('returns ExtensonRunner', async () => {\n    const cmd = prepareRun();\n    const extensionRunner = await cmd.run();\n    assert.instanceOf(extensionRunner, FakeExtensionRunner);\n  });\n\n  it('creates a Firefox Desktop runner if targets is an empty array',\n     async () => {\n       const cmd = prepareRun();\n       await cmd.run({target: []});\n       sinon.assert.notCalled(androidRunnerStub);\n       sinon.assert.calledOnce(desktopRunnerStub);\n     });\n\n  it('creates a Firefox Desktop runner if \"firefox-desktop\" is in target',\n     async () => {\n       const cmd = prepareRun();\n       await cmd.run({target: ['firefox-desktop']});\n       sinon.assert.notCalled(androidRunnerStub);\n       sinon.assert.calledOnce(desktopRunnerStub);\n     });\n\n  it('creates a Firefox Android runner if \"firefox-android\" is in target',\n     async () => {\n       const cmd = prepareRun();\n       await cmd.run({target: ['firefox-android']});\n\n       sinon.assert.calledOnce(androidRunnerStub);\n       sinon.assert.notCalled(desktopRunnerStub);\n     });\n\n  it('creates multiple extension runners', async () => {\n    const cmd = prepareRun();\n    await cmd.run({target: ['firefox-android', 'firefox-desktop']});\n\n    sinon.assert.calledOnce(androidRunnerStub);\n    sinon.assert.calledOnce(desktopRunnerStub);\n  });\n\n  it('provides a buildSourceDir method to the Firefox Android runner',\n     async () => {\n       const cmd = prepareRun();\n       await cmd.run({target: ['firefox-android']});\n\n       sinon.assert.calledWithMatch(\n         androidRunnerStub,\n         {\n           buildSourceDir: sinon.match.func,\n         }\n       );\n\n       const {buildSourceDir} = androidRunnerStub.firstCall.args[0];\n\n       await buildSourceDir('/fake/source/dir');\n\n       sinon.assert.calledWithMatch(\n         cmd.options.buildExtension,\n         {\n           sourceDir: '/fake/source/dir',\n         },\n       );\n     });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-cmd/test.run.js","module.exports = require(\"node-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-notifier\"\n// module id = 209\n// module chunks = 0","module.exports = require(\"adbkit\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"adbkit\"\n// module id = 210\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport copyDir from 'copy-dir';\nimport {fs} from 'mz';\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\nimport promisify from 'es6-promisify';\n\nimport {onlyInstancesOf, UsageError, WebExtError} from '../../../src/errors';\nimport {getManifestId} from '../../../src/util/manifest';\nimport {withTempDir} from '../../../src/util/temp-dir';\nimport {manifestWithoutApps} from '../test-util/test.manifest';\nimport completeSignCommand, {\n  extensionIdFile, getIdFromSourceDir, saveIdToSourceDir,\n} from '../../../src/cmd/sign';\nimport {\n  basicManifest,\n  makeSureItFails,\n  fixturePath,\n} from '../helpers';\n// Import flow type\nimport type {ExtensionManifestApplications} from '../../../src/util/manifest';\n\ndescribe('sign', () => {\n\n  function getStubs() {\n    const signingConfig = {\n      apiKey: 'AMO JWT issuer',\n      apiSecret: 'AMO JWT secret',\n      apiUrlPrefix: 'http://not-the-real-amo.com/api/v3',\n      apiProxy: 'http://yourproxy:6000',\n      timeout: 999,\n    };\n\n    const buildResult = {\n      extensionPath: '/tmp/built-web-extension.xpi',\n    };\n    const build = sinon.spy(() => Promise.resolve(buildResult));\n\n    const signingResult = {\n      id: 'some-addon-id',\n      success: true,\n      downloadedFiles: [],\n    };\n    const signAddon = sinon.spy(() => Promise.resolve(signingResult));\n\n    return {\n      signingConfig,\n      build,\n      buildResult,\n      signAddon,\n      signingResult,\n      preValidatedManifest: basicManifest,\n    };\n  }\n\n  /*\n   * Run the sign command with stubs for all dependencies.\n   */\n  function sign(\n    tmpDir: Object, stubs: Object,\n    {extraArgs = {}, extraOptions = {}}: Object = {}\n  ): Promise<*> {\n    return completeSignCommand({\n      verbose: false,\n      artifactsDir: path.join(tmpDir.path(), 'artifacts-dir'),\n      sourceDir: tmpDir.path(),\n      ...stubs.signingConfig,\n      ...extraArgs,\n    }, {\n      ...stubs,\n      ...extraOptions,\n    });\n  }\n\n  it('builds and signs an extension', () => withTempDir(\n    // This test only stubs out the signer in an effort to integrate\n    // all other parts of the process.\n    (tmpDir) => {\n      const stubs = getStubs();\n      const sourceDir = path.join(tmpDir.path(), 'source-dir');\n      const copyDirAsPromised = promisify(copyDir);\n      return copyDirAsPromised(fixturePath('minimal-web-ext'), sourceDir)\n        .then(() => completeSignCommand({\n          sourceDir,\n          artifactsDir: path.join(tmpDir.path(), 'artifacts'),\n          ...stubs.signingConfig,\n        }, {\n          signAddon: stubs.signAddon,\n        }))\n        .then((result) => {\n          assert.equal(result.success, true);\n          // Do a sanity check that a built extension was passed to the\n          // signer.\n          assert.include(stubs.signAddon.firstCall.args[0].xpiPath,\n                         'minimal_extension-1.0.zip');\n        });\n    }\n  ));\n\n  it('allows an empty application ID when signing', () => withTempDir(\n    (tmpDir) => {\n      const stubs = getStubs();\n      return sign(\n        tmpDir, stubs,\n        {\n          extraOptions: {\n            preValidatedManifest: manifestWithoutApps,\n          },\n        })\n        .then(() => {\n          sinon.assert.called(stubs.signAddon);\n          sinon.assert.calledWithMatch(\n            stubs.signAddon,\n            {id: getManifestId(manifestWithoutApps)}\n          );\n        });\n    }\n  ));\n\n  it('allows a custom ID when no ID in manifest.json', () => withTempDir(\n    (tmpDir) => {\n      const customId = 'some-custom-id';\n      const stubs = getStubs();\n      return sign(\n        tmpDir, stubs,\n        {\n          extraArgs: {\n            id: customId,\n          },\n          extraOptions: {\n            preValidatedManifest: manifestWithoutApps,\n          },\n        })\n        .then(() => {\n          sinon.assert.called(stubs.signAddon);\n          sinon.assert.calledWithMatch(stubs.signAddon, {id: customId});\n        });\n    }\n  ));\n\n  it('prefers a custom ID over an ID file', () => withTempDir(\n    (tmpDir) => {\n      const sourceDir = path.join(tmpDir.path(), 'source-dir');\n      const customId = 'some-custom-id';\n      const stubs = getStubs();\n      // First, save an extension ID like a previous signing call.\n      return fs.mkdir(sourceDir)\n        .then(() => saveIdToSourceDir(sourceDir, 'some-other-id'))\n        // Now, make a signing call with a custom ID.\n        .then(() => sign(tmpDir, stubs, {\n          extraArgs: {\n            sourceDir,\n            id: customId,\n          },\n          extraOptions: {\n            preValidatedManifest: manifestWithoutApps,\n          },\n        }))\n        .then(() => {\n          sinon.assert.called(stubs.signAddon);\n          sinon.assert.calledWithMatch(stubs.signAddon, {id: customId});\n        });\n    }\n  ));\n\n  it('disallows a custom ID when manifest.json has ID', () => withTempDir(\n    (tmpDir) => {\n      const customId = 'some-custom-id';\n      const stubs = getStubs();\n      return sign(\n        tmpDir, stubs,\n        {\n          extraArgs: {\n            id: customId,\n          },\n          extraOptions: {\n            // This manifest has an ID in it.\n            preValidatedManifest: basicManifest,\n          },\n        })\n        .then(makeSureItFails())\n        .catch(onlyInstancesOf(UsageError, (error) => {\n          assert.match(error.message, /Cannot set custom ID some-custom-id/);\n          assert.match(\n            error.message,\n            /manifest\\.json declares ID basic-manifest@web-ext-test-suite/);\n        }));\n    }\n  ));\n\n  it('remembers auto-generated IDs for successive signing', () => withTempDir(\n    (tmpDir) => {\n\n      function _sign() {\n        const signAddon = sinon.spy(() => Promise.resolve({\n          ...stubs.signingResult,\n          id: 'auto-generated-id',\n        }));\n\n        return sign(\n          tmpDir,\n          {\n            ...stubs,\n            signAddon,\n          }, {\n            extraOptions: {\n              preValidatedManifest: manifestWithoutApps,\n            },\n          })\n          .then((signingResult) => {\n            return {signingResult, signAddon};\n          });\n      }\n\n      const stubs = getStubs();\n\n      // Run an initial sign command which will yield a server generated ID.\n      return _sign()\n        .then(({signAddon, signingResult}) => {\n          sinon.assert.called(signAddon);\n          sinon.assert.calledWithMatch(signAddon, {id: undefined});\n          assert.equal(signingResult.id, 'auto-generated-id');\n\n          // Re-run the sign command again.\n          return _sign();\n        })\n        .then(({signAddon}) => {\n          sinon.assert.called(signAddon);\n          // This should call signAddon() with the server generated\n          // ID that was saved to the source directory from the previous\n          // signing result.\n          sinon.assert.calledWithMatch(signAddon, {id: 'auto-generated-id'});\n        });\n    }\n  ));\n\n  it('returns a signing result', () => withTempDir(\n    (tmpDir) => {\n      const stubs = getStubs();\n      return sign(tmpDir, stubs)\n        .then((realResult) => {\n          assert.deepEqual(realResult, stubs.signingResult);\n        });\n    }\n  ));\n\n  it('might fail', () => withTempDir(\n    (tmpDir) => {\n      return sign(\n        tmpDir, {\n          ...getStubs(),\n          signAddon: () => Promise.resolve({\n            success: false,\n          }),\n        })\n        .then(makeSureItFails())\n        .catch((error) => {\n          assert.instanceOf(error, WebExtError);\n          assert.match(error.message, /The extension could not be signed/);\n        });\n    }\n  ));\n\n  it('calls the add-on signer', () => withTempDir(\n    (tmpDir) => {\n      const stubs = getStubs();\n      const artifactsDir = path.join(tmpDir.path(), 'some-artifacts-dir');\n      const applications: ExtensionManifestApplications =\n        stubs.preValidatedManifest.applications || {gecko: {}};\n      return sign(tmpDir, stubs, {extraArgs: {artifactsDir}})\n        .then(() => {\n          sinon.assert.called(stubs.signAddon);\n          sinon.assert.calledWithMatch(stubs.signAddon, {\n            apiKey: stubs.signingConfig.apiKey,\n            apiProxy: stubs.signingConfig.apiProxy,\n            apiSecret: stubs.signingConfig.apiSecret,\n            apiUrlPrefix: stubs.signingConfig.apiUrlPrefix,\n            downloadDir: artifactsDir,\n            id: applications.gecko.id,\n            timeout: stubs.signingConfig.timeout,\n            version: stubs.preValidatedManifest.version,\n            xpiPath: stubs.buildResult.extensionPath,\n          });\n        });\n    }\n  ));\n\n  it('passes the verbose flag to the signer', () => withTempDir(\n    (tmpDir) => {\n      const stubs = getStubs();\n      return sign(tmpDir, stubs, {extraArgs: {verbose: true}})\n        .then(() => {\n          sinon.assert.called(stubs.signAddon);\n          sinon.assert.calledWithMatch(stubs.signAddon, {verbose: true});\n        });\n    }\n  ));\n\n  it('passes the ignoreFiles flag to the builder', () => withTempDir(\n    (tmpDir) => {\n      const stubs = getStubs();\n      const ignoreFiles = ['*'];\n      return sign(tmpDir, stubs, {extraArgs: {ignoreFiles}})\n        .then(() => {\n          sinon.assert.called(stubs.signAddon);\n          sinon.assert.calledWithMatch(stubs.build, {ignoreFiles});\n        });\n    }\n  ));\n\n  it('passes through a signing exception', () => withTempDir(\n    (tmpDir) => {\n      const stubs = getStubs();\n      stubs.signAddon = () => Promise.reject(new Error('some signing error'));\n\n      return sign(tmpDir, stubs)\n        .then(makeSureItFails())\n        .catch((error) => {\n          assert.match(error.message, /signing error/);\n        });\n    }\n  ));\n\n  describe('saveIdToSourceDir', () => {\n\n    it('saves an extension ID to file', () => withTempDir(\n      (tmpDir) => {\n        const sourceDir = tmpDir.path();\n        return saveIdToSourceDir(sourceDir, 'some-id')\n          .then(() => fs.readFile(path.join(sourceDir, extensionIdFile)))\n          .then((content) => {\n            assert.include(content.toString(), 'some-id');\n          });\n      }\n    ));\n\n    it('will overwrite an existing file', () => withTempDir(\n      (tmpDir) => {\n        const sourceDir = tmpDir.path();\n        return saveIdToSourceDir(sourceDir, 'first-id')\n          .then(() => saveIdToSourceDir(sourceDir, 'second-id'))\n          .then(() => getIdFromSourceDir(sourceDir))\n          .then((savedId) => {\n            assert.equal(savedId, 'second-id');\n          });\n      }\n    ));\n\n  });\n\n  describe('getIdFromSourceDir', () => {\n\n    it('gets a saved extension ID', () => withTempDir(\n      (tmpDir) => {\n        const sourceDir = tmpDir.path();\n        return saveIdToSourceDir(sourceDir, 'some-id')\n          .then(() => getIdFromSourceDir(sourceDir))\n          .then((extensionId) => {\n            assert.equal(extensionId, 'some-id');\n          });\n      }\n    ));\n\n    it('throws an error for empty files', () => withTempDir(\n      (tmpDir) => {\n        const sourceDir = tmpDir.path();\n        return fs.writeFile(path.join(sourceDir, extensionIdFile), '')\n          .then(() => getIdFromSourceDir(sourceDir))\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(UsageError, (error) => {\n            assert.match(error.message, /No ID found in extension ID file/);\n          }));\n      }\n    ));\n\n    it('returns empty ID when extension file does not exist', () => withTempDir(\n      (tmpDir) => {\n        const sourceDir = tmpDir.path();\n        return getIdFromSourceDir(sourceDir)\n          .then((savedId) => {\n            assert.strictEqual(savedId, undefined);\n          });\n      }\n    ));\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-cmd/test.sign.js","module.exports = require(\"copy-dir\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"copy-dir\"\n// module id = 212\n// module chunks = 0","module.exports = require(\"sign-addon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sign-addon\"\n// module id = 213\n// module chunks = 0","/* @flow */\nimport stream from 'stream';\n\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\n\nimport {\n  createExtensionRunner,\n  defaultWatcherCreator,\n  defaultReloadStrategy,\n  MultiExtensionRunner,\n} from '../../../src/extension-runners';\nimport {\n  FakeExtensionRunner,\n  FakeStdin,\n} from '../helpers';\nimport type {\n  IExtensionRunner, // eslint-disable-line import/named\n} from '../../../src/extension-runners/base';\n\nfunction createFakeExtensionRunner(\n  {\n    params = {}, overriddenMethods = {},\n  }: {params?: Object, overriddenMethods?: Object}\n): IExtensionRunner {\n  const runner = new FakeExtensionRunner(params);\n\n  for (const [fnName, fn] of Object.entries(overriddenMethods)) {\n    sinon.stub(runner, fnName).callsFake(fn);\n  }\n\n  return runner;\n}\n\nfunction prepareExtensionRunnerParams(params) {\n  return {\n    runners: [new FakeExtensionRunner(), new FakeExtensionRunner()],\n    desktopNotifications: sinon.spy(() => {}),\n    ...params,\n  };\n}\n\nfunction exitKeypressLoop(stdin) {\n  try {\n    // Ensure that the keypress processing loop (defined in defaultReloadStrategy)\n    // is exited.\n    stdin.emit('keypress', 'c', {name: 'c', ctrl: true});\n  } catch (error) {\n    // NOTE: exceptions raised by this helper are logged on the console\n    // and ignored (so that we don't hide an exception raised by a try block\n    // if this helper is used in a finally block).\n\n    // eslint-disable-next-line no-console\n    console.error('ERROR in exitKeypressLoop test helper - ' +\n                  'Unexpected exception while exiting the keypress loop',\n                  error);\n  }\n}\n\ndescribe('util/extension-runners', () => {\n  describe('createExtensionRunner', () => {\n    it('requires a valid target', async () => {\n      // $FLOW_IGNORE: Want to pass invalid argument and check the error.\n      const promise = createExtensionRunner({});\n      await assert.isRejected(promise, /Unknown target: \"undefined\"/);\n    });\n  });\n\n  describe('MultiExtensionRunner', () => {\n\n    it('calls the \"run\" method on all the created IExtensionRunner',\n       async () => {\n         const params = prepareExtensionRunnerParams();\n         const [\n           fakeExtensionRunner, anotherFakeExtensionRunner,\n         ] = params.runners;\n\n         sinon.spy(fakeExtensionRunner, 'run');\n         sinon.spy(anotherFakeExtensionRunner, 'run');\n\n         const runnerInstance = new MultiExtensionRunner(params);\n\n         assert.equal(runnerInstance.getName(), 'Multi Extension Runner');\n\n         await runnerInstance.run();\n\n         sinon.assert.calledOnce(fakeExtensionRunner.run);\n         sinon.assert.calledOnce(anotherFakeExtensionRunner.run);\n       });\n\n    it('calls the \"reloadAllExtensions\" on all the created runners',\n       async () => {\n         const params = prepareExtensionRunnerParams();\n         const [\n           fakeExtensionRunner, anotherFakeExtensionRunner,\n         ] = params.runners;\n\n         sinon.spy(fakeExtensionRunner, 'reloadAllExtensions');\n         sinon.spy(anotherFakeExtensionRunner, 'reloadAllExtensions');\n\n         const runnerInstance = new MultiExtensionRunner(params);\n\n         await runnerInstance.reloadAllExtensions();\n\n         sinon.assert.calledOnce(fakeExtensionRunner.reloadAllExtensions);\n         sinon.assert.calledOnce(\n           anotherFakeExtensionRunner.reloadAllExtensions\n         );\n       });\n\n    it('calls the \"reloadExtensionBySourceDir\" on all the created runners',\n       async () => {\n         const params = prepareExtensionRunnerParams();\n         const [\n           fakeExtensionRunner, anotherFakeExtensionRunner,\n         ] = params.runners;\n\n         sinon.spy(fakeExtensionRunner, 'reloadExtensionBySourceDir');\n         sinon.spy(anotherFakeExtensionRunner, 'reloadExtensionBySourceDir');\n\n         const runnerInstance = new MultiExtensionRunner(params);\n\n         await runnerInstance.reloadExtensionBySourceDir(\n           '/fake/source/dir'\n         );\n\n         sinon.assert.calledOnce(\n           fakeExtensionRunner.reloadExtensionBySourceDir\n         );\n         sinon.assert.calledOnce(\n           anotherFakeExtensionRunner.reloadExtensionBySourceDir\n         );\n\n         sinon.assert.calledWith(\n           fakeExtensionRunner.reloadExtensionBySourceDir,\n           sinon.match('/fake/source/dir')\n         );\n         sinon.assert.calledWith(\n           anotherFakeExtensionRunner.reloadExtensionBySourceDir,\n           sinon.match('/fake/source/dir')\n         );\n       });\n\n    it('calls exit on all the created IExtensionRunner', async () => {\n      const params = prepareExtensionRunnerParams();\n      const [\n        fakeExtensionRunner, anotherFakeExtensionRunner,\n      ] = params.runners;\n\n      sinon.spy(fakeExtensionRunner, 'exit');\n      sinon.spy(anotherFakeExtensionRunner, 'exit');\n\n      const runnerInstance = new MultiExtensionRunner(params);\n\n      await runnerInstance.exit();\n\n      sinon.assert.calledOnce(fakeExtensionRunner.exit);\n      sinon.assert.calledOnce(anotherFakeExtensionRunner.exit);\n    });\n\n    it('shows a desktop notification on errors while reloading all extensions',\n       async () => {\n         const params = prepareExtensionRunnerParams();\n         const fakeExtensionRunner = createFakeExtensionRunner({\n           overriddenMethods: {\n             getName: () => 'fakeExtensionRunner',\n             reloadAllExtensions: () => {\n               return Promise.reject(new Error('reload error 1'));\n             },\n           },\n         });\n         const anotherFakeExtensionRunner = createFakeExtensionRunner({\n           getName: () => 'anotherFakeExtensionRunner',\n           overriddenMethods: {\n             reloadAllExtensions: () => {\n               return Promise.reject(new Error('reload error 2'));\n             },\n           },\n         });\n\n         params.runners = [fakeExtensionRunner, anotherFakeExtensionRunner];\n\n         const runnerInstance = new MultiExtensionRunner(params);\n\n         await runnerInstance.reloadAllExtensions();\n\n         sinon.assert.calledOnce(fakeExtensionRunner.reloadAllExtensions);\n         sinon.assert.calledOnce(\n           anotherFakeExtensionRunner.reloadAllExtensions\n         );\n         sinon.assert.callCount(params.desktopNotifications, 2);\n         sinon.assert.calledWith(\n           params.desktopNotifications,\n           sinon.match({\n             title: sinon.match(/web-ext run: extension reload error/),\n             message: sinon.match(/on \"fakeExtensionRunner\" - reload error 1/),\n           })\n         );\n       });\n\n    it('shows a desktop notification on errors while reloading an extension',\n       async () => {\n         const params = prepareExtensionRunnerParams();\n         const fakeExtensionRunner = createFakeExtensionRunner({\n           overriddenMethods: {\n             getName: () => 'fakeExtensionRunner',\n             reloadExtensionBySourceDir: () => {\n               return Promise.reject(new Error('reload error 1'));\n             },\n           },\n         });\n         const anotherFakeExtensionRunner = createFakeExtensionRunner({\n           overriddenMethods: {\n             reloadExtensionBySourceDir: () => Promise.resolve(),\n             getName: () => 'anotherFakeExtensionRunner',\n           },\n         });\n\n         params.runners = [fakeExtensionRunner, anotherFakeExtensionRunner];\n\n         const runnerInstance = new MultiExtensionRunner(params);\n         const sourceDir = '/fake/sourceDir';\n         const res = await runnerInstance.reloadExtensionBySourceDir(sourceDir);\n         const errors = res.filter((r) => r.reloadError);\n\n         assert.equal(res.length, 2);\n         assert.equal(errors.length, 1);\n\n         sinon.assert.calledOnce(\n           fakeExtensionRunner.reloadExtensionBySourceDir\n         );\n         sinon.assert.calledOnce(\n           anotherFakeExtensionRunner.reloadExtensionBySourceDir\n         );\n         sinon.assert.calledOnce(params.desktopNotifications);\n\n         sinon.assert.calledWith(\n           params.desktopNotifications,\n           sinon.match({\n             title: sinon.match(/web-ext run: extension reload error/),\n             message: sinon.match(\n               /\"\\/fake\\/sourceDir\" on \"fakeExtensionRunner\" - reload error 1/\n             ),\n           })\n         );\n       });\n\n    describe('registerCleanup', () => {\n\n      it('calls its callbacks once all the runner callbacks have been called',\n         async () => {\n           const params = prepareExtensionRunnerParams();\n           const [\n             fakeExtensionRunner, anotherFakeExtensionRunner,\n           ] = params.runners;\n\n           sinon.spy(fakeExtensionRunner, 'registerCleanup');\n           sinon.spy(anotherFakeExtensionRunner, 'registerCleanup');\n\n           const runnerInstance = new MultiExtensionRunner(params);\n\n           const waitRegisterCleanup = new Promise((resolve) => {\n             runnerInstance.registerCleanup(resolve);\n           });\n\n           sinon.assert.calledOnce(fakeExtensionRunner.registerCleanup);\n           sinon.assert.calledOnce(anotherFakeExtensionRunner.registerCleanup);\n\n           // Call the cleanup callback on the first runner.\n           fakeExtensionRunner.registerCleanup.firstCall.args[0]();\n\n           const checkIncompleteCleanup = await Promise.race([\n             waitRegisterCleanup,\n             new Promise((resolve) => {\n               setTimeout(() => {\n                 resolve('waitRegisterCleanup should not be resolved yet');\n               }, 300);\n             }),\n           ]);\n\n           assert.equal(checkIncompleteCleanup,\n                        'waitRegisterCleanup should not be resolved yet');\n\n           // Call the cleanup callback on the second and last runner.\n           anotherFakeExtensionRunner.registerCleanup.firstCall.args[0]();\n\n           await waitRegisterCleanup;\n         });\n\n    });\n\n  });\n\n  describe('defaultWatcherCreator', () => {\n\n    function prepare() {\n      const config = {\n        sourceDir: '/path/to/extension/source/',\n        artifactsDir: '/path/to/web-ext-artifacts',\n        onSourceChange: sinon.spy(() => {}),\n        ignoreFiles: ['path/to/file', 'path/to/file2'],\n        reloadExtension: sinon.spy(() => Promise.resolve()),\n      };\n      return {\n        config,\n        createWatcher: (customConfig = {}) => {\n          return defaultWatcherCreator({...config, ...customConfig});\n        },\n      };\n    }\n\n    it('configures a source watcher', () => {\n      const {config, createWatcher} = prepare();\n      createWatcher();\n      sinon.assert.called(config.onSourceChange);\n      sinon.assert.calledWith(\n        config.onSourceChange,\n        sinon.match({\n          sourceDir: config.sourceDir,\n          artifactsDir: config.artifactsDir,\n          onChange: sinon.match.typeOf('function'),\n        })\n      );\n    });\n\n    it('configures a run command with the expected fileFilter', () => {\n      const fileFilter = {wantFile: sinon.spy()};\n      const createFileFilter = sinon.spy(() => fileFilter);\n      const {config, createWatcher} = prepare();\n      createWatcher({createFileFilter});\n      sinon.assert.called(createFileFilter);\n      sinon.assert.calledWith(\n        createFileFilter,\n        sinon.match({\n          sourceDir: config.sourceDir,\n          artifactsDir: config.artifactsDir,\n          ignoreFiles: config.ignoreFiles,\n        })\n      );\n      const {shouldWatchFile} = config.onSourceChange.firstCall.args[0];\n      shouldWatchFile('path/to/file');\n      sinon.assert.called(fileFilter.wantFile);\n      sinon.assert.calledWith(fileFilter.wantFile, sinon.match('path/to/file'));\n    });\n\n    it('returns a watcher', () => {\n      const watcher = {};\n      const onSourceChange = sinon.spy(() => watcher);\n      const createdWatcher = prepare().createWatcher({onSourceChange});\n      assert.equal(createdWatcher, watcher);\n    });\n\n    it('reloads the extension', async () => {\n      const {config, createWatcher} = prepare();\n      createWatcher();\n\n      sinon.assert.called(config.onSourceChange);\n      sinon.assert.calledWith(\n        config.onSourceChange,\n        sinon.match({\n          onChange: sinon.match.typeOf('function'),\n        })\n      );\n\n      const {onChange} = config.onSourceChange.firstCall.args[0];\n      // Simulate executing the handler when a source file changes.\n      await onChange();\n      sinon.assert.called(config.reloadExtension);\n      sinon.assert.calledWith(\n        config.reloadExtension,\n        sinon.match(config.sourceDir)\n      );\n    });\n\n  });\n\n  describe('defaultReloadStrategy', () => {\n\n    function prepare({stubExtensionRunner} = {}) {\n      const watcher = {\n        close: sinon.spy(() => {}),\n      };\n      const extensionRunner = createFakeExtensionRunner({\n        overriddenMethods: stubExtensionRunner,\n      });\n      const args = {\n        extensionRunner,\n        sourceDir: '/path/to/extension/source',\n        artifactsDir: '/path/to/web-ext-artifacts/',\n        ignoreFiles: ['first/file', 'second/file'],\n      };\n      const options = {\n        createWatcher: sinon.spy(() => watcher),\n        stdin: new stream.Readable(),\n      };\n      return {\n        ...args,\n        ...options,\n        watcher,\n        extensionRunner,\n        reloadStrategy: async (argOverride = {}, optOverride = {}) => {\n          return defaultReloadStrategy(\n            {...args, ...argOverride},\n            {...options, ...optOverride});\n        },\n      };\n    }\n\n    it('configures a watcher', () => {\n      const {\n        createWatcher, reloadStrategy,\n        ...sentArgs\n      } = prepare();\n\n      reloadStrategy();\n      sinon.assert.called(createWatcher);\n      sinon.assert.calledWith(\n        createWatcher,\n        sinon.match({\n          sourceDir: sentArgs.sourceDir,\n          artifactsDir: sentArgs.artifactsDir,\n          ignoreFiles: sentArgs.ignoreFiles,\n        })\n      );\n    });\n\n    it('configure the watcher to reload an extension by sourceDir', () => {\n      const {\n        extensionRunner, createWatcher, reloadStrategy,\n      } = prepare({\n        stubExtensionRunner: {\n          reloadExtensionBySourceDir() {},\n        },\n      });\n\n      reloadStrategy();\n\n      sinon.assert.calledOnce(createWatcher);\n      sinon.assert.calledWith(\n        createWatcher,\n        sinon.match({\n          reloadExtension: sinon.match.typeOf('function'),\n        })\n      );\n\n      const sourceDir = '/fake/sourceDir';\n      const {reloadExtension} = createWatcher.firstCall.args[0];\n      reloadExtension(sourceDir);\n\n      const {reloadExtensionBySourceDir} = extensionRunner;\n      sinon.assert.calledOnce(reloadExtensionBySourceDir);\n      sinon.assert.calledWith(\n        reloadExtensionBySourceDir,\n        sinon.match(sourceDir)\n      );\n    });\n\n    it('cleans up when the extension runner closes', () => {\n      const {\n        extensionRunner, watcher, reloadStrategy, stdin,\n      } = prepare({\n        stubExtensionRunner: {\n          registerCleanup() {},\n        },\n      });\n\n      sinon.spy(stdin, 'pause');\n\n      reloadStrategy();\n\n      sinon.assert.called(extensionRunner.registerCleanup);\n      sinon.assert.calledOnce(extensionRunner.registerCleanup);\n      sinon.assert.calledWith(\n        extensionRunner.registerCleanup,\n        sinon.match.typeOf('function')\n      );\n\n      const registeredCb = extensionRunner.registerCleanup.firstCall.args[0];\n      registeredCb();\n\n      sinon.assert.called(watcher.close);\n      sinon.assert.called(stdin.pause);\n    });\n\n    it('can reload when user presses R in shell console', async () => {\n      const {extensionRunner, reloadStrategy} = prepare();\n\n      const fakeStdin = new FakeStdin();\n      sinon.spy(fakeStdin, 'setRawMode');\n      sinon.spy(extensionRunner, 'reloadAllExtensions');\n\n      try {\n        await reloadStrategy({}, {stdin: fakeStdin});\n        fakeStdin.emit('keypress', 'r', {name: 'r', ctrl: false});\n\n        // Wait for one tick.\n        await Promise.resolve();\n\n        sinon.assert.called(fakeStdin.setRawMode);\n        sinon.assert.called(extensionRunner.reloadAllExtensions);\n      } finally {\n        exitKeypressLoop(fakeStdin);\n      }\n    });\n\n    it('allows you to disable input', async () => {\n      const {extensionRunner, reloadStrategy} = prepare();\n      sinon.spy(extensionRunner, 'registerCleanup');\n\n      const fakeStdin = new FakeStdin();\n      sinon.spy(fakeStdin, 'pause');\n      sinon.spy(fakeStdin, 'setRawMode');\n\n      try {\n        await reloadStrategy({noInput: true}, {stdin: fakeStdin});\n        // This is meant to test that all input is ignored.\n        sinon.assert.notCalled(fakeStdin.setRawMode);\n      } finally {\n        exitKeypressLoop(fakeStdin);\n      }\n\n      const cleanupCb = extensionRunner.registerCleanup.firstCall.args[0];\n      cleanupCb();\n      sinon.assert.notCalled(fakeStdin.pause);\n    });\n\n    it('can still reload when user presses R after a reload error',\n       async () => {\n         const {extensionRunner, reloadStrategy} = prepare({\n           stubExtensionRunner: {\n             reloadAllExtensions: sinon.spy(\n               () => Promise.reject(Error('fake reload error'))\n             ),\n           },\n         });\n\n         const fakeStdin = new FakeStdin();\n         sinon.spy(fakeStdin, 'setRawMode');\n\n         try {\n           await reloadStrategy({}, {stdin: fakeStdin});\n           // Wait for one tick for reloadStrategy's keypress processing loop\n           // to be ready.\n           await Promise.resolve();\n\n           fakeStdin.emit('keypress', 'r', {name: 'r', ctrl: false});\n           // Wait for one tick to give reloadStrategy the chance to handle\n           // the keypress event.\n           await Promise.resolve();\n           sinon.assert.called(fakeStdin.setRawMode);\n           sinon.assert.calledOnce(extensionRunner.reloadAllExtensions);\n           fakeStdin.emit('keypress', 'r', {name: 'r', ctrl: false});\n           await Promise.resolve();\n           sinon.assert.calledTwice(extensionRunner.reloadAllExtensions);\n         } finally {\n           exitKeypressLoop(fakeStdin);\n         }\n       });\n\n    it('shuts down firefox on user request (CTRL+C in shell console)',\n       async () => {\n         const {extensionRunner, reloadStrategy} = prepare({\n           stubExtensionRunner: {\n             async exit() {},\n           },\n         });\n\n         const fakeStdin = new FakeStdin();\n\n         try {\n           await reloadStrategy({}, {stdin: fakeStdin});\n\n           // Wait for one tick.\n           await Promise.resolve();\n\n           fakeStdin.emit('keypress', 'c', {name: 'c', ctrl: true});\n\n           // Wait for one tick.\n           await Promise.resolve();\n\n           sinon.assert.called(extensionRunner.exit);\n         } finally {\n           exitKeypressLoop(fakeStdin);\n         }\n       });\n\n    it('pauses the web-ext process (CTRL+Z in shell console)', async () => {\n      const {reloadStrategy} = prepare();\n\n      const fakeStdin = new FakeStdin();\n\n      const setRawMode = sinon.spy(fakeStdin, 'setRawMode');\n      const fakeKill = sinon.spy(() => {});\n\n      try {\n        reloadStrategy({}, {stdin: fakeStdin, kill: fakeKill});\n\n        // Wait for one tick.\n        await Promise.resolve();\n\n        fakeStdin.emit('keypress', 'z', {name: 'z', ctrl: true});\n\n        // Wait for one tick.\n        await Promise.resolve();\n\n        sinon.assert.called(fakeKill);\n        sinon.assert.calledWith(\n          fakeKill,\n          sinon.match(process.pid),\n          sinon.match('SIGTSTP')\n        );\n        sinon.assert.callOrder(setRawMode, setRawMode, fakeKill, setRawMode);\n        sinon.assert.calledThrice(setRawMode);\n        sinon.assert.calledWith(setRawMode, sinon.match(true));\n        sinon.assert.calledWith(setRawMode, sinon.match(false));\n        sinon.assert.calledWith(setRawMode, sinon.match(true));\n      } finally {\n        exitKeypressLoop(fakeStdin);\n      }\n    });\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-extension-runners/test.extension-runners.js","/* @flow */\n\nimport EventEmitter from 'events';\n\nimport {assert} from 'chai';\nimport {describe, it} from 'mocha';\nimport deepcopy from 'deepcopy';\nimport sinon from 'sinon';\n\nimport {consoleStream} from '../../../src/util/logger';\nimport {\n  FirefoxAndroidExtensionRunner,\n} from '../../../src/extension-runners/firefox-android';\nimport type {\n  FirefoxAndroidExtensionRunnerParams,\n} from '../../../src/extension-runners/firefox-android';\nimport {\n  UsageError,\n  WebExtError,\n} from '../../../src/errors';\nimport {\n  basicManifest,\n  getFakeFirefox,\n  getFakeRemoteFirefox,\n  FakeStdin,\n} from '../helpers';\n\n// Fake result for client.installTemporaryAddon().then(installResult => ...)\nconst tempInstallResult = {\n  addon: {id: 'some-addon@test-suite'},\n};\n\n// Fake missing addon id result for client.installTemporaryAddon\nconst tempInstallResultMissingAddonId = {\n  addon: {id: null},\n};\n\nconst builtFileName = 'built-ext-filename';\n\nconst fakeBuiltExtensionPath = `/fake/extensionPath/${builtFileName}.zip`;\n\nconst fakeRDPUnixSocketFile = (\n  '/data/data/org.mozilla.firefox/firefox-debugger-socket'\n);\n\ntype PrepareParams = {\n  params?: Object,\n  debuggerPort?: number,\n  fakeFirefoxApp?: Object,\n  fakeRemoteFirefox?: Object,\n  fakeADBUtils?: Object,\n}\n\n// Reduce the waiting time during tests.\nFirefoxAndroidExtensionRunner.unixSocketDiscoveryRetryInterval = 0;\n\nfunction prepareExtensionRunnerParams({\n  debuggerPort,\n  fakeFirefoxApp,\n  fakeRemoteFirefox,\n  fakeADBUtils,\n  params,\n}: PrepareParams = {}) {\n  const fakeRemoteFirefoxClient = new EventEmitter();\n  const remoteFirefox = getFakeRemoteFirefox({\n    installTemporaryAddon: sinon.spy(\n      () => Promise.resolve(tempInstallResult)\n    ),\n    ...fakeRemoteFirefox,\n  });\n  remoteFirefox.client = fakeRemoteFirefoxClient;\n\n  // $FLOW_IGNORE: allow overriden params for testing purpose.\n  const runnerParams: FirefoxAndroidExtensionRunnerParams = {\n    extensions: [{\n      sourceDir: '/fake/sourceDir',\n      manifestData: deepcopy(basicManifest),\n    }],\n    keepProfileChanges: false,\n    browserConsole: false,\n    startUrl: undefined,\n    firefoxBinary: 'firefox',\n    preInstall: false,\n    firefoxApp: getFakeFirefox({\n      ...fakeFirefoxApp,\n    }, debuggerPort),\n    ADBUtils: sinon.spy(function() {\n      return fakeADBUtils;\n    }),\n    firefoxClient: sinon.spy(() => {\n      return Promise.resolve(remoteFirefox);\n    }),\n    desktopNotifications: sinon.spy(() => {}),\n    stdin: new EventEmitter(),\n    ...(params || {}),\n  };\n\n  return {\n    remoteFirefox,\n    params: runnerParams,\n  };\n}\n\nfunction prepareSelectedDeviceAndAPKParams(overriddenProperties = {}) {\n  const fakeADBUtils = {\n    discoverDevices: sinon.spy(() => Promise.resolve([\n      'emulator-1', 'emulator-2',\n    ])),\n    discoverInstalledFirefoxAPKs: sinon.spy(() => Promise.resolve([\n      'org.mozilla.fennec', 'org.mozilla.firefox',\n    ])),\n    getAndroidVersionNumber: sinon.spy(() => Promise.resolve(20)),\n    amForceStopAPK: sinon.spy(() => Promise.resolve()),\n    discoverRDPUnixSocket: sinon.spy(\n      () => Promise.resolve(fakeRDPUnixSocketFile)\n    ),\n    getOrCreateArtifactsDir: sinon.spy(\n      () => Promise.resolve('/fake/artifacts-dir/')\n    ),\n    runShellCommand: sinon.spy(() => Promise.resolve('')),\n    pushFile: sinon.spy(() => Promise.resolve()),\n    startFirefoxAPK: sinon.spy(() => Promise.resolve()),\n    setupForward: sinon.spy(() => Promise.resolve()),\n    clearArtifactsDir: sinon.spy(() => Promise.resolve()),\n    setUserAbortDiscovery: sinon.spy(() => {}),\n    ensureRequiredAPKRuntimePermissions: sinon.spy(() => Promise.resolve()),\n  };\n\n  const {params} = prepareExtensionRunnerParams({\n    params: {\n      adbDevice: 'emulator-1',\n      firefoxApk: 'org.mozilla.firefox',\n      buildSourceDir: sinon.spy(() => Promise.resolve({\n        extensionPath: fakeBuiltExtensionPath,\n      })),\n    },\n    fakeADBUtils,\n    fakeFirefoxApp: {\n      createProfile: sinon.spy(() => {\n        return Promise.resolve({profileDir: '/path/to/fake/profile'});\n      }),\n    },\n    ...overriddenProperties,\n  });\n\n  return {params, fakeADBUtils};\n}\n\ndescribe('util/extension-runners/firefox-android', () => {\n\n  describe('raises an UsageError when:', () => {\n\n    async function testUsageError(prepareTestParams, testExceptionCallback) {\n      const {params} = prepareExtensionRunnerParams(prepareTestParams);\n      const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n\n      let actualException;\n\n      try {\n        await runnerInstance.run();\n      } catch (error) {\n        actualException = error;\n      }\n\n      return testExceptionCallback({actualException});\n    }\n\n    it('does not find any android device', async () => {\n      const fakeADBUtils = {\n        discoverDevices: sinon.spy(() => Promise.resolve([])),\n      };\n      await testUsageError({fakeADBUtils}, ({actualException}) => {\n        sinon.assert.calledOnce(fakeADBUtils.discoverDevices);\n\n        assert.instanceOf(actualException, UsageError);\n        assert.match(actualException && actualException.message,\n                     /No Android device found/);\n      });\n    });\n\n    it('does not know which is the selected android device', async () => {\n      const fakeADBUtils = {\n        discoverDevices: sinon.spy(() => Promise.resolve([\n          'emulator-1', 'emulator-2',\n        ])),\n      };\n      await testUsageError({fakeADBUtils}, ({actualException}) => {\n        sinon.assert.calledOnce(fakeADBUtils.discoverDevices);\n\n        assert.instanceOf(actualException, UsageError);\n        assert.match(actualException && actualException.message,\n                     /Select an android device using --android-device/);\n      });\n    });\n\n    it('does not find the selected android device', async () => {\n      const fakeADBUtils = {\n        discoverDevices: sinon.spy(() => Promise.resolve([\n          'emulator-1', 'emulator-2',\n        ])),\n      };\n\n      await testUsageError({\n        params: {\n          adbDevice: 'emulator-3',\n        },\n        fakeADBUtils,\n      }, ({actualException}) => {\n        sinon.assert.calledOnce(fakeADBUtils.discoverDevices);\n\n        assert.instanceOf(actualException, UsageError);\n        assert.match(actualException && actualException.message,\n                     /Android device emulator-3 was not found in list:/);\n      });\n    });\n\n    it('does not find a valid Firefox apk', async () => {\n      const fakeADBUtils = {\n        discoverDevices: sinon.spy(() => Promise.resolve([\n          'emulator-1', 'emulator-2',\n        ])),\n        discoverInstalledFirefoxAPKs: sinon.spy(() => Promise.resolve([])),\n      };\n\n      await testUsageError({\n        params: {\n          adbDevice: 'emulator-1',\n        },\n        fakeADBUtils,\n      }, ({actualException}) => {\n        sinon.assert.calledOnce(fakeADBUtils.discoverDevices);\n        sinon.assert.calledOnce(fakeADBUtils.discoverInstalledFirefoxAPKs);\n\n        assert.instanceOf(actualException, UsageError);\n        assert.match(\n          actualException && actualException.message,\n          /No Firefox packages were found on the selected Android device/\n        );\n      });\n    });\n\n    it('does not know which Firefox apk to use', async () => {\n      const fakeADBUtils = {\n        discoverDevices: sinon.spy(() => Promise.resolve([\n          'emulator-1', 'emulator-2',\n        ])),\n        discoverInstalledFirefoxAPKs: sinon.spy(() => Promise.resolve([\n          'org.mozilla.fennec', 'org.mozilla.firefox',\n        ])),\n      };\n\n      await testUsageError({\n        params: {\n          adbDevice: 'emulator-1',\n        },\n        fakeADBUtils,\n      }, ({actualException}) => {\n        sinon.assert.calledOnce(fakeADBUtils.discoverDevices);\n        sinon.assert.calledOnce(fakeADBUtils.discoverInstalledFirefoxAPKs);\n\n        assert.instanceOf(actualException, UsageError);\n        assert.match(\n          actualException && actualException.message,\n          /Select one of the packages using --firefox-apk/\n        );\n      });\n    });\n\n    it('cannot find the Firefox apk selected using --firefox-apk value',\n       async () => {\n         const fakeADBUtils = {\n           discoverDevices: sinon.spy(() => Promise.resolve([\n             'emulator-1', 'emulator-2',\n           ])),\n           discoverInstalledFirefoxAPKs: sinon.spy(() => Promise.resolve([\n             'org.mozilla.fennec', 'org.mozilla.firefox',\n           ])),\n         };\n\n         await testUsageError({\n           params: {\n             adbDevice: 'emulator-1',\n             firefoxApk: 'org.mozilla.f',\n           },\n           fakeADBUtils,\n         }, ({actualException}) => {\n           sinon.assert.calledOnce(fakeADBUtils.discoverDevices);\n           sinon.assert.calledOnce(fakeADBUtils.discoverInstalledFirefoxAPKs);\n\n           assert.instanceOf(actualException, UsageError);\n           assert.match(\n             actualException && actualException.message,\n             /Package org.mozilla.f was not found in list:/\n           );\n         });\n       });\n\n  });\n\n  describe('a valid device and Firefox apk has been selected:', () => {\n\n    it('does select a Firefox apk if only one has been found', async () => {\n      const {params, fakeADBUtils} = prepareSelectedDeviceAndAPKParams();\n\n      fakeADBUtils.discoverInstalledFirefoxAPKs = sinon.spy(\n        () => Promise.resolve(['org.mozilla.firefox'])\n      );\n\n      delete params.firefoxApk;\n\n      const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n\n      await runnerInstance.run();\n\n      sinon.assert.calledWithMatch(\n        fakeADBUtils.amForceStopAPK,\n        'emulator-1', 'org.mozilla.firefox'\n      );\n    });\n\n    it('stops any running instances of the selected Firefox apk ' +\n       'and then starts it on the temporary profile',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run();\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.amForceStopAPK,\n           'emulator-1', 'org.mozilla.firefox'\n         );\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.startFirefoxAPK,\n           'emulator-1', 'org.mozilla.firefox',\n           runnerInstance.getDeviceProfileDir()\n         );\n\n         sinon.assert.callOrder(\n           fakeADBUtils.amForceStopAPK,\n           fakeADBUtils.startFirefoxAPK\n         );\n       });\n\n    it('builds and pushes the extension xpi to the android device',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n         const {buildSourceDir, extensions} = params;\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run();\n\n         sinon.assert.calledWithMatch(\n           buildSourceDir,\n           extensions[0].sourceDir\n         );\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.pushFile,\n           'emulator-1',\n           fakeBuiltExtensionPath,\n           `${runnerInstance.selectedArtifactsDir}/${builtFileName}.xpi`\n         );\n\n         sinon.assert.callOrder(buildSourceDir, fakeADBUtils.pushFile);\n       });\n\n    it('discovers the RDP unix socket and forward it on a local tcp port',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run();\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.discoverRDPUnixSocket,\n           'emulator-1', 'org.mozilla.firefox'\n         );\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.setupForward,\n           'emulator-1',\n           `localfilesystem:${runnerInstance.selectedRDPSocketFile}`,\n           `tcp:${runnerInstance.selectedTCPPort}`,\n         );\n\n         sinon.assert.callOrder(\n           fakeADBUtils.discoverRDPUnixSocket,\n           fakeADBUtils.setupForward\n         );\n       });\n\n    it('installs the build extension as a temporarily installed addon',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n         const {firefoxClient} = params;\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run();\n\n         // Test that the android extension runner connects to the\n         // remote debugging server on the tcp port that has been\n         // chosen to forward the android device RDP unix socket file.\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.setupForward,\n           'emulator-1',\n           `localfilesystem:${runnerInstance.selectedRDPSocketFile}`,\n           `tcp:${runnerInstance.selectedTCPPort}`,\n         );\n\n         sinon.assert.calledWithMatch(\n           firefoxClient,\n           {port: runnerInstance.selectedTCPPort}\n         );\n\n         sinon.assert.calledWithMatch(\n           runnerInstance.remoteFirefox.installTemporaryAddon,\n           `${runnerInstance.selectedArtifactsDir}/${builtFileName}.xpi`\n         );\n\n         sinon.assert.callOrder(\n           fakeADBUtils.setupForward,\n           firefoxClient,\n           runnerInstance.remoteFirefox.installTemporaryAddon,\n         );\n       });\n\n    it('raises an error on addonId missing from installTemporaryAddon result',\n       async () => {\n         const {params} = prepareSelectedDeviceAndAPKParams({\n           fakeRemoteFirefox: {\n             installTemporaryAddon: sinon.spy(\n               () => Promise.resolve(tempInstallResultMissingAddonId)\n             ),\n           },\n         });\n\n         const expectedErrorMessage = (\n           /Received an empty addonId from remoteFirefox.installTemporaryAddon/\n         );\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run()\n           .catch((error) => error)\n           .then((error) => {\n             assert.instanceOf(error, WebExtError);\n             assert.match(\n               error && error.message,\n               expectedErrorMessage\n             );\n           });\n       });\n\n    it('reloads all reloadable extensions when reloadAllExtensions is called',\n       async () => {\n         const {params} = prepareSelectedDeviceAndAPKParams();\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run();\n\n         await runnerInstance.reloadAllExtensions();\n\n         sinon.assert.calledOnce(runnerInstance.remoteFirefox.reloadAddon);\n       });\n\n    it('reloads an extension by sourceDir', async () => {\n      const {params} = prepareSelectedDeviceAndAPKParams();\n\n      const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n      await runnerInstance.run();\n\n      await runnerInstance.reloadExtensionBySourceDir(\n        params.extensions[0].sourceDir,\n      );\n\n      sinon.assert.calledOnce(runnerInstance.remoteFirefox.reloadAddon);\n    });\n\n    it('resolves to an array of WebExtError if the extension is not reloadable',\n       async () => {\n         const {params} = prepareSelectedDeviceAndAPKParams();\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run();\n\n         const results = await runnerInstance.reloadExtensionBySourceDir(\n           '/non-existent/source-dir'\n         );\n\n         const error = results[0].reloadError;\n         assert.instanceOf(error, WebExtError);\n         assert.equal(\n           error && error.message,\n           'Extension not reloadable: no addonId has been mapped to ' +\n           '\"/non-existent/source-dir\"'\n         );\n\n         sinon.assert.notCalled(runnerInstance.remoteFirefox.reloadAddon);\n       });\n\n\n    it('resolves an AllExtensionsReloadError if any extension fails to reload',\n       async () => {\n         const {params} = prepareSelectedDeviceAndAPKParams({\n           fakeRemoteFirefox: {\n             reloadAddon: sinon.spy(\n               () => Promise.reject(Error('Reload failure'))\n             ),\n           },\n         });\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         await runnerInstance.run();\n\n         const results = await runnerInstance.reloadAllExtensions();\n\n         const error = results[0].reloadError;\n         assert.instanceOf(error, WebExtError);\n\n         const {sourceDir} = params.extensions[0];\n         assert.ok(error && error.message.includes(\n           `Error on extension loaded from ${sourceDir}: `\n         ));\n\n         sinon.assert.called(runnerInstance.remoteFirefox.reloadAddon);\n       });\n\n    it('cleans the android device state when the exit method is called',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         const cleanupCallback = sinon.spy(() => {\n           throw new Error('cleanup callback error');\n         });\n         const anotherCallback = sinon.spy();\n\n         runnerInstance.registerCleanup(cleanupCallback);\n         runnerInstance.registerCleanup(anotherCallback);\n\n         await runnerInstance.run();\n         await runnerInstance.exit();\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.amForceStopAPK,\n           'emulator-1', params.firefoxApk\n         );\n\n         assert.isString(runnerInstance.selectedArtifactsDir);\n         assert.equal(\n           runnerInstance.selectedArtifactsDir,\n           '/fake/artifacts-dir/'\n         );\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.clearArtifactsDir,\n           'emulator-1'\n         );\n       });\n\n    it('allows user to exit while waiting for the Android Firefox Debugger',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n\n         fakeADBUtils.discoverRDPUnixSocket = sinon.spy(async () => {\n           fakeStdin.emit('keypress', 'c', {name: 'c', ctrl: true});\n\n           sinon.assert.calledOnce(fakeADBUtils.setUserAbortDiscovery);\n           sinon.assert.calledWith(\n             fakeADBUtils.setUserAbortDiscovery\n           );\n\n           // Reject the expected error, if all the assertion passes.\n           throw new UsageError('fake user exit');\n         });\n\n         const fakeStdin = new FakeStdin();\n\n         params.stdin = fakeStdin;\n\n         let actualError;\n\n         try {\n           const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n           await runnerInstance.run();\n         } catch (error) {\n           actualError = error;\n         } finally {\n           fakeStdin.emit('keypress', 'c', {name: 'c', ctrl: true});\n         }\n\n         assert.instanceOf(actualError, UsageError);\n         assert.match(\n           actualError && actualError.message,\n           /fake user exit/\n         );\n       });\n\n    it('rejects on Android Firefox Debugger discovery timeouts',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n\n         fakeADBUtils.discoverRDPUnixSocket = sinon.spy(() => {\n           return Promise.reject(new WebExtError('fake timeout'));\n         });\n\n         params.firefoxAndroidTimeout = 0;\n\n         let actualError;\n\n         try {\n           const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n           await runnerInstance.run();\n         } catch (error) {\n           actualError = error;\n         }\n\n         assert.instanceOf(actualError, WebExtError);\n         assert.match(\n           actualError && actualError.message,\n           /fake timeout/\n         );\n       });\n\n    it('rejects if an extension has never been uploaded on the device',\n       async () => {\n         const {params} = prepareSelectedDeviceAndAPKParams();\n\n         const fakeFirefoxClient = params.firefoxClient;\n\n         let actualError;\n         let runnerInstance;\n\n         params.firefoxClient = sinon.spy((firefoxClientParams) => {\n           // Clear the map of uploaded extensions to fake a missing one.\n           runnerInstance.adbExtensionsPathBySourceDir.clear();\n           return fakeFirefoxClient(firefoxClientParams);\n         });\n\n         try {\n           runnerInstance = new FirefoxAndroidExtensionRunner(params);\n           await runnerInstance.run();\n         } catch (error) {\n           actualError = error;\n         }\n\n         assert.instanceOf(actualError, WebExtError);\n         assert.match(\n           actualError && actualError.message,\n           /ADB extension path for \"(.*)\" was unexpectedly empty/\n         );\n       });\n\n    it('calls the callback registered on cleanup when firefox closes',\n       async () => {\n         const {\n           params, fakeADBUtils,\n         } = prepareSelectedDeviceAndAPKParams();\n\n         const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n         const cleanupCallback = sinon.spy(() => {\n           throw new Error('cleanup callback error');\n         });\n         const anotherCallback = sinon.spy();\n\n         let finalCallback = () => {};\n\n         const waitFinalCallback = new Promise((resolve) => {\n           finalCallback = () => resolve();\n         });\n\n         runnerInstance.registerCleanup(cleanupCallback);\n         runnerInstance.registerCleanup(anotherCallback);\n         runnerInstance.registerCleanup(finalCallback);\n\n         await runnerInstance.run();\n\n         runnerInstance.remoteFirefox.client.emit('end');\n\n         await waitFinalCallback;\n\n         sinon.assert.calledWithMatch(\n           fakeADBUtils.amForceStopAPK,\n           'emulator-1', params.firefoxApk\n         );\n\n         sinon.assert.calledOnce(cleanupCallback);\n         sinon.assert.calledOnce(anotherCallback);\n       });\n\n    it('raises an error when unable to find an android version number',\n       async () => {\n         async function expectInvalidVersionError(version: any) {\n           const {\n             params, fakeADBUtils,\n           } = prepareSelectedDeviceAndAPKParams();\n\n           fakeADBUtils.getAndroidVersionNumber = sinon.spy(() => {\n             return version;\n           });\n\n           const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n           const promise = runnerInstance.run();\n\n           const expectedMsg = `Invalid Android version: ${version}`;\n           await assert.isRejected(promise, WebExtError);\n           await assert.isRejected(promise, expectedMsg);\n         }\n\n         await expectInvalidVersionError(undefined);\n         await expectInvalidVersionError(NaN);\n       });\n\n    it('does not check granted android permissions on Android <= 21',\n       async () => {\n         async function expectNoGrantedPermissionDiscovery(version) {\n           const {\n             params, fakeADBUtils,\n           } = prepareSelectedDeviceAndAPKParams();\n\n           fakeADBUtils.getAndroidVersionNumber = sinon.spy(() => {\n             return Promise.resolve(version);\n           });\n\n           const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n\n           await runnerInstance.run();\n\n           sinon.assert.calledWithMatch(\n             fakeADBUtils.getAndroidVersionNumber,\n             'emulator-1'\n           );\n\n           sinon.assert.notCalled(\n             fakeADBUtils.ensureRequiredAPKRuntimePermissions\n           );\n         }\n\n         // KitKat (Android 4.4).\n         await expectNoGrantedPermissionDiscovery(19);\n         await expectNoGrantedPermissionDiscovery(21);\n         // Lollipop versions (Android 5.0 and 5.1).\n         await expectNoGrantedPermissionDiscovery(22);\n       });\n\n    it('checks the granted android permissions on Android >= 23',\n       async () => {\n         async function testGrantedPermissionDiscovery(version) {\n           const {\n             params, fakeADBUtils,\n           } = prepareSelectedDeviceAndAPKParams();\n\n           fakeADBUtils.getAndroidVersionNumber = sinon.spy(() => {\n             return Promise.resolve(version);\n           });\n\n           const runnerInstance = new FirefoxAndroidExtensionRunner(params);\n\n           await runnerInstance.run();\n\n           sinon.assert.calledWithMatch(\n             fakeADBUtils.getAndroidVersionNumber,\n             'emulator-1'\n           );\n\n           sinon.assert.calledWithMatch(\n             fakeADBUtils.ensureRequiredAPKRuntimePermissions,\n             'emulator-1', 'org.mozilla.firefox', [\n               'android.permission.READ_EXTERNAL_STORAGE',\n               'android.permission.WRITE_EXTERNAL_STORAGE',\n             ]\n           );\n\n           sinon.assert.callOrder(\n             fakeADBUtils.getAndroidVersionNumber,\n             fakeADBUtils.ensureRequiredAPKRuntimePermissions\n           );\n         }\n\n         // Marshmallow (Android 6.0)\n         await testGrantedPermissionDiscovery(23);\n         // Nougat versions (Android 7.0 and 7.1.1)\n         await testGrantedPermissionDiscovery(24);\n         await testGrantedPermissionDiscovery(25);\n       });\n\n    it('logs warnings on the unsupported CLI options', async () => {\n      const params = prepareSelectedDeviceAndAPKParams();\n\n      consoleStream.startCapturing();\n\n      const optionsWarningTestCases = [\n        {\n          params: {profilePath: '/fake/dir'},\n          expectedMessage: (\n            /Android target does not support custom profile paths/\n          ),\n        },\n        {\n          params: {keepProfileChanges: true},\n          expectedMessage: (\n            /Android target does not support --keep-profile-changes/\n          ),\n        },\n        {\n          params: {browserConsole: true},\n          expectedMessage: (\n            /Android target does not support --browser-console/\n          ),\n        },\n        {\n          params: {preInstall: true},\n          expectedMessage: (\n            /Android target does not support --pre-install option/\n          ),\n        },\n        {\n          params: {startUrl: 'http://fake-start-url.org'},\n          expectedMessage: (\n            /Android target does not support --start-url option/\n          ),\n        },\n      ];\n\n      for (const testCase of optionsWarningTestCases) {\n        // $FLOW_IGNORE: allow overriden params for testing purpose.\n        new FirefoxAndroidExtensionRunner({ // eslint-disable-line no-new\n          ...params,\n          ...(testCase.params),\n        });\n\n        assert.match(\n          consoleStream.capturedMessages[0],\n          testCase.expectedMessage\n        );\n\n        consoleStream.flushCapturedLogs();\n      }\n\n      consoleStream.stopCapturing();\n    });\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-extension-runners/test.firefox-android.js","/* @flow */\n\nimport {assert} from 'chai';\nimport {describe, it} from 'mocha';\nimport deepcopy from 'deepcopy';\nimport sinon from 'sinon';\n\nimport {\n  FirefoxDesktopExtensionRunner,\n} from '../../../src/extension-runners/firefox-desktop';\nimport type {\n  FirefoxDesktopExtensionRunnerParams,\n} from '../../../src/extension-runners/firefox-desktop';\nimport {\n  basicManifest,\n  getFakeFirefox,\n  getFakeRemoteFirefox,\n  makeSureItFails,\n  StubChildProcess,\n} from '../helpers';\nimport {\n  onlyInstancesOf,\n  WebExtError,\n  RemoteTempInstallNotSupported,\n} from '../../../src/errors';\n\n// Fake result for client.installTemporaryAddon().then(installResult => ...)\nconst tempInstallResult = {\n  addon: {id: 'some-addon@test-suite'},\n};\n// Fake missing addon id result for client.installTemporaryAddon\nconst tempInstallResultMissingAddonId = {\n  addon: {id: null},\n};\n\ntype PrepareParams = {\n  params?: Object,\n  deps?: Object,\n  fakeFirefoxApp?: Object,\n  fakeRemoteFirefox?: Object,\n  debuggerPort?: number,\n}\n\nfunction prepareExtensionRunnerParams({\n  params, fakeFirefoxApp, fakeRemoteFirefox, debuggerPort,\n}: PrepareParams = {}) {\n  const remoteFirefox = getFakeRemoteFirefox({\n    installTemporaryAddon: sinon.spy(\n      () => Promise.resolve(tempInstallResult)\n    ),\n    ...fakeRemoteFirefox,\n  });\n  const firefoxProcess = new StubChildProcess();\n\n  // $FLOW_IGNORE: allow overriden params for testing purpose.\n  const runnerParams: FirefoxDesktopExtensionRunnerParams = {\n    extensions: [{\n      sourceDir: '/fake/sourceDir',\n      manifestData: deepcopy(basicManifest),\n    }],\n    keepProfileChanges: false,\n    browserConsole: false,\n    startUrl: undefined,\n    firefoxBinary: 'firefox',\n    preInstall: false,\n    firefoxApp: getFakeFirefox({\n      run: sinon.spy(() => {\n        return Promise.resolve({\n          debuggerPort,\n          firefox: firefoxProcess,\n        });\n      }),\n      ...fakeFirefoxApp,\n    }, debuggerPort),\n    firefoxClient: () => {\n      return Promise.resolve(remoteFirefox);\n    },\n    ...(params || {}),\n  };\n\n  return {\n    remoteFirefox,\n    firefoxProcess,\n    params: runnerParams,\n  };\n}\n\ndescribe('util/extension-runners/firefox-desktop', () => {\n\n  it('installs and runs the extension', async () => {\n    const fakeProfile = {};\n    const customPrefs = {};\n    const {params, remoteFirefox} = prepareExtensionRunnerParams({\n      fakeFirefoxApp: {\n        createProfile: sinon.spy(() => fakeProfile),\n      },\n      params: {\n        customPrefs,\n      },\n    });\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    await runnerInstance.run();\n\n    assert.ok(runnerInstance.getName(), 'Firefox Desktop');\n    sinon.assert.calledOnce(remoteFirefox.installTemporaryAddon);\n    sinon.assert.calledWithMatch(remoteFirefox.installTemporaryAddon,\n                                 params.extensions[0].sourceDir);\n\n    sinon.assert.calledOnce(params.firefoxApp.createProfile);\n    sinon.assert.calledWith(params.firefoxApp.createProfile,\n                            sinon.match({customPrefs}));\n\n    sinon.assert.calledOnce(params.firefoxApp.run);\n    sinon.assert.calledWith(\n      params.firefoxApp.run,\n      sinon.match(fakeProfile)\n    );\n  });\n\n  it('runs extension in correct port', async () => {\n    const {params} = prepareExtensionRunnerParams({\n      debuggerPort: 6008,\n    });\n\n    sinon.spy(params, 'firefoxClient');\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    await runnerInstance.run();\n\n    sinon.assert.calledOnce(params.firefoxApp.run);\n    sinon.assert.calledOnce(params.firefoxClient);\n    sinon.assert.calledWith(params.firefoxClient,\n                            sinon.match({port: 6008}));\n  });\n\n  it('suggests --pre-install when remote install not supported', async () => {\n    const {params, remoteFirefox} = prepareExtensionRunnerParams({\n      fakeRemoteFirefox: {\n        // Simulate an older Firefox that will throw this error.\n        installTemporaryAddon: sinon.spy(\n          () => Promise.reject(new RemoteTempInstallNotSupported(''))\n        ),\n      },\n    });\n\n    sinon.spy(params, 'firefoxClient');\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    return runnerInstance.run()\n      .then(makeSureItFails())\n      .catch(onlyInstancesOf(WebExtError, (error) => {\n        sinon.assert.called(remoteFirefox.installTemporaryAddon);\n        assert.match(error.message, /use --pre-install/);\n      }));\n  });\n\n  async function testBinaryArgs(extensionRunnerParams, expectedBinaryArgs) {\n    const {params} = prepareExtensionRunnerParams({\n      params: {\n        ...extensionRunnerParams,\n      },\n    });\n\n    sinon.spy(params, 'firefoxClient');\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    await runnerInstance.run();\n\n    sinon.assert.calledOnce(params.firefoxApp.run);\n    sinon.assert.calledWith(\n      params.firefoxApp.run,\n      sinon.match.any,\n      sinon.match.has(\n        'binaryArgs',\n        sinon.match.array.deepEquals(expectedBinaryArgs)\n      )\n    );\n  }\n\n  it('passes -jsconsole when --browser-console is specified', async () => {\n    await testBinaryArgs({\n      browserConsole: true,\n    }, [\n      '-jsconsole',\n    ]);\n  });\n\n  it('passes single url parameter to Firefox when specified', async () => {\n    await testBinaryArgs({\n      startUrl: 'url1',\n    }, [\n      '--url', 'url1',\n    ]);\n  });\n\n  it('passes multiple url parameters to Firefox when specified', async () => {\n    await testBinaryArgs({\n      startUrl: ['url1', 'url2'],\n    }, [\n      '--url', 'url1', '--url', 'url2',\n    ]);\n  });\n\n  it('passes a custom Firefox profile when specified', async () => {\n    const {params} = prepareExtensionRunnerParams({\n      params: {\n        profilePath: '/path/to/profile',\n      },\n    });\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    await runnerInstance.run();\n\n    sinon.assert.notCalled(params.firefoxApp.createProfile);\n    sinon.assert.notCalled(params.firefoxApp.useProfile);\n    sinon.assert.calledOnce(params.firefoxApp.copyProfile);\n    sinon.assert.calledWith(params.firefoxApp.copyProfile,\n                            sinon.match(params.profilePath));\n  });\n\n  it('keeps changes in custom profile when specified', async () => {\n    const {params} = prepareExtensionRunnerParams({\n      params: {\n        profilePath: '/path/to/profile',\n        keepProfileChanges: true,\n      },\n    });\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    await runnerInstance.run();\n\n    sinon.assert.notCalled(params.firefoxApp.createProfile);\n    sinon.assert.notCalled(params.firefoxApp.copyProfile);\n    sinon.assert.calledOnce(params.firefoxApp.useProfile);\n    sinon.assert.calledWith(params.firefoxApp.useProfile,\n                            sinon.match(params.profilePath));\n  });\n\n  it('can pre-install into the profile before startup', async () => {\n    const fakeProfile = {};\n    const {params, remoteFirefox} = prepareExtensionRunnerParams({\n      fakeFirefoxApp: {\n        copyProfile: () => fakeProfile,\n      },\n      params: {\n        preInstall: true,\n      },\n    });\n\n\n    sinon.spy(params, 'firefoxClient');\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    await runnerInstance.run();\n\n    // Install the extension without connecting to the RDP server.\n\n    sinon.assert.notCalled(params.firefoxClient);\n    sinon.assert.notCalled(remoteFirefox.installTemporaryAddon);\n    sinon.assert.called(params.firefoxApp.installExtension);\n\n    const {manifestData, sourceDir} = params.extensions[0];\n\n    sinon.assert.calledWith(\n      params.firefoxApp.installExtension,\n      sinon.match({\n        asProxy: true,\n        manifestData,\n        profile: fakeProfile,\n        extensionPath: sourceDir,\n      })\n    );\n    // $FLOW_IGNORE: ignored 'property not found' on sinon spy.\n    const install = params.firefoxApp.installExtension.firstCall.args[0];\n\n    assert.equal(install.asProxy, true);\n    assert.equal(install.manifestData.applications.gecko.id,\n                 manifestData.applications &&\n                 manifestData.applications.gecko.id);\n    assert.deepEqual(install.profile, fakeProfile);\n    // This needs to be the source of the extension.\n    assert.equal(install.extensionPath, sourceDir);\n  });\n\n  it('raise an error on addonId missing from installTemporaryAddon result',\n     async () => {\n       const {params} = prepareExtensionRunnerParams({\n         fakeRemoteFirefox: {\n           installTemporaryAddon: sinon.spy(\n             () => Promise.resolve(tempInstallResultMissingAddonId)\n           ),\n         },\n       });\n\n       const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n       await runnerInstance.run()\n         .catch((error) => error)\n         .then((error) => {\n           assert.equal(\n             error instanceof WebExtError,\n             true\n           );\n           assert.equal(\n             error && error.message,\n             'Unexpected missing addonId in the installAsTemporaryAddon result'\n           );\n         });\n     });\n\n  it('calls the callback registered on cleanup when firefox closes',\n     async () => {\n       const {params, firefoxProcess} = prepareExtensionRunnerParams();\n\n       const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n       const cleanupCallback = sinon.spy(() => {\n         throw new Error('cleanup callback error');\n       });\n       const anotherCallback = sinon.spy();\n\n       runnerInstance.registerCleanup(cleanupCallback);\n       runnerInstance.registerCleanup(anotherCallback);\n\n       await runnerInstance.run();\n\n       firefoxProcess.emit('close');\n       await Promise.resolve();\n       sinon.assert.calledOnce(cleanupCallback);\n       sinon.assert.calledOnce(anotherCallback);\n     });\n\n  it('kills Firefox when the exit method is called', async () => {\n    const {params, firefoxProcess} = prepareExtensionRunnerParams();\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    const cleanupCallback = sinon.spy(() => {\n      throw new Error('cleanup callback error');\n    });\n    const anotherCallback = sinon.spy();\n\n    runnerInstance.registerCleanup(cleanupCallback);\n    runnerInstance.registerCleanup(anotherCallback);\n\n    await runnerInstance.run();\n    await runnerInstance.exit();\n\n    sinon.assert.calledOnce(firefoxProcess.kill);\n  });\n\n  it('raises an Error when exit method is called on a non-started runner',\n     async () => {\n       const {params} = prepareExtensionRunnerParams();\n\n       const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n\n       await runnerInstance.exit()\n         .catch((error) => error)\n         .then((error) => {\n           assert.equal(\n             error instanceof WebExtError,\n             true\n           );\n           assert.equal(\n             error && error.message,\n             'No firefox instance is currently running'\n           );\n         });\n     });\n\n  it('reloads all reloadable extensions when reloadAllExtensions is called',\n     async () => {\n       const {params, remoteFirefox} = prepareExtensionRunnerParams();\n\n       const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n       await runnerInstance.run();\n\n       await runnerInstance.reloadAllExtensions();\n\n       sinon.assert.calledOnce(remoteFirefox.reloadAddon);\n     });\n\n  it('reloads an extension by sourceDir', async () => {\n    const {params, remoteFirefox} = prepareExtensionRunnerParams();\n\n    const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n    await runnerInstance.run();\n\n    await runnerInstance.reloadExtensionBySourceDir(\n      params.extensions[0].sourceDir,\n    );\n\n    sinon.assert.calledOnce(remoteFirefox.reloadAddon);\n  });\n\n  it('resolves to an array of WebExtError if the extension is not reloadable',\n     async () => {\n       const {params, remoteFirefox} = prepareExtensionRunnerParams();\n\n       const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n       await runnerInstance.run();\n\n       await runnerInstance.reloadExtensionBySourceDir(\n         '/non-existent/source-dir'\n       ).then((results) => {\n         const error = results[0].reloadError;\n         assert.equal(\n           error instanceof WebExtError,\n           true\n         );\n         assert.equal(\n           error && error.message,\n           'Extension not reloadable: no addonId has been mapped to ' +\n             '\"/non-existent/source-dir\"'\n         );\n       });\n\n       sinon.assert.notCalled(remoteFirefox.reloadAddon);\n     });\n\n  it('resolves to an AllExtensionsReloadError if any extension fails to reload',\n     async () => {\n       const {params, remoteFirefox} = prepareExtensionRunnerParams({\n         fakeRemoteFirefox: {\n           reloadAddon: sinon.spy(\n             () => Promise.reject(Error('Reload failure'))\n           ),\n         },\n       });\n\n       const runnerInstance = new FirefoxDesktopExtensionRunner(params);\n       await runnerInstance.run();\n\n       await runnerInstance.reloadAllExtensions()\n         .then((results) => {\n           const error = results[0].reloadError;\n           assert.equal(\n             error instanceof WebExtError,\n             true\n           );\n           const {sourceDir} = params.extensions[0];\n           assert.ok(error && error.message.includes(\n             `Error on extension loaded from ${sourceDir}: `\n           ));\n         });\n\n       sinon.assert.called(remoteFirefox.reloadAddon);\n     });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-extension-runners/test.firefox-desktop.js","/* @flow */\nimport path from 'path';\n\nimport deepcopy from 'deepcopy';\nimport sinon from 'sinon';\nimport FirefoxProfile from 'firefox-profile';\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\nimport {fs} from 'mz';\n\nimport * as firefox from '../../../src/firefox';\nimport {onlyInstancesOf, UsageError, WebExtError} from '../../../src/errors';\nimport {withTempDir} from '../../../src/util/temp-dir';\nimport {\n  basicManifest,\n  fixturePath,\n  fake,\n  makeSureItFails,\n  TCPConnectError,\n} from '../helpers';\nimport {manifestWithoutApps} from '../test-util/test.manifest';\nimport {RemoteFirefox} from '../../../src/firefox/remote';\nimport type {RemotePortFinderParams} from '../../../src/firefox/index';\n\nconst {defaultFirefoxEnv} = firefox;\n\nfunction withBaseProfile(callback) {\n  return withTempDir(\n    (tmpDir) => {\n      const baseProfile = new FirefoxProfile({\n        destinationDirectory: tmpDir.path(),\n      });\n      return callback(baseProfile);\n    }\n  );\n}\n\nfunction createFakeProfileFinder(profilesDirPath) {\n  const FakeProfileFinder = sinon.spy((...args) => {\n    const finder = new FirefoxProfile.Finder(...args);\n\n    sinon.spy(finder, 'readProfiles');\n\n    return finder;\n  });\n\n  FakeProfileFinder.locateUserDirectory = sinon.spy(() => {\n    return profilesDirPath;\n  });\n\n  return FakeProfileFinder;\n}\n\nasync function createFakeProfilesIni(\n  dirPath: string, profilesDefs: Array<Object>\n): Promise<void> {\n  let content = '';\n\n  for (const [idx, profile] of profilesDefs.entries()) {\n    content += `[Profile${idx}]\\n`;\n    for (const k of Object.keys(profile)) {\n      content += `${k}=${profile[k]}\\n`;\n    }\n    content += '\\n';\n  }\n\n  await fs.writeFile(path.join(dirPath, 'profiles.ini'), content);\n}\n\ndescribe('firefox', () => {\n\n  describe('run', () => {\n\n    const fakeProfile = {\n      path: () => '/dev/null/some-profile-path',\n    };\n\n    const fakeFirefoxProcess = {\n      on: (eventName, callback) => {\n        if (eventName === 'close') {\n          // Immediately \"emit\" a close event to complete the test.\n          callback();\n        }\n      },\n      stdout: {on: () => {}},\n      stderr: {on: () => {}},\n    };\n\n    function createFakeFxRunner(firefoxOverrides = {}) {\n      const fxProcess = {\n        ...deepcopy(fakeFirefoxProcess),\n        ...firefoxOverrides,\n      };\n      return sinon.spy(() => Promise.resolve({args: [], process: fxProcess}));\n    }\n\n    // TODO: This object should accept dynamic properties since those are passed to firefox.run()\n\n    type RunFirefoxOptions = {\n      profile?: typeof FirefoxProfile,\n    }\n\n    function runFirefox(\n      {\n        profile = fakeProfile,\n        ...args\n      }: RunFirefoxOptions = {},\n    ) {\n      return firefox.run(profile, {\n        fxRunner: createFakeFxRunner(),\n        findRemotePort: () => Promise.resolve(6000),\n        ...args,\n      });\n    }\n\n    it('executes the Firefox runner with a given profile', () => {\n      const runner = createFakeFxRunner();\n      const profile = fakeProfile;\n      return runFirefox({fxRunner: runner, profile})\n        .then(() => {\n          sinon.assert.called(runner);\n          assert.equal(runner.firstCall.args[0].profile,\n                       profile.path());\n        });\n    });\n\n    it('starts the remote debugger on a discovered port', () => {\n      const port = 6001;\n      const runner = createFakeFxRunner();\n      const findRemotePort = sinon.spy(() => Promise.resolve(port));\n      return runFirefox({fxRunner: runner, findRemotePort})\n        .then(() => {\n          sinon.assert.called(runner);\n          assert.equal(runner.firstCall.args[0].listen, port);\n        });\n    });\n\n    it('passes binary args to Firefox', () => {\n      const fxRunner = createFakeFxRunner();\n      const binaryArgs = '--safe-mode';\n      return runFirefox({fxRunner, binaryArgs})\n        .then(() => {\n          sinon.assert.called(fxRunner);\n          assert.equal(fxRunner.firstCall.args[0]['binary-args'],\n                       binaryArgs);\n        });\n    });\n\n    it('sets up a Firefox process environment', () => {\n      const runner = createFakeFxRunner();\n      // Make sure it passes through process environment variables.\n      process.env._WEB_EXT_FIREFOX_ENV_TEST = 'thing';\n      return runFirefox({fxRunner: runner})\n        .then(() => {\n          const declaredEnv = runner.firstCall.args[0].env;\n          for (const key in defaultFirefoxEnv) {\n            assert.equal(declaredEnv[key], defaultFirefoxEnv[key]);\n          }\n          assert.equal(declaredEnv._WEB_EXT_FIREFOX_ENV_TEST, 'thing');\n        });\n    });\n\n    it('fails on a firefox error', () => {\n      const someError = new Error('some internal firefox error');\n      const runner = createFakeFxRunner({\n        on: (eventName, callback) => {\n          if (eventName === 'error') {\n            // Immediately \"emit\" an error event.\n            callback(someError);\n          }\n        },\n      });\n\n      return runFirefox({fxRunner: runner})\n        .then(makeSureItFails())\n        .catch((error) => {\n          assert.equal(error.message, someError.message);\n        });\n    });\n\n    it('passes a custom Firefox binary when specified', () => {\n      const runner = createFakeFxRunner();\n      const firefoxBinary = '/pretend/path/to/firefox-bin';\n      return runFirefox({fxRunner: runner, firefoxBinary})\n        .then(() => {\n          sinon.assert.called(runner);\n          sinon.assert.calledWithMatch(runner, {binary: firefoxBinary});\n        });\n    });\n\n    it('logs stdout and stderr without errors', () => {\n      // Store a registry of handlers that we can execute directly.\n      const firefoxApp = {};\n      const runner = createFakeFxRunner({\n        stdout: {\n          on: (event, handler) => {\n            firefoxApp.writeStdout = handler;\n          },\n        },\n        stderr: {\n          on: (event, handler) => {\n            firefoxApp.writeStderr = handler;\n          },\n        },\n      });\n\n      return runFirefox({fxRunner: runner})\n        .then(() => {\n          // This makes sure that when each handler writes to the\n          // logger they don't raise any exceptions.\n          firefoxApp.writeStdout('example of stdout');\n          firefoxApp.writeStderr('example of stderr');\n        });\n    });\n\n  });\n\n  describe('copyProfile', () => {\n\n    it('copies a profile', () => withBaseProfile(\n      (baseProfile) => {\n        baseProfile.setPreference('webext.customSetting', true);\n        baseProfile.updatePreferences();\n\n        return firefox.copyProfile(baseProfile.path(), {\n          configureThisProfile: (profile) => Promise.resolve(profile),\n        })\n          .then((profile) => fs.readFile(profile.userPrefs))\n          .then((userPrefs) => {\n            assert.include(userPrefs.toString(), 'webext.customSetting');\n          });\n      }\n    ));\n\n    it('requires a valid profile directory', () => {\n      // This stubs out the code that looks for a named\n      // profile because on Travis CI there will not be a Firefox\n      // user directory.\n      const copyFromUserProfile = sinon.spy(\n        (config, cb) => cb(new Error('simulated: could not find profile')));\n\n      return firefox.copyProfile(\n        '/dev/null/non_existent_path',\n        {\n          copyFromUserProfile,\n          configureThisProfile: (profile) => Promise.resolve(profile),\n        })\n        .then(makeSureItFails())\n        .catch(onlyInstancesOf(WebExtError, (error) => {\n          assert.equal(copyFromUserProfile.called, true);\n          assert.match(\n            error.message,\n            /Could not copy Firefox profile from .*non_existent_path/);\n        }));\n    });\n\n    it('can copy a profile by name', () => {\n      const name = 'some-fake-firefox-profile-name';\n      // Fake profile object:\n      const profileToCopy = {\n        defaultPreferences: {\n          thing: 'value',\n        },\n      };\n      const copyFromUserProfile = sinon.spy(\n        (config, callback) => callback(null, profileToCopy));\n\n      return firefox.copyProfile(\n        name,\n        {\n          copyFromUserProfile,\n          configureThisProfile: (profile) => Promise.resolve(profile),\n        })\n        .then((profile) => {\n          sinon.assert.called(copyFromUserProfile);\n          sinon.assert.calledWithMatch(copyFromUserProfile, {name});\n          assert.equal(profile.defaultPreferences.thing,\n                       profileToCopy.defaultPreferences.thing);\n        });\n    });\n\n    it('configures the copied profile', () => withBaseProfile(\n      (baseProfile) => {\n        const app = 'fennec';\n        const configureThisProfile =\n          sinon.spy((profile) => Promise.resolve(profile));\n\n        return firefox.copyProfile(baseProfile.path(), {\n          app, configureThisProfile,\n        })\n          .then((profile) => {\n            sinon.assert.called(configureThisProfile);\n            sinon.assert.calledWith(configureThisProfile, profile);\n            assert.equal(configureThisProfile.firstCall.args[1].app, app);\n          });\n      }\n    ));\n\n  });\n\n  describe('isDefaultProfile', () => {\n\n    it('detects common Firefox default profiles specified by name',\n       async () => {\n         const isDefault = await firefox.isDefaultProfile('default');\n         assert.equal(isDefault, true);\n\n         const isDevEditionDefault = await firefox.isDefaultProfile(\n           'dev-edition-default'\n         );\n         assert.equal(isDevEditionDefault, true);\n       });\n\n    it('allows profile name if it is not listed as default in profiles.ini',\n       async () => {\n         return withTempDir(async (tmpDir) => {\n           const profilesDirPath = tmpDir.path();\n           const FakeProfileFinder = createFakeProfileFinder(profilesDirPath);\n\n           await createFakeProfilesIni(profilesDirPath, [\n             {\n               Name: 'manually-set-default',\n               Path: 'fake-default-profile',\n               IsRelative: 1,\n               Default: 1,\n             },\n           ]);\n\n           const isDefault = await firefox.isDefaultProfile(\n             'manually-set-default', FakeProfileFinder\n           );\n           assert.equal(\n             isDefault, true,\n             'Manually configured default profile'\n           );\n\n           const isNotDefault = await firefox.isDefaultProfile(\n             'unkown-profile-name', FakeProfileFinder\n           );\n           assert.equal(\n             isNotDefault, false,\n             'Unknown profile name'\n           );\n         });\n       });\n\n    it('allows profile path if it is not listed as default in profiles.ini',\n       async () => {\n         return withTempDir(async (tmpDir) => {\n           const profilesDirPath = tmpDir.path();\n           const FakeProfileFinder = createFakeProfileFinder(profilesDirPath);\n           const absProfilePath = path.join(\n             profilesDirPath,\n             'fake-manually-default-profile'\n           );\n\n           await createFakeProfilesIni(profilesDirPath, [\n             {\n               Name: 'default',\n               Path: 'fake-default-profile',\n               IsRelative: 1,\n             },\n             {\n               Name: 'dev-edition-default',\n               Path: 'fake-devedition-default-profile',\n               IsRelative: 1,\n             },\n             {\n               Name: 'manually-set-default',\n               Path: absProfilePath,\n               Default: 1,\n             },\n           ]);\n\n           const isFirefoxDefaultPath = await firefox.isDefaultProfile(\n             path.join(profilesDirPath, 'fake-default-profile'),\n             FakeProfileFinder\n           );\n           assert.equal(\n             isFirefoxDefaultPath, true,\n             'Firefox default profile'\n           );\n\n           const isDevEditionDefaultPath = await firefox.isDefaultProfile(\n             path.join(profilesDirPath, 'fake-devedition-default-profile'),\n             FakeProfileFinder\n           );\n           assert.equal(\n             isDevEditionDefaultPath, true,\n             'Firefox DevEdition default profile'\n           );\n\n           const isManuallyDefault = await firefox.isDefaultProfile(\n             absProfilePath,\n             FakeProfileFinder\n           );\n           assert.equal(\n             isManuallyDefault, true,\n             'Manually configured default profile'\n           );\n\n           const isNotDefault = await firefox.isDefaultProfile(\n             path.join(profilesDirPath, 'unkown-profile-dir'),\n             FakeProfileFinder\n           );\n           assert.equal(\n             isNotDefault, false,\n             'Unknown profile path'\n           );\n         });\n       });\n\n    it('allows profile path if there is no profiles.ini file',\n       async () => {\n         return withTempDir(async (tmpDir) => {\n           const profilesDirPath = tmpDir.path();\n           const FakeProfileFinder = createFakeProfileFinder(profilesDirPath);\n\n           const isNotDefault = await firefox.isDefaultProfile(\n             '/tmp/my-custom-profile-dir',\n             FakeProfileFinder\n           );\n\n           assert.equal(isNotDefault, false);\n         });\n       });\n\n    it('rejects on any unexpected error while looking for profiles.ini',\n       async () => {\n         return withTempDir(async (tmpDir) => {\n           const profilesDirPath = tmpDir.path();\n           const FakeProfileFinder = createFakeProfileFinder(profilesDirPath);\n           const fakeFsStat = sinon.spy(() => {\n             return Promise.reject(new Error('Fake fs stat error'));\n           });\n\n           let exception;\n           try {\n             await firefox.isDefaultProfile(\n               '/tmp/my-custom-profile-dir',\n               FakeProfileFinder,\n               fakeFsStat\n             );\n           } catch (error) {\n             exception = error;\n           }\n\n           assert.match(exception && exception.message, /Fake fs stat error/);\n         });\n       }\n    );\n\n  });\n\n  describe('createProfile', () => {\n\n    it('resolves with a profile object', () => {\n      return firefox.createProfile(\n        {configureThisProfile: (profile) => Promise.resolve(profile)})\n        .then((profile) => {\n          assert.instanceOf(profile, FirefoxProfile);\n        });\n    });\n\n    it('creates a Firefox profile', () => {\n      // This is a quick and paranoid sanity check that the FirefoxProfile\n      // object is real and has some preferences.\n      return firefox.createProfile(\n        {configureThisProfile: (profile) => Promise.resolve(profile)})\n        .then((profile) => {\n          profile.updatePreferences();\n          return fs.readFile(path.join(profile.path(), 'user.js'));\n        })\n        .then((prefFile) => {\n          // Check for some default pref set by FirefoxProfile.\n          assert.include(prefFile.toString(),\n                         '\"startup.homepage_welcome_url\", \"about:blank\"');\n        });\n    });\n\n    it('configures a profile', () => {\n      const configureThisProfile =\n        sinon.spy((profile) => Promise.resolve(profile));\n      const app = 'fennec';\n      return firefox.createProfile({app, configureThisProfile})\n        .then((profile) => {\n          sinon.assert.called(configureThisProfile);\n          sinon.assert.calledWith(configureThisProfile, profile);\n          assert.equal(configureThisProfile.firstCall.args[1].app, app);\n        });\n    });\n\n  });\n\n  describe('useProfile', () => {\n    it('rejects to a UsageError when used on a default Firefox profile',\n       async () => {\n         const configureThisProfile = sinon.spy(\n           (profile) => Promise.resolve(profile)\n         );\n         const isFirefoxDefaultProfile = sinon.spy(\n           () => Promise.resolve(true)\n         );\n         let exception;\n\n         try {\n           await firefox.useProfile('default', {\n             configureThisProfile,\n             isFirefoxDefaultProfile,\n           });\n         } catch (error) {\n           exception = error;\n         }\n\n         assert.match(\n           exception && exception.message,\n           /Cannot use --keep-profile-changes on a default profile/\n         );\n       });\n\n    it('resolves to a FirefoxProfile instance', () => withBaseProfile(\n      (baseProfile) => {\n        const configureThisProfile = (profile) => Promise.resolve(profile);\n        return firefox.useProfile(baseProfile.path(), {configureThisProfile})\n          .then((profile) => {\n            assert.instanceOf(profile, FirefoxProfile);\n          });\n      }\n    ));\n\n    it('configures a profile', () => withBaseProfile(\n      (baseProfile) => {\n        const configureThisProfile =\n          sinon.spy((profile) => Promise.resolve(profile));\n        const app = 'fennec';\n        const profilePath = baseProfile.path();\n        return firefox.useProfile(profilePath, {app, configureThisProfile})\n          .then((profile) => {\n            sinon.assert.called(configureThisProfile);\n            sinon.assert.calledWith(configureThisProfile, profile);\n            assert.equal(configureThisProfile.firstCall.args[1].app, app);\n          });\n      }\n    ));\n\n  });\n\n  describe('configureProfile', () => {\n\n    function withTempProfile(callback) {\n      return withTempDir((tmpDir) => {\n        const profile = new FirefoxProfile({\n          destinationDirectory: tmpDir.path(),\n        });\n        return callback(profile);\n      });\n    }\n\n    it('resolves with a profile', () => withTempProfile(\n      (profile) => {\n        const fakePrefGetter = sinon.stub().returns({});\n        return firefox.configureProfile(profile, {getPrefs: fakePrefGetter})\n          .then((configuredProfile) => {\n            assert.instanceOf(configuredProfile, FirefoxProfile);\n          });\n      }\n    ));\n\n    it('sets Firefox preferences', () => withTempProfile(\n      (profile) => {\n        const fakePrefGetter = sinon.stub().returns({});\n        return firefox.configureProfile(profile, {getPrefs: fakePrefGetter})\n          .then(() => {\n            sinon.assert.calledWith(fakePrefGetter, 'firefox');\n          });\n      }\n    ));\n\n    it('sets Fennec preferences', () => withTempProfile(\n      (profile) => {\n        const fakePrefGetter = sinon.stub().returns({});\n        return firefox.configureProfile(\n          profile, {\n            getPrefs: fakePrefGetter,\n            app: 'fennec',\n          })\n          .then(() => {\n            sinon.assert.calledWith(fakePrefGetter, 'fennec');\n          });\n      }\n    ));\n\n    it('writes new preferences', () => withTempProfile(\n      (profile) => {\n        // This is a quick sanity check that real preferences were\n        // written to disk.\n        return firefox.configureProfile(profile)\n          .then((configuredProfile) => {\n            return fs.readFile(path.join(configuredProfile.path(), 'user.js'));\n          })\n          .then((prefFile) => {\n            // Check for some pref set by configureProfile().\n            assert.include(prefFile.toString(),\n                           '\"devtools.debugger.remote-enabled\", true');\n          });\n      }\n    ));\n\n    it('writes custom preferences', () => withTempProfile(\n      (profile) => {\n        const customPrefs = {'extensions.checkCompatibility.nightly': true};\n        return firefox.configureProfile(profile, {customPrefs})\n          .then((configuredProfile) => {\n            return fs.readFile(path.join(configuredProfile.path(), 'user.js'));\n          })\n          .then((prefFile) => {\n            // Check for custom pref set by configureProfile().\n            assert.include(prefFile.toString(),\n                           '\"extensions.checkCompatibility.nightly\", true');\n            // Check that one of the default preferences is set as well\n            assert.include(prefFile.toString(),\n                           '\"devtools.debugger.remote-enabled\", true');\n          });\n      }\n    ));\n\n  });\n\n  describe('installExtension', () => {\n\n    function setUp(testPromise: Function) {\n      return withTempDir(\n        (tmpDir) => {\n          const data = {\n            extensionPath: fixturePath('minimal_extension-1.0.zip'),\n            profile: undefined,\n            profileDir: path.join(tmpDir.path(), 'profile'),\n          };\n          return fs.mkdir(data.profileDir)\n            .then(() => {\n              data.profile = new FirefoxProfile({\n                destinationDirectory: data.profileDir,\n              });\n            })\n            .then(() => testPromise(data));\n        });\n    }\n\n    function installBasicExt(data) {\n      return firefox.installExtension({\n        manifestData: basicManifest,\n        profile: data.profile,\n        extensionPath: data.extensionPath,\n      });\n    }\n\n    it('installs an extension file into a profile', () => setUp(\n      (data) => {\n        return installBasicExt(data)\n          .then(() => fs.readdir(data.profile.extensionsDir))\n          .then((files) => {\n            assert.deepEqual(\n              files, ['basic-manifest@web-ext-test-suite.xpi']);\n          });\n      }\n    ));\n\n    it('requires a manifest ID', () => setUp(\n      (data) => {\n        return firefox.installExtension(\n          {\n            manifestData: manifestWithoutApps,\n            profile: data.profile,\n            extensionPath: data.extensionPath,\n          })\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(UsageError, (error) => {\n            assert.match(error.message,\n                         /explicit extension ID is required/);\n          }));\n      }\n    ));\n\n    it('can install the extension as a proxy', () => setUp(\n      (data) => {\n        const sourceDir = fixturePath('minimal-web-ext');\n        return firefox.installExtension(\n          {\n            manifestData: basicManifest,\n            profile: data.profile,\n            extensionPath: sourceDir,\n            asProxy: true,\n          })\n          .then(() => {\n            const proxyFile = path.join(data.profile.extensionsDir,\n                                        'basic-manifest@web-ext-test-suite');\n            return fs.readFile(proxyFile);\n          })\n          .then((proxyData) => {\n            // The proxy file should contain the path to the extension.\n            assert.equal(proxyData.toString(), sourceDir);\n          });\n      }\n    ));\n\n    it('requires a directory path for proxy installs', () => setUp(\n      (data) => {\n        const extensionPath = fixturePath('minimal_extension-1.0.zip');\n        return firefox.installExtension(\n          {\n            manifestData: basicManifest,\n            profile: data.profile,\n            extensionPath,\n            asProxy: true,\n          })\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(WebExtError, (error) => {\n            assert.match(error.message,\n                         /must be the extension source directory/);\n            assert.include(error.message, extensionPath);\n          }));\n      }\n    ));\n\n    it('re-uses an existing extension directory', () => setUp(\n      (data) => {\n        return fs.mkdir(path.join(data.profile.extensionsDir))\n          .then(() => installBasicExt(data))\n          .then(() => fs.stat(data.profile.extensionsDir));\n      }\n    ));\n\n    it('checks for an empty extensionsDir', () => setUp(\n      (data) => {\n        data.profile.extensionsDir = undefined;\n        return installBasicExt(data)\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(WebExtError, (error) => {\n            assert.match(error.message, /unexpectedly empty/);\n          }));\n      }\n    ));\n\n  });\n\n  describe('defaultRemotePortFinder', () => {\n\n    function findRemotePort({...args}: RemotePortFinderParams = {}) {\n      return firefox.defaultRemotePortFinder({...args});\n    }\n\n    it('resolves to an open port', () => {\n      const connectToFirefox = sinon.spy(\n        () => Promise.reject(new TCPConnectError()));\n      return findRemotePort({connectToFirefox})\n        .then((port) => {\n          assert.isNumber(port);\n        });\n    });\n\n    it('returns a port on first try', () => {\n      const connectToFirefox = sinon.spy(() => new Promise(\n        (resolve, reject) => {\n          reject(\n            new TCPConnectError('first call connection fails - port is free')\n          );\n        }));\n      return findRemotePort({connectToFirefox, retriesLeft: 2})\n        .then((port) => {\n          sinon.assert.calledOnce(connectToFirefox);\n          assert.isNumber(port);\n        });\n    });\n\n    it('cancels search after too many fails', () => {\n      const client = fake(RemoteFirefox.prototype);\n      const connectToFirefox = sinon.spy(() => new Promise(\n        (resolve) => resolve(client)));\n      return findRemotePort({connectToFirefox, retriesLeft: 2})\n        .catch((err) => {\n          assert.equal(err, 'WebExtError: Too many retries on port search');\n          sinon.assert.calledThrice(connectToFirefox);\n        });\n    });\n\n    it('retries port discovery after first failure', () => {\n      const client = fake(RemoteFirefox.prototype);\n      let callCount = 0;\n      const connectToFirefox = sinon.spy(() => {\n        callCount++;\n        return new Promise((resolve, reject) => {\n          if (callCount === 2) {\n            reject(new TCPConnectError('port is free'));\n          } else {\n            resolve(client);\n          }\n        });\n      });\n      return findRemotePort({connectToFirefox, retriesLeft: 2})\n        .then((port) => {\n          assert.isNumber(port);\n          sinon.assert.calledTwice(connectToFirefox);\n        });\n    });\n\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-firefox/test.firefox.js","/* @flow */\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\n\nimport {WebExtError, UsageError} from '../../../src/errors';\nimport {\n  getPrefs, coerceCLICustomPreference, nonOverridablePreferences,\n} from '../../../src/firefox/preferences';\n\n\ndescribe('firefox/preferences', () => {\n\n  describe('getPrefs', () => {\n\n    it('gets Firefox prefs with some defaults', () => {\n      const prefs = getPrefs();\n      // This is a commonly shared pref.\n      assert.equal(prefs['devtools.debugger.remote-enabled'], true);\n      // This is a Firefox only pref.\n      assert.equal(prefs['devtools.chrome.enabled'], true);\n      // This is a Firefox only pref that we set to prevent Firefox\n      // to open the privacy policy info page on every \"web-ext run\".\n      assert.equal(prefs['datareporting.policy.firstRunURL'], '');\n    });\n\n    it('gets Fennec prefs with some defaults', () => {\n      const prefs = getPrefs('fennec');\n      // This is a commonly shared pref.\n      assert.equal(prefs['devtools.debugger.remote-enabled'], true);\n      // This is a Fennec only pref.\n      assert.equal(prefs['browser.console.showInPanel'], true);\n    });\n\n    it('throws an error for unsupported apps', () => {\n      // $FLOW_IGNORE: ignore type errors on testing nonexistent 'thunderbird' prefs\n      assert.throws(() => getPrefs('thunderbird'),\n                    WebExtError, /Unsupported application: thunderbird/);\n    });\n\n  });\n\n  describe('coerceCLICustomPreference', () => {\n\n    it('converts a single --pref cli option from string to object', () => {\n      const prefs = coerceCLICustomPreference(['valid.preference=true']);\n      assert.isObject(prefs);\n      assert.equal(prefs['valid.preference'], true);\n    });\n\n    it('converts array of --pref cli option values into object', () => {\n      const prefs = coerceCLICustomPreference([\n        'valid.preference=true', 'valid.preference2=false',\n      ]);\n      assert.isObject(prefs);\n      assert.equal(prefs['valid.preference'], true);\n      assert.equal(prefs['valid.preference2'], false);\n    });\n\n    it('converts boolean values', () => {\n      const prefs = coerceCLICustomPreference(['valid.preference=true']);\n      assert.equal(prefs['valid.preference'], true);\n    });\n\n    it('converts number values', () => {\n      const prefs = coerceCLICustomPreference(['valid.preference=455']);\n      assert.equal(prefs['valid.preference'], 455);\n    });\n\n    it('converts float values', () => {\n      const prefs = coerceCLICustomPreference(['valid.preference=4.55']);\n      assert.equal(prefs['valid.preference'], '4.55');\n    });\n\n    it('supports string values with \"=\" chars', () => {\n      const prefs = coerceCLICustomPreference(\n        ['valid.preference=value=withequals=chars']\n      );\n      assert.equal(prefs['valid.preference'], 'value=withequals=chars');\n    });\n\n    it('does not allow certain default preferences to be customized', () => {\n      const nonChangeablePrefs = nonOverridablePreferences.map((prop) => {\n        return prop += '=true';\n      });\n      const prefs = coerceCLICustomPreference(nonChangeablePrefs);\n      for (const pref of nonChangeablePrefs) {\n        assert.isUndefined(prefs[pref], `${pref} should be undefined`);\n      }\n    });\n\n    it('throws an error for invalid or incomplete preferences', () => {\n      assert.throws(\n        () => coerceCLICustomPreference(['test.invalid.prop']),\n        UsageError,\n        'Incomplete custom preference: \"test.invalid.prop\". ' +\n        'Syntax expected: \"prefname=prefvalue\".'\n      );\n\n      assert.throws(() => coerceCLICustomPreference(['*&%=true']),\n                    UsageError,\n                    'Invalid custom preference name: *&%');\n    });\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-firefox/test.preferences.js","/* @flow */\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\n\nimport {\n  onlyInstancesOf,\n  RemoteTempInstallNotSupported,\n  UsageError,\n  WebExtError,\n} from '../../../src/errors';\nimport {\n  connect as defaultConnector,\n  connectWithMaxRetries,\n  RemoteFirefox,\n} from '../../../src/firefox/remote';\nimport {\n  fakeFirefoxClient,\n  makeSureItFails,\n  TCPConnectError,\n} from '../helpers';\n\n\ndescribe('firefox.remote', () => {\n\n  describe('connect', () => {\n\n    function prepareConnection(port = undefined, options = {}) {\n      options = {\n        connectToFirefox:\n          sinon.spy(() => Promise.resolve(fakeFirefoxClient())),\n        ...options,\n      };\n      const connect = defaultConnector(port, options);\n      return {options, connect};\n    }\n\n    it('resolves with a RemoteFirefox instance', async () => {\n      const client = await prepareConnection().connect;\n      assert.instanceOf(client, RemoteFirefox);\n    });\n\n    it('connects on the default port', async () => {\n      const {connect, options} = prepareConnection();\n      await connect;\n      sinon.assert.calledWith(options.connectToFirefox, 6005);\n    });\n\n    it('lets you configure the port', async () => {\n      const {connect, options} = prepareConnection(7000);\n      await connect;\n      assert.equal(options.connectToFirefox.args[0], 7000);\n    });\n\n  });\n\n  describe('RemoteFirefox', () => {\n\n    function fakeAddon() {\n      return {id: 'some-id', actor: 'serv1.localhost'};\n    }\n\n    function makeInstance(client = fakeFirefoxClient()) {\n      return new RemoteFirefox(client);\n    }\n\n    it('listens to client events', () => {\n      const client = fakeFirefoxClient();\n      const listener = sinon.spy(() => {});\n      client.client.on = listener;\n      makeInstance(client); // this will register listeners\n      // Make sure no errors are thrown when the client emits\n      // events and calls each handler.\n      listener.firstCall.args[1](); // disconnect\n      listener.secondCall.args[1](); // end\n      listener.thirdCall.args[1]({}); // message\n    });\n\n    describe('disconnect', () => {\n      it('lets you disconnect', () => {\n        const client = fakeFirefoxClient();\n        const conn = makeInstance(client);\n        conn.disconnect();\n\n        sinon.assert.called(client.disconnect);\n      });\n    });\n\n    describe('addonRequest', () => {\n\n      it('makes requests to an add-on actor', async () => {\n        const addon = fakeAddon();\n        const stubResponse = {requestTypes: ['reload']};\n        const client = fakeFirefoxClient({\n          makeRequestResult: stubResponse,\n        });\n\n        const conn = makeInstance(client);\n        const response = await conn.addonRequest(addon, 'requestTypes');\n\n        sinon.assert.called(client.client.makeRequest);\n        sinon.assert.calledWithMatch(\n          client.client.makeRequest,\n          {type: 'requestTypes', to: 'serv1.localhost'});\n\n        assert.deepEqual(response, stubResponse);\n      });\n\n      it('throws when add-on actor requests fail', async () => {\n        const addon = fakeAddon();\n        const client = fakeFirefoxClient({\n          makeRequestError: {\n            error: 'unknownError',\n            message: 'some actor failure',\n          },\n        });\n\n        const conn = makeInstance(client);\n        await conn.addonRequest(addon, 'requestTypes')\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(WebExtError, (error) => {\n            assert.equal(\n              error.message,\n              'unknownError: some actor failure');\n          }));\n      });\n    });\n\n    describe('getInstalledAddon', () => {\n\n      it('gets an installed add-on by ID', async () => {\n        const someAddonId = 'some-id';\n        const client = fakeFirefoxClient({\n          requestResult: {\n            addons: [{id: 'another-id'}, {id: someAddonId}, {id: 'bazinga'}],\n          },\n        });\n        const conn = makeInstance(client);\n        const addon = await conn.getInstalledAddon(someAddonId);\n        assert.equal(addon.id, someAddonId);\n      });\n\n      it('throws an error when the add-on is not installed', async () => {\n        const client = fakeFirefoxClient({\n          requestResult: {\n            addons: [{id: 'one-id'}, {id: 'other-id'}],\n          },\n        });\n        const conn = makeInstance(client);\n        await conn.getInstalledAddon('missing-id')\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(WebExtError, (error) => {\n            assert.match(error.message,\n                         /does not have your extension installed/);\n          }));\n      });\n\n      it('throws an error when listAddons() fails', async () => {\n        const client = fakeFirefoxClient({\n          requestError: new Error('some internal error'),\n        });\n        const conn = makeInstance(client);\n        await conn.getInstalledAddon('some-id')\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(WebExtError, (error) => {\n            assert.equal(\n              error.message,\n              'Remote Firefox: listAddons() error: Error: some internal error');\n          }));\n      });\n    });\n\n    describe('checkForAddonReloading', () => {\n\n      it('checks for reload requestType in remote debugger', async () => {\n        const addon = fakeAddon();\n        const stubResponse = {requestTypes: ['reload']};\n        const conn = makeInstance();\n\n        conn.addonRequest = sinon.spy(() => Promise.resolve(stubResponse));\n\n        const returnedAddon = await conn.checkForAddonReloading(addon);\n        sinon.assert.called(conn.addonRequest);\n        const args = conn.addonRequest.firstCall.args;\n\n        assert.equal(args[0].id, addon.id);\n        assert.equal(args[1], 'requestTypes');\n\n        assert.deepEqual(returnedAddon, addon);\n      });\n\n      it('throws an error if reload is not supported', async () => {\n        const addon = fakeAddon();\n        const stubResponse = {requestTypes: ['install']};\n        const conn = makeInstance();\n\n        conn.addonRequest = () => Promise.resolve(stubResponse);\n\n        await conn.checkForAddonReloading(addon)\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(UsageError, (error) => {\n            assert.match(error.message, /does not support add-on reloading/);\n          }));\n      });\n\n      it('only checks for reloading once', async () => {\n        const addon = fakeAddon();\n        const conn = makeInstance();\n\n        conn.addonRequest =\n          sinon.spy(() => Promise.resolve({requestTypes: ['reload']}));\n        const checkedAddon = await conn.checkForAddonReloading(addon);\n        const finalAddon = await conn.checkForAddonReloading(checkedAddon);\n        // This should remember not to check a second time.\n        sinon.assert.calledOnce(conn.addonRequest);\n        assert.deepEqual(finalAddon, addon);\n      });\n    });\n\n    describe('installTemporaryAddon', () => {\n\n      it('throws listTabs errors', async () => {\n        const client = fakeFirefoxClient({\n          // listTabs response:\n          requestError: new Error('some listTabs error'),\n        });\n        const conn = makeInstance(client);\n        await conn.installTemporaryAddon('/path/to/addon')\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(WebExtError, (error) => {\n            assert.match(error.message, /some listTabs error/);\n          }));\n      });\n\n      it('fails when there is no add-ons actor', async () => {\n        const client = fakeFirefoxClient({\n          // A listTabs response that does not contain addonsActor.\n          requestResult: {},\n        });\n        const conn = makeInstance(client);\n        await conn.installTemporaryAddon('/path/to/addon')\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(RemoteTempInstallNotSupported, (error) => {\n            assert.match(error.message, /does not provide an add-ons actor/);\n          }));\n      });\n\n      it('lets you install an add-on temporarily', async () => {\n        const client = fakeFirefoxClient({\n          // listTabs response:\n          requestResult: {\n            addonsActor: 'addons1.actor.conn',\n          },\n          // installTemporaryAddon response:\n          makeRequestResult: {\n            addon: {id: 'abc123@temporary-addon'},\n          },\n        });\n        const conn = makeInstance(client);\n        const response = await conn.installTemporaryAddon('/path/to/addon');\n        assert.equal(response.addon.id, 'abc123@temporary-addon');\n      });\n\n      it('throws install errors', async () => {\n        const client = fakeFirefoxClient({\n          // listTabs response:\n          requestResult: {\n            addonsActor: 'addons1.actor.conn',\n          },\n          // installTemporaryAddon response:\n          makeRequestError: {\n            error: 'install error',\n            message: 'error message',\n          },\n        });\n        const conn = makeInstance(client);\n        await conn.installTemporaryAddon('/path/to/addon')\n          .then(makeSureItFails())\n          .catch(onlyInstancesOf(WebExtError, (error) => {\n            assert.match(error.message, /install error: error message/);\n          }));\n      });\n\n    });\n\n    describe('reloadAddon', () => {\n\n      it('asks the actor to reload the add-on', async () => {\n        const addon = fakeAddon();\n        const conn = makeInstance();\n\n        conn.getInstalledAddon = sinon.spy(() => Promise.resolve(addon));\n        conn.checkForAddonReloading =\n          (addonToCheck) => Promise.resolve(addonToCheck);\n        conn.addonRequest = sinon.spy(() => Promise.resolve({}));\n\n        await conn.reloadAddon('some-id');\n        sinon.assert.called(conn.getInstalledAddon);\n        sinon.assert.calledWith(conn.getInstalledAddon, 'some-id');\n        sinon.assert.called(conn.addonRequest);\n\n        const requestArgs = conn.addonRequest.firstCall.args;\n        assert.deepEqual(requestArgs[0], addon);\n        assert.equal(requestArgs[1], 'reload');\n      });\n\n      it('makes sure the addon can be reloaded', async () => {\n        const addon = fakeAddon();\n        const conn = makeInstance();\n\n        conn.getInstalledAddon = () => Promise.resolve(addon);\n        conn.checkForAddonReloading =\n          sinon.spy((addonToCheck) => Promise.resolve(addonToCheck));\n\n        await conn.reloadAddon(addon.id);\n\n        sinon.assert.called(conn.checkForAddonReloading);\n        assert.deepEqual(conn.checkForAddonReloading.firstCall.args[0],\n                         addon);\n      });\n\n    });\n\n  });\n\n  describe('connectWithMaxRetries', () => {\n\n    function firefoxClient(opt = {}, deps) {\n      return connectWithMaxRetries({\n        maxRetries: 0, retryInterval: 1, port: 6005, ...opt,\n      }, deps);\n    }\n\n    it('retries after a connection error', async () => {\n      const client = new RemoteFirefox(fakeFirefoxClient());\n      var tryCount = 0;\n      const connectToFirefox = sinon.spy(() => new Promise(\n        (resolve, reject) => {\n          tryCount ++;\n          if (tryCount === 1) {\n            reject(new TCPConnectError('first connection fails'));\n          } else {\n            // The second connection succeeds.\n            resolve(client);\n          }\n        }));\n\n      await firefoxClient({maxRetries: 3}, {connectToFirefox});\n      sinon.assert.calledTwice(connectToFirefox);\n    });\n\n    it('only retries connection errors', async () => {\n      const connectToFirefox = sinon.spy(\n        () => Promise.reject(new Error('not a connection error')));\n\n      await firefoxClient({maxRetries: 2}, {connectToFirefox})\n        .then(makeSureItFails())\n        .catch((error) => {\n          sinon.assert.calledOnce(connectToFirefox);\n          assert.equal(error.message, 'not a connection error');\n        });\n    });\n\n    it('gives up connecting after too many retries', async () => {\n      const connectToFirefox = sinon.spy(\n        () => Promise.reject(new TCPConnectError('failure')));\n\n      await firefoxClient({maxRetries: 2}, {connectToFirefox})\n        .then(makeSureItFails())\n        .catch((error) => {\n          sinon.assert.calledThrice(connectToFirefox);\n          assert.equal(error.message, 'failure');\n        });\n    });\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-firefox/test.remote.js","/* @flow */\n\nimport EventEmitter from 'events';\n\nimport chai from 'chai';\nimport {describe, it} from 'mocha';\nimport sinon from 'sinon';\n\nimport {\n  UsageError,\n  WebExtError,\n} from '../../../src/errors';\nimport ADBUtils from '../../../src/util/adb';\n\nconst fakeADBPackageList = `\npackage:org.mozilla.fennec\npackage:org.mozilla.firefox\npackage:com.some.firefox.fork\npackage:com.some.firefox.fork2\npackage:org.some.other.software\n`;\n\n// NOTE: fake /proc/net/unix output format based on the output collected from\n// an android system.\nconst fakeSocketFilePrefix = (\n  '00000000: 00000003 00000000 00000000 0001 03  1857'\n);\n\nconst fakeRDPUnixSocketFile = (\n  '/data/data/org.mozilla.firefox/firefox-debugger-socket'\n);\n\nconst fakeUnixSocketFiles = (`\n${fakeSocketFilePrefix} /dev/socket/mdns\n${fakeSocketFilePrefix}  ${fakeRDPUnixSocketFile}\n`);\n\n// NOTE: fake 'pm dump <APK>' output related to the granted permissions for an\n// android application.\nconst fakeAndroidGrantedPermissions = `\nandroid.permission.READ_EXTERNAL_STORAGE: granted=true\nandroid.permission.WRITE_EXTERNAL_STORAGE: granted=true\n`;\n\nconst {assert} = chai;\n\nfunction getFakeADBKit(\n  {adbClient = {}, adbkitUtil = {}}: {adbClient: Object, adbkitUtil?: Object}\n) {\n  const fakeTransfer = new EventEmitter();\n  const adbUtilReadAllStub = sinon.stub();\n\n  adbUtilReadAllStub.onCall(0).returns(Promise.resolve(new Buffer('')));\n\n  const fakeADBClient = {\n    listDevices: sinon.spy(() => {\n      return [];\n    }),\n    shell: sinon.spy(() => Promise.resolve('')),\n    startActivity: sinon.spy(() => {}),\n    forward: sinon.spy(() => {}),\n    push: sinon.spy(() => {\n      const originalOn = fakeTransfer.on.bind(fakeTransfer);\n      // $FLOW_IGNORE: ignore flow errors on this testing hack\n      fakeTransfer.on = (event, cb) => {\n        originalOn(event, cb);\n        fakeTransfer.emit('end');\n      };\n      return Promise.resolve(fakeTransfer);\n    }),\n    ...adbClient,\n  };\n\n  return {\n    fakeADBClient,\n    fakeTransfer,\n    createClient: sinon.spy(() => {\n      return fakeADBClient;\n    }),\n    util: {\n      readAll: adbUtilReadAllStub,\n      ...adbkitUtil,\n    },\n  };\n}\n\nfunction createSpawnADBErrorSpy() {\n  return sinon.spy(() => {\n    const fakeADBError = new Error('spawn adb');\n    // $FLOW_FIXME: reuse ErrorWithCode from other tests\n    fakeADBError.code = 'ENOENT';\n    return Promise.reject(fakeADBError);\n  });\n}\n\nasync function testSpawnADBUsageError(\n  {\n    testFn, adbClient, adbkitUtil,\n  }: {\n    testFn: Function, adbClient: Object, adbkitUtil?: Object,\n  }\n) {\n  const adb = getFakeADBKit({adbClient, adbkitUtil});\n  const adbUtils = new ADBUtils({adb});\n\n  const promise = testFn(adbUtils);\n\n  await assert.isRejected(promise, UsageError);\n  await assert.isRejected(promise, /No adb executable has been found/);\n\n  // Return the adb object to allow further assertion on the sinon spies.\n  return adb;\n}\n\ndescribe('utils/adb', () => {\n  describe('discoverDevices', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          listDevices: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.discoverDevices(),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.listDevices);\n    });\n\n    it('resolves the array of the android device ids', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          listDevices: sinon.spy(() => ([{id: 'emulator1'}, {id: 'device2'}])),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.discoverDevices();\n\n      const devices = await assert.isFulfilled(promise);\n      sinon.assert.calledOnce(adb.fakeADBClient.listDevices);\n      assert.deepEqual(devices, ['emulator1', 'device2']);\n    });\n  });\n\n  describe('runShellCommand', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.runShellCommand(\n          'device1', 'test -d /some/dir && echo 1'\n        ),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell, 'device1', 'test -d /some/dir && echo 1'\n      );\n    });\n\n    it('rejects on any unexpected exception', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => {\n            throw new Error('Unexpected error');\n          }),\n        },\n      });\n\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.runShellCommand(\n        'device1', 'test -d /some/dir && echo 1'\n      );\n\n      await assert.isRejected(promise, /Unexpected error/);\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell, 'device1', 'test -d /some/dir && echo 1'\n      );\n    });\n\n    it('resolves the shell command output as a string', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            return Promise.resolve(new Buffer('fake_data_result'));\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.runShellCommand(\n        'device1', 'echo fake_data_result'\n      );\n      const result = await assert.isFulfilled(promise);\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledOnce(adb.util.readAll);\n      assert.equal(result, 'fake_data_result');\n    });\n  });\n\n  describe('discoverInstalledFirefoxAPKs', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.discoverInstalledFirefoxAPKs('device1'),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell, 'device1', ['pm', 'list', 'packages']\n      );\n    });\n\n    it('resolves the array of the installed firefox APKs', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            return Promise.resolve(new Buffer(fakeADBPackageList));\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.discoverInstalledFirefoxAPKs('device1');\n      const packages = await assert.isFulfilled(promise);\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledOnce(adb.util.readAll);\n      assert.deepEqual(packages, ['org.mozilla.fennec', 'org.mozilla.firefox']);\n    });\n\n    it('resolves the given firefox APK with exact package name', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            return Promise.resolve(Buffer.from(fakeADBPackageList));\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.discoverInstalledFirefoxAPKs(\n        'device1',\n        'com.some.firefox.fork'\n      );\n      const packages = await assert.isFulfilled(promise);\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledOnce(adb.util.readAll);\n      assert.deepEqual(packages, ['com.some.firefox.fork']);\n    });\n  });\n\n  describe('getAndroidVersionNumber', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.getAndroidVersionNumber('device1'),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell, 'device1', ['getprop', 'ro.build.version.sdk']\n      );\n    });\n\n    it('rejects a WebExtError when unable to return a number', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            return Promise.resolve(\n              new Buffer('UnexpectedNaN')\n            );\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.getAndroidVersionNumber('device1');\n\n      await assert.isRejected(promise, WebExtError);\n      await assert.isRejected(\n        promise, 'Unable to discovery android version on device1: UnexpectedNaN'\n      );\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell, 'device1', ['getprop', 'ro.build.version.sdk']\n      );\n    });\n\n    it('resolves the android version number', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            return Promise.resolve(\n              new Buffer('21')\n            );\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.getAndroidVersionNumber('device1');\n\n      const versionNumber = await assert.isFulfilled(promise);\n      assert.equal(versionNumber, 21);\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell, 'device1', ['getprop', 'ro.build.version.sdk']\n      );\n    });\n  });\n\n  describe('ensureRequiredAPKRuntimePermissions', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.ensureRequiredAPKRuntimePermissions(\n          'device1', 'org.mozilla.firefox', [\n            'android.permission.READ_EXTERNAL_STORAGE',\n            'android.permission.WRITE_EXTERNAL_STORAGE',\n          ]\n        ),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell,\n        'device1', ['pm', 'dump', 'org.mozilla.firefox']\n      );\n    });\n\n    it('rejects an UsageError when a required permission has not been granted',\n       async () => {\n         const adb = getFakeADBKit({\n           adbClient: {\n             shell: sinon.spy(() => Promise.resolve('')),\n           },\n           adbkitUtil: {\n             readAll: sinon.spy(() => {\n               return Promise.resolve(\n                 // No granted permissions in the output.\n                 new Buffer('')\n               );\n             }),\n           },\n         });\n         const adbUtils = new ADBUtils({adb});\n\n         const permissions = [\n           'android.permission.READ_EXTERNAL_STORAGE',\n           'android.permission.WRITE_EXTERNAL_STORAGE',\n         ];\n         const promise = adbUtils.ensureRequiredAPKRuntimePermissions(\n           'device1', 'org.mozilla.firefox', permissions\n         );\n\n         await assert.isRejected(promise, UsageError);\n         await assert.isRejected(\n           promise,\n           new RegExp(`Required ${permissions[0]} has not be granted`)\n         );\n\n         sinon.assert.calledOnce(adb.fakeADBClient.shell);\n         sinon.assert.calledWith(\n           adb.fakeADBClient.shell,\n           'device1', ['pm', 'dump', 'org.mozilla.firefox']\n         );\n       });\n\n    it('does not reject when all the required permissions have been granted',\n       async () => {\n         const adb = getFakeADBKit({\n           adbClient: {\n             shell: sinon.spy(() => Promise.resolve('')),\n           },\n           adbkitUtil: {\n             readAll: sinon.spy(() => {\n               return Promise.resolve(\n                 new Buffer(fakeAndroidGrantedPermissions)\n               );\n             }),\n           },\n         });\n         const adbUtils = new ADBUtils({adb});\n\n         const promise = adbUtils.ensureRequiredAPKRuntimePermissions(\n           'device1', 'org.mozilla.firefox', [\n             'android.permission.READ_EXTERNAL_STORAGE',\n             'android.permission.WRITE_EXTERNAL_STORAGE',\n           ]\n         );\n\n         await assert.isFulfilled(promise);\n         sinon.assert.calledOnce(adb.fakeADBClient.shell);\n         sinon.assert.calledWith(\n           adb.fakeADBClient.shell,\n           'device1', ['pm', 'dump', 'org.mozilla.firefox']\n         );\n       });\n  });\n\n  describe('amForceStopAPK', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.amForceStopAPK(\n          'device1', 'org.mozilla.firefox'\n        ),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWith(\n        adb.fakeADBClient.shell,\n        'device1', ['am', 'force-stop', 'org.mozilla.firefox']\n      );\n    });\n\n    it('does not reject when \"am force-stop\" has been called successfully',\n       async () => {\n         const adb = getFakeADBKit({\n           adbClient: {\n             shell: sinon.spy(() => Promise.resolve('')),\n           },\n         });\n         const adbUtils = new ADBUtils({adb});\n\n         const promise = adbUtils.amForceStopAPK(\n           'device1', 'org.mozilla.firefox'\n         );\n\n         await assert.isFulfilled(promise);\n         sinon.assert.calledOnce(adb.fakeADBClient.shell);\n         sinon.assert.calledWith(\n           adb.fakeADBClient.shell,\n           'device1', ['am', 'force-stop', 'org.mozilla.firefox']\n         );\n       });\n  });\n\n  describe('getOrCreateArtifactsDir', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.getOrCreateArtifactsDir('device1'),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell, 'device1', /test -d (.*) ; echo \\$\\?/\n      );\n    });\n\n    it('rejects a WebExtError if the artifact dir path exists', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => Promise.resolve(new Buffer('0\\n'))),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.getOrCreateArtifactsDir('device1');\n\n      await assert.isRejected(promise, WebExtError);\n      await assert.isRejected(\n        promise,\n        /Cannot create artifacts directory (.*) because it exists on (.*)/\n      );\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell, 'device1', /test -d (.*) ; echo \\$\\?/\n      );\n    });\n\n    it('resolves to the android artifacts dir path', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => Promise.resolve(new Buffer('1\\n'))),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.getOrCreateArtifactsDir('device1');\n\n      const result = await assert.isFulfilled(promise);\n\n      assert.match(result, /^\\/sdcard\\/web-ext-artifacts-/);\n\n      sinon.assert.calledTwice(adb.fakeADBClient.shell);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell, 'device1', `test -d ${result} ; echo $?`\n      );\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell, 'device1', ['mkdir', '-p', result]\n      );\n    });\n\n    it('does not create a new artifact dir if it has been already created',\n       async () => {\n         const adb = getFakeADBKit({\n           adbClient: {\n             shell: sinon.spy(() => Promise.resolve('')),\n           },\n           adbkitUtil: {\n             readAll: sinon.spy(() => Promise.resolve(new Buffer('1\\n'))),\n           },\n         });\n         const adbUtils = new ADBUtils({adb});\n\n         // Add an artifact dir to the adbUtils internal map.\n         const fakeArtifactsDir = '/sdcard/web-ext-artifacts-already-created';\n         adbUtils.artifactsDirMap.set('device1', fakeArtifactsDir);\n\n         const promise = adbUtils.getOrCreateArtifactsDir('device1');\n\n         const result = await assert.isFulfilled(promise);\n         assert.equal(result, fakeArtifactsDir);\n\n         sinon.assert.notCalled(adb.fakeADBClient.shell);\n       });\n  });\n\n  describe('clearArtifactsDir', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => {\n          adbUtils.artifactsDirMap.set(\n            'device1', '/sdcard/webext-artifacts-fake'\n          );\n          return adbUtils.clearArtifactsDir('device1');\n        },\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell, 'device1',\n        ['rm', '-rf', '/sdcard/webext-artifacts-fake']\n      );\n    });\n\n    it('removes the directory if it has been previously created', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => Promise.resolve(new Buffer('\\n'))),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      adbUtils.artifactsDirMap.set('device1', '/sdcard/webext-artifacts-fake');\n      const promise = adbUtils.clearArtifactsDir('device1');\n\n      await assert.isFulfilled(promise);\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell, 'device1',\n        ['rm', '-rf', '/sdcard/webext-artifacts-fake']\n      );\n    });\n\n    it('is a no-op if no artifacts dir has been previously created',\n       async () => {\n         const adb = getFakeADBKit({\n           adbClient: {\n             shell: sinon.spy(() => Promise.resolve('')),\n           },\n         });\n         const adbUtils = new ADBUtils({adb});\n\n         const promise = adbUtils.clearArtifactsDir('device1');\n\n         await assert.isFulfilled(promise);\n\n         sinon.assert.notCalled(adb.fakeADBClient.shell);\n       });\n  });\n\n  describe('pushFile', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          push: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => adbUtils.pushFile(\n          'device1', '/fake/src', '/fake/dest'\n        ),\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.push);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.push, 'device1',\n        '/fake/src', '/fake/dest'\n      );\n    });\n\n    it('resolves when the file has been completely transfered', async () => {\n      const fakeTransfer = new EventEmitter();\n      const fakeTransferPromise = Promise.resolve(fakeTransfer);\n      const adb = getFakeADBKit({\n        adbClient: {\n          push: sinon.spy(() => fakeTransferPromise),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.pushFile(\n        'device1', '/fake/local/path', '/fake/remote/path'\n      );\n\n      await fakeTransferPromise;\n      fakeTransfer.emit('end');\n\n      await assert.isFulfilled(promise);\n\n      sinon.assert.calledOnce(adb.fakeADBClient.push);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.push,\n        'device1', '/fake/local/path', 'fake/remote/path'\n      );\n    });\n  });\n\n  describe('startFirefoxAPK', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          startActivity: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => {\n          return adbUtils.startFirefoxAPK(\n            'device1',\n            'org.mozilla.firefox_mybuild', '/fake/custom/profile/path'\n          );\n        },\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.startActivity);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.startActivity, 'device1', {\n          action: 'android.activity.MAIN',\n          component: 'org.mozilla.firefox_mybuild/.App',\n          extras: [{\n            key: 'args',\n            value: '-profile /fake/custom/profile/path',\n          }],\n          wait: true,\n        }\n      );\n    });\n\n    it('starts the given Firefox APK on a custom profile', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          startActivity: sinon.spy(() => Promise.resolve()),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => Promise.resolve(new Buffer('\\n'))),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.startFirefoxAPK(\n        'device1', 'org.mozilla.firefox_mybuild', '/fake/custom/profile/path'\n      );\n\n      await assert.isFulfilled(promise);\n\n      sinon.assert.calledOnce(adb.fakeADBClient.startActivity);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.startActivity, 'device1', {\n          action: 'android.activity.MAIN',\n          component: 'org.mozilla.firefox_mybuild/.App',\n          extras: [{\n            key: 'args',\n            value: '-profile /fake/custom/profile/path',\n          }],\n          wait: true,\n        }\n      );\n    });\n  });\n\n  describe('discoverRDPUnixSocket', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          shell: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => {\n          return adbUtils.discoverRDPUnixSocket(\n            'device1', 'org.mozilla.firefox_mybuild'\n          );\n        },\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell,\n        'device1',\n        ['cat', '/proc/net/unix']\n      );\n    });\n\n    it('rejects an UsageError on setUserAbortDiscovery call', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            return Promise.resolve(\n              new Buffer('')\n            );\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.discoverRDPUnixSocket(\n        'device1', 'org.mozilla.firefox_mybuild'\n      );\n\n      adbUtils.setUserAbortDiscovery(true);\n\n      await assert.isRejected(promise, UsageError);\n      await assert.isRejected(\n        promise,\n        'Exiting Firefox Remote Debugging socket discovery on user request'\n      );\n\n      sinon.assert.calledOnce(adb.fakeADBClient.shell);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.shell,\n        'device1',\n        ['cat', '/proc/net/unix']\n      );\n    });\n\n    it('rejects a WebExtError on timeouts', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve('')),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            return Promise.resolve(\n              new Buffer('')\n            );\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const maxDiscoveryTime = 50;\n      const retryInterval = 10;\n\n      const promise = adbUtils.discoverRDPUnixSocket(\n        'device1', 'org.mozilla.firefox_mybuild', {\n          maxDiscoveryTime,\n          retryInterval,\n        }\n      );\n\n      await assert.isRejected(promise, WebExtError);\n      await assert.isRejected(\n        promise, 'Timeout while waiting for the Android Firefox Debugger Socket'\n      );\n\n      sinon.assert.called(adb.fakeADBClient.shell);\n      sinon.assert.alwaysCalledWithMatch(\n        adb.fakeADBClient.shell,\n        'device1',\n        ['cat', '/proc/net/unix']\n      );\n    });\n\n    it('rejects a WebExtError if more than one RDP socket have been found',\n       async () => {\n         const adb = getFakeADBKit({\n           adbClient: {\n             shell: sinon.spy(() => Promise.resolve()),\n           },\n           adbkitUtil: {\n             readAll: sinon.spy(() => {\n               // Fake unexpected multiple RDP socket matches.\n               return Promise.resolve(\n                 new Buffer(`${fakeUnixSocketFiles}${fakeUnixSocketFiles}`)\n               );\n             }),\n           },\n         });\n         const adbUtils = new ADBUtils({adb});\n\n         const promise = adbUtils.discoverRDPUnixSocket(\n           'device1', 'org.mozilla.firefox'\n         );\n\n         await assert.isRejected(promise, WebExtError);\n         await assert.isRejected(promise, /Unexpected multiple RDP sockets/);\n\n         sinon.assert.calledOnce(adb.fakeADBClient.shell);\n         sinon.assert.calledWithMatch(\n           adb.fakeADBClient.shell,\n           'device1',\n           ['cat', '/proc/net/unix']\n         );\n       });\n\n    it('resolves the android RDP unix socket path', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve()),\n        },\n        adbkitUtil: {\n          readAll: sinon.spy(() => {\n            // Fake unexpected multiple RDP socket matches.\n            return Promise.resolve(\n              new Buffer(fakeUnixSocketFiles)\n            );\n          }),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.discoverRDPUnixSocket(\n        'device1', 'org.mozilla.firefox'\n      );\n\n      const result = await assert.isFulfilled(promise);\n\n      assert.equal(result, fakeRDPUnixSocketFile);\n    });\n  });\n\n  describe('setupForward', () => {\n    it('rejects an UsageError on adb binary not found', async () => {\n      const adb = await testSpawnADBUsageError({\n        adbClient: {\n          forward: createSpawnADBErrorSpy(),\n        },\n        testFn: (adbUtils) => {\n          return adbUtils.setupForward(\n            'device1', 'remote:fake', 'local:fake'\n          );\n        },\n      });\n\n      sinon.assert.calledOnce(adb.fakeADBClient.forward);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.forward,\n        'device1', 'local:fake', 'remote:fake'\n      );\n    });\n\n    it('configures an adb forwarding for a given device', async () => {\n      const adb = getFakeADBKit({\n        adbClient: {\n          shell: sinon.spy(() => Promise.resolve()),\n        },\n      });\n      const adbUtils = new ADBUtils({adb});\n\n      const promise = adbUtils.setupForward(\n        'device1', 'remote:fake', 'local:fake'\n      );\n\n      await assert.isFulfilled(promise);\n\n      sinon.assert.calledOnce(adb.fakeADBClient.forward);\n      sinon.assert.calledWithMatch(\n        adb.fakeADBClient.forward,\n        'device1', 'local:fake', 'remote:fake'\n      );\n    });\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.adb.js","/* @flow */\nimport path from 'path';\n\nimport {it, describe} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\nimport {fs} from 'mz';\n\n\nimport {onlyInstancesOf, UsageError} from '../../../src/errors';\nimport {withTempDir} from '../../../src/util/temp-dir';\nimport {prepareArtifactsDir} from '../../../src/util/artifacts';\nimport {makeSureItFails, ErrorWithCode} from '../helpers';\n\n\ndescribe('prepareArtifactsDir', () => {\n\n  it('creates an artifacts dir if needed', () => withTempDir(\n    (tmpDir) => {\n      const artifactsDir = path.join(tmpDir.path(), 'build');\n      return prepareArtifactsDir(artifactsDir)\n        .then(() => {\n          // This should not throw an error if created properly.\n          return fs.stat(artifactsDir);\n        });\n    }\n  ));\n\n  it('ignores existing artifacts dir', () => withTempDir(\n    (tmpDir) =>\n      prepareArtifactsDir(tmpDir.path())\n        .then(() => {\n          // Make sure everything is still cool with this path.\n          return fs.stat(tmpDir.path());\n        })\n  ));\n\n  it('ensures the path is really a directory', () => withTempDir(\n    (tmpDir) => {\n      const someFile = path.join(tmpDir.path(), 'some-file.txt');\n      return fs.writeFile(someFile, 'some content')\n        .then(() => prepareArtifactsDir(someFile))\n        .then(makeSureItFails())\n        .catch(onlyInstancesOf(UsageError, (error) => {\n          assert.match(error.message, /not a directory/);\n        }));\n    }\n  ));\n\n  it('resolves with the artifacts dir', () => withTempDir(\n    (tmpDir) => {\n      const artifactsDir = path.join(tmpDir.path(), 'artifacts');\n      return prepareArtifactsDir(artifactsDir)\n        .then((resolvedDir) => {\n          assert.equal(resolvedDir, artifactsDir);\n        });\n    }\n  ));\n\n  it('throws an UsageError when it lacks permissions to stat the directory',\n     function() {\n       return withTempDir(\n         (tmpDir) => {\n           if (process.platform === 'win32') {\n             this.skip();\n             return;\n           }\n           const tmpPath = path.join(tmpDir.path(), 'build');\n           return fs.mkdir(tmpPath, '0622').then(() => {\n             const artifactsDir = path.join(tmpPath, 'artifacts');\n             return prepareArtifactsDir(artifactsDir)\n               .then(makeSureItFails())\n               .catch(onlyInstancesOf(UsageError, (error) => {\n                 assert.match(error.message,\n                              /Cannot access.*lacks permissions/);\n               }));\n           });\n         }\n       );\n     });\n\n  it('throws error when directory exists but lacks writing permissions',\n     function() {\n       return withTempDir(\n         (tmpDir) => {\n           if (process.platform === 'win32') {\n             this.skip();\n             return;\n           }\n           const artifactsDir = path.join(tmpDir.path(), 'dir-nowrite');\n           return fs.mkdir(artifactsDir, '0555').then(() => {\n             return prepareArtifactsDir(artifactsDir)\n               .then(makeSureItFails())\n               .catch(onlyInstancesOf(UsageError, (error) => {\n                 assert.match(error.message, /exists.*lacks permissions/);\n               }));\n           });\n         }\n       );\n     });\n\n  it('throws error when creating a folder if lacks writing permissions',\n     function() {\n       return withTempDir(\n         (tmpDir) => {\n           if (process.platform === 'win32') {\n             this.skip();\n             return;\n           }\n           const parentDir = path.join(tmpDir.path(), 'dir-nowrite');\n           const artifactsDir = path.join(parentDir, 'artifacts');\n           return fs.mkdir(parentDir, '0555').then(() => {\n             return prepareArtifactsDir(artifactsDir)\n               .then(makeSureItFails())\n               .catch(onlyInstancesOf(UsageError, (error) => {\n                 assert.match(error.message,\n                              /Cannot create.*lacks permissions/);\n               }));\n           });\n         }\n       );\n     });\n\n  it('creates the artifacts dir successfully if the parent dir does not exist',\n     () => withTempDir(\n       (tmpDir) => {\n         const tmpPath = path.join(tmpDir.path(), 'build', 'subdir');\n         return prepareArtifactsDir(tmpPath)\n           .then((resolvedDir) => {\n             assert.equal(resolvedDir, tmpPath);\n           });\n       }\n     ));\n\n  it('throws error when creating a folder if there is not enough space',\n     () => withTempDir(\n       (tmpDir) => {\n         const fakeAsyncMkdirp = sinon.spy(\n           () => Promise.reject(new ErrorWithCode('ENOSPC', 'an error'))\n         );\n         const tmpPath = path.join(tmpDir.path(), 'build', 'subdir');\n         return prepareArtifactsDir(tmpPath, {asyncMkdirp: fakeAsyncMkdirp})\n           .then(makeSureItFails(), (error) => {\n             sinon.assert.called(fakeAsyncMkdirp);\n             assert.equal(error.message, 'ENOSPC: an error');\n           });\n       }\n     ));\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.artifacts.js","/* @flow */\nimport {it, describe} from 'mocha';\nimport sinon from 'sinon';\n\nimport {showDesktopNotification} from '../../../src/util/desktop-notifier';\nimport {createLogger} from '../../../src/util/logger';\nimport {makeSureItFails} from '../helpers';\n\ndescribe('util/desktop-notifier', () => {\n  describe('desktopNotifications()', () => {\n    const expectedNotification = {\n      title: 'web-ext run: title',\n      message: 'message',\n    };\n\n    it('is called and creates a message with correct parameters', () => {\n      const fakeNotifier = {\n        notify: sinon.spy((options, callback) => callback()),\n      };\n      return showDesktopNotification(expectedNotification, {\n        notifier: fakeNotifier,\n      })\n        .then(() => {\n          sinon.assert.calledWithMatch(\n            fakeNotifier.notify, {\n              title: 'web-ext run: title',\n              message: 'message',\n            }\n          );\n        });\n    });\n\n    it('logs error when notifier fails', () => {\n      const expectedError = new Error('an error');\n      const fakeLog = createLogger(__filename);\n      sinon.spy(fakeLog, 'debug');\n      const fakeNotifier = {\n        notify: (obj, callback) => {\n          callback(expectedError, 'response');\n        },\n      };\n\n      return showDesktopNotification(expectedNotification, {\n        notifier: fakeNotifier,\n        log: fakeLog,\n      })\n        .then(makeSureItFails())\n        .catch(() => {\n          sinon.assert.calledWith(\n            fakeLog.debug,\n            `Desktop notifier error: ${expectedError.message}, ` +\n            'response: response');\n        });\n    });\n\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.desktop-notifier.js","/* @flow */\nimport path from 'path';\n\nimport {assert} from 'chai';\nimport {describe, it} from 'mocha';\nimport {fs} from 'mz';\n\nimport fileExists from '../../../src/util/file-exists';\nimport {withTempDir} from '../../../src/util/temp-dir';\nimport {makeSureItFails, ErrorWithCode} from '../helpers';\n\n\ndescribe('util/file-exists', () => {\n  it('returns true for existing files', () => {\n    return withTempDir(\n      async (tmpDir) => {\n        const someFile = path.join(tmpDir.path(), 'file.txt');\n        await fs.writeFile(someFile, '');\n\n        assert.equal(await fileExists(someFile), true);\n      });\n  });\n\n  it('returns false for non-existent files', () => {\n    return withTempDir(\n      async (tmpDir) => {\n        // This file does not exist.\n        const someFile = path.join(tmpDir.path(), 'file.txt');\n\n        assert.equal(await fileExists(someFile), false);\n      });\n  });\n\n  it('returns false for directories', () => {\n    return withTempDir(\n      async (tmpDir) => {\n        assert.equal(await fileExists(tmpDir.path()), false);\n      });\n  });\n\n  it('returns false for unreadable files', async () => {\n    const exists = await fileExists('pretend/unreadable/file', {\n      fileIsReadable: async () => {\n        throw new ErrorWithCode('EACCES', 'permission denied');\n      },\n    });\n    assert.equal(exists, false);\n  });\n\n  it('throws unexpected errors', async () => {\n    const exists = fileExists('pretend/file', {\n      fileIsReadable: async () => {\n        throw new ErrorWithCode('EBUSY', 'device is busy');\n      },\n    });\n    await exists.then(makeSureItFails(), (error) => {\n      assert.equal(error.message, 'EBUSY: device is busy');\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.file-exists.js","/* @flow */\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\n\nimport {FileFilter, isSubPath} from '../../../src/util/file-filter';\n\ndescribe('util/file-filter', () => {\n\n  const newFileFilter = (params = {}) => {\n    return new FileFilter({\n      sourceDir: '.',\n      ...params,\n    });\n  };\n\n  describe('default', () => {\n    const defaultFilter = newFileFilter();\n\n    it('ignores long XPI paths', () => {\n      assert.equal(defaultFilter.wantFile('path/to/some.xpi'), false);\n    });\n\n    it('ignores short XPI paths', () => {\n      assert.equal(defaultFilter.wantFile('some.xpi'), false);\n    });\n\n    it('ignores .git directories', () => {\n      assert.equal(defaultFilter.wantFile('.git'), false);\n    });\n\n    it('ignores nested .git directories', () => {\n      assert.equal(defaultFilter.wantFile('path/to/.git'), false);\n    });\n\n    it('ignores any hidden file', () => {\n      assert.equal(defaultFilter.wantFile('.whatever'), false);\n    });\n\n    it('ignores subdirectories within hidden folders', () => {\n      assert.equal(defaultFilter.wantFile('.git/some/other/stuff'), false);\n    });\n\n    it('ignores ZPI paths', () => {\n      assert.equal(defaultFilter.wantFile('path/to/some.zip'), false);\n    });\n\n    it('allows other files', () => {\n      assert.equal(defaultFilter.wantFile('manifest.json'), true);\n    });\n\n    it('ignores node_modules by default', () => {\n      assert.equal(defaultFilter.wantFile('path/to/node_modules'), false);\n    });\n\n    it('ignores module content within node_modules by default', () => {\n      assert.equal(defaultFilter.wantFile('node_modules/something/file.js'),\n                   false);\n    });\n\n  });\n\n  describe('options', () => {\n\n    it('override the defaults with baseIgnoredPatterns', () => {\n      const filter = newFileFilter({\n        baseIgnoredPatterns: ['manifest.json'],\n      });\n      assert.equal(filter.wantFile('some.xpi'), true);\n      assert.equal(filter.wantFile('manifest.json'), false);\n    });\n\n    it('add more files to ignore with ignoreFiles', () => {\n      const filter = newFileFilter({\n        ignoreFiles: ['*.log'],\n      });\n      assert.equal(filter.wantFile('some.xpi'), false);\n      assert.equal(filter.wantFile('some.log'), false);\n    });\n\n    it('ignore artifactsDir and its content', () => {\n      const filter = newFileFilter({\n        artifactsDir: 'artifacts',\n      });\n      assert.equal(filter.wantFile('artifacts'), false);\n      assert.equal(filter.wantFile('artifacts/some.js'), false);\n    });\n\n    it('does not ignore an artifactsDir outside of sourceDir', () => {\n      const filter = newFileFilter({\n        artifactsDir: '.',\n        sourceDir: 'dist',\n      });\n      assert.equal(filter.wantFile('file'), true);\n      assert.equal(filter.wantFile('dist/file'), true);\n    });\n\n    it('resolve relative path', () => {\n      const filter = newFileFilter({\n        sourceDir: '/src',\n        artifactsDir: 'artifacts',\n        ignoreFiles: [\n          'ignore-dir/', 'some.js', '**/some.log', 'ignore/dir/content/**/*',\n        ],\n      });\n      assert.equal(filter.wantFile('/src/artifacts'), true);\n      assert.equal(filter.wantFile('/src/ignore-dir'), false);\n      assert.equal(filter.wantFile('/src/ignore-dir/some.css'), true);\n      assert.equal(filter.wantFile('/src/some.js'), false);\n      assert.equal(filter.wantFile('/src/some.log'), false);\n      assert.equal(filter.wantFile('/src/other/some.js'), true);\n      assert.equal(filter.wantFile('/src/other/some.log'), false);\n      assert.equal(filter.wantFile('/src/ignore/dir/content'), true);\n      assert.equal(filter.wantFile('/src/ignore/dir/content/file.js'), false);\n      // This file is not ignored because it's not relative to /src:\n      assert.equal(filter.wantFile('/some.js'), true);\n    });\n\n  });\n\n  describe('isSubPath', () => {\n    it('test if target is a sub directory of src', () => {\n      assert.equal(isSubPath('dist', '.'), false);\n      assert.equal(isSubPath('.', 'artifacts'), true);\n      assert.equal(isSubPath('.', '.'), false);\n      assert.equal(isSubPath('/src/dist', '/src'), false);\n      assert.equal(isSubPath('/src', '/src/artifacts'), true);\n      assert.equal(isSubPath('/src', '/src'), false);\n      assert.equal(isSubPath('/firstroot', '/secondroot'), false);\n      assert.equal(isSubPath('/src', '/src/.dir'), true);\n      assert.equal(isSubPath('/src', '/src/..dir'), true);\n    });\n  });\n\n  describe('negation', () => {\n    const filter = newFileFilter({\n      sourceDir: '/src',\n      ignoreFiles: [\n        '!node_modules/libdweb/src/**',\n      ],\n    });\n\n    it('ignore paths not captured by negation', () => {\n      assert.equal(filter.wantFile('/src/node_modules/lib/foo.js'), false);\n      assert.equal(filter.wantFile('/src/node_modules/lib'), false);\n      assert.equal(filter.wantFile('/src/node_modules/what.js'), false);\n      assert.equal(filter.wantFile('/src/node_modules/libdweb/what.js'), false);\n      assert.equal(filter.wantFile('/src/node_modules/libdweb/src.js'), false);\n      assert.equal(filter.wantFile('/src/node_modules/libdweb/src'), false);\n    });\n\n    it('includes paths captured by negation', () => {\n      assert.equal(\n        filter.wantFile('/src/node_modules/libdweb/src/lib.js'),\n        true);\n      assert.equal(\n        filter.wantFile('/src/node_modules/libdweb/src/sub/lib.js'),\n        true);\n      assert.equal(\n        filter.wantFile('/src/node_modules/libdweb/src/node_modules/lib.js'),\n        true);\n    });\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.file-filter.js","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport {assert} from 'chai';\nimport {describe, it} from 'mocha';\n\nimport isDirectory from '../../../src/util/is-directory';\nimport {withTempDir} from '../../../src/util/temp-dir';\n\n\ndescribe('util.isDirectory', () => {\n\n  it('resolves true for a directory', () => withTempDir(\n    (tmpDir) => {\n      return isDirectory(tmpDir.path())\n        .then((dirExists) => {\n          assert.equal(dirExists, true);\n        });\n    }\n  ));\n\n  it('resolves false for non-existent paths', () => {\n    return isDirectory('/dev/null/not-a-real-path-at-all')\n      .then((dirExists) => {\n        assert.equal(dirExists, false);\n      });\n  });\n\n  it('resolves false for non-directory paths', () => withTempDir(\n    (tmpDir) => {\n      const filePath = path.join(tmpDir.path(), 'some.txt');\n      return fs.writeFile(filePath, 'some text')\n        .then(() => isDirectory(filePath))\n        .then((dirExists) => {\n          assert.equal(dirExists, false);\n        });\n    }\n  ));\n\n  it('resolves false for incomplete directory paths', () => withTempDir(\n    (tmpDir) => {\n      return isDirectory(path.join(tmpDir.path(), 'missing-leaf'))\n        .then((dirExists) => {\n          assert.equal(dirExists, false);\n        });\n    }\n  ));\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.is-directory.js","/* @flow */\nimport {Writable as WritableStream} from 'stream';\n\nimport bunyan from 'bunyan';\nimport sinon from 'sinon';\nimport {it, describe} from 'mocha';\nimport {assert} from 'chai';\n\n\nimport {createLogger, ConsoleStream} from '../../../src/util/logger';\n\n\ndescribe('logger', () => {\n\n  describe('createLogger', () => {\n\n    it('makes file names less redundant', () => {\n      const createBunyanLog = sinon.spy(() => {});\n      createLogger('src/some-file.js', {createBunyanLog});\n      sinon.assert.calledWithMatch(\n        createBunyanLog, {name: 'some-file.js'}\n      );\n    });\n\n  });\n\n  describe('ConsoleStream', () => {\n\n    function packet(overrides) {\n      return {\n        name: 'some name',\n        msg: 'some messge',\n        level: bunyan.INFO,\n        ...overrides,\n      };\n    }\n\n    // NOTE: create a fake process that makes flow happy.\n    function fakeProcess() {\n      class FakeWritableStream extends WritableStream {\n        write(): boolean {\n          return true;\n        }\n      }\n\n      const fakeWritableStream = new FakeWritableStream();\n      sinon.spy(fakeWritableStream, 'write');\n\n      return {\n        stdout: fakeWritableStream,\n      };\n    }\n\n    it('lets you turn on verbose logging', () => {\n      const log = new ConsoleStream({verbose: false});\n      log.makeVerbose();\n      assert.equal(log.verbose, true);\n    });\n\n    it('logs names in verbose mode', () => {\n      const log = new ConsoleStream({verbose: true});\n      assert.equal(\n        log.format(packet({\n          name: 'foo',\n          msg: 'some message',\n          level: bunyan.DEBUG,\n        })),\n        '[foo][debug] some message\\n');\n    });\n\n    it('does not log names in non-verbose mode', () => {\n      const log = new ConsoleStream({verbose: false});\n      assert.equal(\n        log.format(packet({name: 'foo', msg: 'some message'})),\n        'some message\\n');\n    });\n\n    it('does not log debug packets unless verbose', () => {\n      const log = new ConsoleStream({verbose: false});\n      const localProcess = fakeProcess();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet({level: bunyan.DEBUG}), {localProcess});\n      sinon.assert.notCalled(localProcess.stdout.write);\n    });\n\n    it('does not log trace packets unless verbose', () => {\n      const log = new ConsoleStream({verbose: false});\n      const localProcess = fakeProcess();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet({level: bunyan.TRACE}), {localProcess});\n      sinon.assert.notCalled(localProcess.stdout.write);\n    });\n\n    it('logs debug packets when verbose', () => {\n      const log = new ConsoleStream({verbose: true});\n      const localProcess = fakeProcess();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet({level: bunyan.DEBUG}), {localProcess});\n      sinon.assert.called(localProcess.stdout.write);\n    });\n\n    it('logs trace packets when verbose', () => {\n      const log = new ConsoleStream({verbose: true});\n      const localProcess = fakeProcess();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet({level: bunyan.TRACE}), {localProcess});\n      sinon.assert.called(localProcess.stdout.write);\n    });\n\n    it('logs info packets when verbose or not', () => {\n      const log = new ConsoleStream({verbose: false});\n      const localProcess = fakeProcess();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet({level: bunyan.INFO}), {localProcess});\n      log.makeVerbose();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet({level: bunyan.INFO}), {localProcess});\n      sinon.assert.callCount(localProcess.stdout.write, 2);\n    });\n\n    it('lets you capture logging', () => {\n      const log = new ConsoleStream();\n      const localProcess = fakeProcess();\n\n      log.startCapturing();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet({msg: 'message'}), {localProcess});\n      sinon.assert.notCalled(localProcess.stdout.write);\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.flushCapturedLogs({localProcess});\n      sinon.assert.calledWith(localProcess.stdout.write, 'message\\n');\n    });\n\n    it('only flushes captured messages once', () => {\n      const log = new ConsoleStream();\n      let localProcess = fakeProcess();\n\n      log.startCapturing();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet(), {localProcess});\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.flushCapturedLogs({localProcess});\n\n      // Make sure there is nothing more to flush.\n      localProcess = fakeProcess();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.flushCapturedLogs({localProcess});\n      sinon.assert.notCalled(localProcess.stdout.write);\n    });\n\n    it('lets you start and stop capturing', () => {\n      const log = new ConsoleStream();\n      let localProcess = fakeProcess();\n\n      log.startCapturing();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet(), {localProcess});\n      sinon.assert.notCalled(localProcess.stdout.write);\n\n      log.stopCapturing();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.write(packet(), {localProcess});\n      sinon.assert.callCount(localProcess.stdout.write, 1);\n\n      // Make sure that when we start capturing again,\n      // the queue gets reset.\n      log.startCapturing();\n      log.write(packet());\n      localProcess = fakeProcess();\n      // $FLOW_IGNORE: fake process for testing reasons.\n      log.flushCapturedLogs({localProcess});\n      sinon.assert.callCount(localProcess.stdout.write, 1);\n    });\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.logger.js","/* @flow */\nimport {describe, it} from 'mocha';\nimport {fs} from 'mz';\nimport {assert} from 'chai';\n\nimport {withTempDir, TempDir} from '../../../src/util/temp-dir';\nimport {makeSureItFails} from '../helpers';\n\n\ndescribe('util.withTempDir', () => {\n\n  it('creates a temp directory', () => withTempDir(\n    (tmpDir) => {\n      // Make sure the directory exists.\n      return fs.stat(tmpDir.path());\n    }\n  ));\n\n  it('destroys the directory on completion', () => {\n    return withTempDir(\n      (tmpDir) => Promise.resolve(tmpDir.path()))\n      .then((tmpPath) => fs.stat(tmpPath))\n      .then(makeSureItFails())\n      .catch((error) => {\n        assert.match(error.message, /ENOENT.* stat/);\n      });\n  });\n\n  it('destroys the directory on error', () => {\n    var tmpPath;\n    var tmpPathExisted = false;\n    return withTempDir(\n      (tmpDir) => {\n        tmpPath = tmpDir.path();\n        return fs.stat(tmpPath)\n          .then(() => {\n            tmpPathExisted = true;\n            throw new Error('simulated error');\n          });\n      })\n      .then(makeSureItFails())\n      .catch(() => {\n        assert.equal(tmpPathExisted, true);\n        return fs.stat(tmpPath);\n      })\n      .catch((error) => {\n        assert.match(error.message, /ENOENT.* stat/);\n      });\n  });\n\n});\n\n\ndescribe('util.TempDir', () => {\n\n  it('requires you to create the directory before accessing path()', () => {\n    const tmp = new TempDir();\n    assert.throws(() => tmp.path(), /cannot access path.* before.* create/);\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.temp-dir.js","/* @flow */\nimport {it, describe} from 'mocha';\nimport sinon from 'sinon';\n\nimport {checkForUpdates} from '../../../src/util/updates';\n\ndescribe('util/updates', () => {\n  describe('checkForUpdates()', () => {\n    it('calls the notifier with the correct parameters', () => {\n      const updateNotifierStub = sinon.spy(() => {\n        return {\n          notify: sinon.spy(),\n        };\n      });\n\n      checkForUpdates({\n        version: '1.0.0',\n        updateNotifier: updateNotifierStub,\n      });\n\n      sinon.assert.calledWithMatch(\n        updateNotifierStub, {\n          updateCheckInterval: 1000 * 60 * 60 * 24 * 3,\n          pkg: { name: 'web-ext', version: '1.0.0' },\n        }\n      );\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test-util/test.updates.js","module.exports = require(\"update-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"update-notifier\"\n// module id = 229\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {assert} from 'chai';\nimport {describe, it} from 'mocha';\nimport sinon from 'sinon';\nimport {fs} from 'mz';\n\nimport {Program} from '../../src/program';\nimport {\n  applyConfigToArgv,\n  discoverConfigFiles,\n  loadJSConfigFile,\n} from '../../src/config';\nimport {withTempDir} from '../../src/util/temp-dir';\nimport {UsageError, WebExtError} from '../../src/errors';\n\ntype MakeArgvParams = {|\n  userCmd?: Array<string>,\n  command?: string,\n  commandDesc?: string,\n  commandExecutor?: Function,\n  commandOpt?: Object,\n  globalOpt?: Object,\n|}\n\nfunction makeArgv({\n  userCmd = ['fakecommand'],\n  command = 'fakecommand',\n  commandDesc = 'this is a fake command',\n  commandExecutor = sinon.stub(),\n  commandOpt,\n  globalOpt,\n}: MakeArgvParams) {\n  const program = new Program(userCmd);\n\n  if (globalOpt) {\n    program.setGlobalOptions(globalOpt);\n  }\n  if (commandOpt) {\n    program.command(command, commandDesc, commandExecutor, commandOpt);\n  }\n\n  const argv = program.yargs.exitProcess(false).argv;\n  return {\n    argv,\n    argvFromCLI: argv,\n    options: program.options,\n  };\n}\n\nconst applyConf = (params) => applyConfigToArgv({\n  configFileName: 'some/path/to/config.js',\n  ...params,\n});\n\ndescribe('config', () => {\n  describe('applyConfigToArgv', () => {\n\n    it('preserves a string value on the command line over configured', () => {\n      const cmdLineSrcDir = '/user/specified/source/dir/';\n\n      const params = makeArgv({\n        userCmd: ['fakecommand', '--source-dir', cmdLineSrcDir],\n        globalOpt: {\n          'source-dir': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const configObject = {\n        sourceDir: '/configured/source/dir',\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);\n    });\n\n    it('preserves configured value over default', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'source-dir': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'default/value/option/definition',\n          },\n        },\n      });\n      const configObject = {\n        sourceDir: '/configured/source/dir',\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, configObject.sourceDir);\n    });\n\n    it('preserves a string value on the command line over all others', () => {\n      const cmdLineSrcDir = '/user/specified/source/dir/';\n      const params = makeArgv({\n        userCmd: ['fakecommand', '--sourceDir', cmdLineSrcDir],\n        globalOpt: {\n          'source-dir': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'default/value/option/definition',\n          },\n        },\n      });\n      const configObject = {\n        sourceDir: '/configured/source/dir',\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);\n    });\n\n    it('preserves default value of option if not in config', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'source-dir': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'default/value/option/definition',\n          },\n          'artifacts-dir': {\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const configObject = {\n        artifactsDir: '/configured/artifacts/dir',\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, 'default/value/option/definition');\n    });\n\n    it('preserves value on the command line if not in config', () => {\n      const cmdLineSrcDir = '/user/specified/source/dir/';\n      const params = makeArgv({\n        userCmd: ['fakecommand', '--sourceDir', cmdLineSrcDir],\n        globalOpt: {\n          'source-dir': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'default/value/option/definition',\n          },\n          'artifacts-dir': {\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const configObject = {\n        artifactsDir: '/configured/artifacts/dir',\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);\n    });\n\n    it('coerces config option values if needed', () => {\n      const coerce = (sourceDir) => `coerced(${sourceDir})`;\n      const params = makeArgv({\n        userCmd: ['fakecommand'],\n        globalOpt: {\n          'source-dir': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            // In the real world this would do something like\n            // (sourceDir) => path.resolve(sourceDir)\n            coerce,\n          },\n        },\n      });\n\n      const sourceDir = '/configured/source/dir';\n      const configObject = {sourceDir};\n\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, coerce(sourceDir));\n    });\n\n    it('uses a configured boolean value over an implicit default', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'overwrite-files': {\n            type: 'boolean',\n            // No default is set here explicitly but yargs will set it to\n            // false implicitly.\n          },\n        },\n      });\n      const configObject = {\n        overwriteFiles: true,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.overwriteFiles, true);\n    });\n\n    it('uses a configured boolean value over explicit falsey default', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'overwrite-files': {\n            type: 'boolean',\n            default: false,\n          },\n        },\n      });\n      const configObject = {\n        overwriteFiles: true,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.overwriteFiles, true);\n    });\n\n    it('uses configured boolean value over explicit truthy default', () => {\n      const params = makeArgv({\n        globalOpt: {\n          verbose: {\n            type: 'boolean',\n            default: true,\n          },\n        },\n      });\n      const configObject = {\n        verbose: false,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.verbose, false);\n    });\n\n    it('uses a CLI boolean value over a configured one', () => {\n      const params = makeArgv({\n        userCmd: ['fakecommand', '--overwrite-files'],\n        globalOpt: {\n          'overwrite-files': {\n            type: 'boolean',\n          },\n        },\n      });\n      const configObject = {\n        overwriteFiles: false,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.overwriteFiles, true);\n    });\n\n    it('can load multiple configs for global options', () => {\n      const params = makeArgv({\n        userCmd: ['fakecommand'],\n        globalOpt: {\n          'file-path': {\n            demand: false,\n            type: 'string',\n          },\n        },\n      });\n\n      // Make sure the second global option overrides the first.\n      const firstConfigObject = {\n        filePath: 'first/path',\n      };\n      const secondConfigObject = {\n        filePath: 'second/path',\n      };\n\n      let argv = applyConf({\n        ...params, configObject: firstConfigObject,\n      });\n      argv = applyConf({\n        ...params, argv, configObject: secondConfigObject,\n      });\n      assert.strictEqual(argv.filePath, secondConfigObject.filePath);\n    });\n\n    it('recognizes array config values as array types', () => {\n      const params = makeArgv({\n        userCmd: ['fakecommand'],\n        globalOpt: {\n          'ignore-files': {\n            demand: false,\n            type: 'array',\n          },\n        },\n      });\n\n      const configObject = {\n        ignoreFiles: ['file1', 'file2'],\n      };\n\n      const argv = applyConf({...params, configObject});\n      assert.strictEqual(argv.ignoreFiles, configObject.ignoreFiles);\n    });\n\n    it('does not mistake an array config values for a sub-command',\n       () => {\n         const params = makeArgv({\n           userCmd: ['fakecommand'],\n           globalOpt: {\n             pref: {\n               demand: false,\n               type: 'array',\n             },\n           },\n         });\n\n         const configObject = {\n           pref: ['pref1=true', 'pref2=false'],\n         };\n\n         const resultArgv = applyConf({...params, configObject});\n         assert.strictEqual(resultArgv.pref, configObject.pref);\n       });\n\n    it('uses CLI option over undefined configured option and default', () => {\n      const cmdLineSrcDir = '/user/specified/source/dir/';\n      const params = makeArgv({\n        userCmd: ['fakecommand', '--source-dir', cmdLineSrcDir],\n        globalOpt: {\n          'source-dir': {\n            type: 'string',\n          },\n          'verbose': {\n            type: 'boolean',\n          },\n        },\n      });\n      const configObject = {\n        verbose: true,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, cmdLineSrcDir);\n    });\n\n    it('uses a configured number value over a falsey default', () => {\n      const params = makeArgv({\n        userCmd: ['fakecommand'],\n        globalOpt: {\n          'number-of-retries': {\n            type: 'number',\n            default: 0,\n          },\n        },\n      });\n      const configObject = {\n        numberOfRetries: 1,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.numberOfRetries, 1);\n    });\n\n    it('uses a falsey CLI number value over a configured one', () => {\n      const params = makeArgv({\n        userCmd: ['fakecommand', '--number-of-retries=0'],\n        globalOpt: {\n          'number-of-retries': {\n            type: 'number',\n            default: 1,\n          },\n        },\n      });\n      const configObject = {\n        numberOfRetries: 1,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.numberOfRetries, 0);\n    });\n\n    it('uses configured value even when option defaults to undefined', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'source-dir': {\n            type: 'string',\n            default: undefined,\n          },\n        },\n      });\n      const configObject = {\n        sourceDir: '/configured/directory',\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, '/configured/directory');\n    });\n\n    it('throws an error when an option is not camel cased', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'source-dir': {\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const configObject = {\n        'source-dir': 'fake/value/',\n      };\n      assert.throws(() => {\n        applyConf({...params, configObject});\n      }, UsageError, 'The config option \"source-dir\" must be ' +\n        'specified in camel case: \"sourceDir\"');\n    });\n\n    it('throws an error when an option is invalid', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'source-dir': {\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const configObject = {\n        randomDir: 'fake/artifacts/dir',\n      };\n      assert.throws(() => {\n        applyConf({...params, configObject});\n      }, UsageError, 'The config file ' +\n      'at some/path/to/config.js specified an unknown option: \"randomDir\"');\n    });\n\n    it('throws an error when a global option type is invalid', () => {\n      const params = makeArgv({\n        globalOpt: {\n          retries: {\n            type: 'number',\n            default: 1,\n          },\n        },\n      });\n      const configObject = {\n        retries: 'invalid-value',\n      };\n      assert.throws(\n        () => applyConf({...params, configObject}),\n        UsageError,\n        'The config file at some/path/to/config.js specified the ' +\n        'type of \"retries\" incorrectly as \"string\" (expected type \"number\")'\n      );\n    });\n\n    it('throws an error when the type of option value is invalid', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'source-dir': {\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const configObject = {\n        sourceDir: {randomKey: 'randomValue'},\n      };\n      assert.throws(() => {\n        applyConf({...params, configObject});\n      }, UsageError, 'The config file at some/path/to/config.js ' +\n        'specified the type of \"sourceDir\" incorrectly');\n    });\n\n    it('does not throw an error when the type of option value is count', () => {\n      const params = makeArgv({\n        globalOpt: {\n          'random-numeric-option': {\n            type: 'count',\n            default: 0,\n          },\n        },\n      });\n      const configObject = {\n        randomNumericOption: 15,\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.randomNumericOption, 15);\n    });\n  });\n\n  describe('sub commands', () => {\n    it('preserves configured value over default', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-key': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiKey: 'custom-configured-key',\n        },\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.apiKey, configObject.sign.apiKey);\n    });\n\n    it('preserves CLI value over default and configured', () => {\n      const cmdApiKey = 'api-key-cmd';\n      const params = makeArgv({\n        userCmd: ['sign', '--api-key', cmdApiKey],\n        command: 'sign',\n        commandOpt: {\n          'api-key': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiKey: 'custom-configured-key',\n        },\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.apiKey, cmdApiKey);\n    });\n\n    it('preserves CLI value over configured', () => {\n      const cmdApiKey = 'api-key-cmd';\n      const params = makeArgv({\n        userCmd: ['sign', '--api-key', cmdApiKey],\n        command: 'sign',\n        commandOpt: {\n          'api-key': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiKey: 'custom-configured-key',\n        },\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.apiKey, cmdApiKey);\n    });\n\n    it('can load multiple configs for sub-command options', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'file-path': {\n            demand: false,\n            type: 'string',\n          },\n        },\n      });\n\n      // Make sure the second sub-command option overrides the first.\n      const firstConfigObject = {\n        sign: {\n          filePath: 'first/path',\n        },\n      };\n      const secondConfigObject = {\n        sign: {\n          filePath: 'second/path',\n        },\n      };\n\n      let argv = applyConf({\n        ...params, configObject: firstConfigObject,\n      });\n      argv = applyConf({\n        ...params, argv, configObject: secondConfigObject,\n      });\n      assert.strictEqual(\n        argv.filePath, secondConfigObject.sign.filePath\n      );\n    });\n\n    it('preserves default value if not in config', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-key': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n          'api-url': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiUrl',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiKey: 'custom-configured-key',\n        },\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.apiUrl, 'pretend-default-value-of-apiUrl');\n    });\n\n    it('preserves CLI value if not in config', () => {\n      const cmdApiKey = 'api-key-cmd';\n      const params = makeArgv({\n        userCmd: ['sign', '--api-key', cmdApiKey],\n        command: 'sign',\n        commandOpt: {\n          'api-key': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n          'api-url': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiUrl',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiUrl: 'custom-configured-url',\n        },\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.apiKey, cmdApiKey);\n    });\n\n    it('preserves global option when sub-command options exist', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-key': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n          },\n        },\n        globalOpt: {\n          'source-dir': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n          },\n        },\n      });\n      const sourceDir = 'custom/source/dir';\n      const configObject = {\n        // This global option should not be affected by the\n        // recursion code that processes the sub-command option.\n        sourceDir,\n        sign: {\n          apiKey: 'custom-configured-key',\n        },\n      };\n      const newArgv = applyConf({...params, configObject});\n      assert.strictEqual(newArgv.sourceDir, sourceDir);\n    });\n\n    it('handles camel case sub-commands', () => {\n      const params = makeArgv({\n        userCmd: ['sign-extension'],\n        command: 'sign-extension',\n        commandOpt: {\n          'api-url': {\n            requiresArg: true,\n            type: 'string',\n            default: 'pretend-default-value-of-apiKey',\n          },\n        },\n      });\n      const configObject = {\n        signExtension: {\n          apiUrl: 2,\n        },\n      };\n      assert.throws(\n        () => applyConf({...params, configObject}),\n        UsageError,\n        'The config file at some/path/to/config.js ' +\n        'specified the type of \"apiUrl\" incorrectly'\n      );\n    });\n\n    it('throws an error when the option is not camel cased', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-url': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          'api-url': 2,\n        },\n      };\n      assert.throws(() => {\n        applyConf({...params, configObject});\n      }, UsageError, 'The config option \"api-url\"' +\n        ' must be specified in camel case: \"apiUrl\"');\n    });\n\n    it('throws an error when the option is invalid', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-url': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          randomOption: 'random-value',\n        },\n      };\n      assert.throws(() => {\n        applyConf({...params, configObject});\n      }, UsageError, 'The config file at ' +\n      'some/path/to/config.js specified an unknown option: \"randomOption\"');\n    });\n\n    it('throws an error when the type of option value is invalid', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-url': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiUrl: 2,\n        },\n      };\n      assert.throws(() => {\n        applyConf({...params, configObject});\n      }, UsageError, 'The config file at some/path/to/config.js ' +\n        'specified the type of \"apiUrl\" incorrectly');\n    });\n\n    it('throws an error when the type of one of option values' +\n      ' is invalid', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-url': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n          'api-key': {\n            requiresArg: true,\n            type: 'string',\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiUrl: 2,\n          apiKey: 'fake-api-key',\n        },\n      };\n      assert.throws(() => {\n        applyConf({...params, configObject});\n      }, UsageError, 'The config file at some/path/to/config.js ' +\n        'specified the type of \"apiUrl\" incorrectly');\n    });\n\n    it('throws an error when the type of option is missing', () => {\n      const params = makeArgv({\n        userCmd: ['sign'],\n        command: 'sign',\n        commandOpt: {\n          'api-url': {\n            requiresArg: true,\n            demand: false,\n            default: 'pretend-default-value-of-apiKey',\n          },\n        },\n      });\n      const configObject = {\n        sign: {\n          apiUrl: 2,\n          apiKey: 'fake-api-key',\n        },\n      };\n      assert.throws(\n        () => {\n          applyConf({...params, configObject});\n        },\n        WebExtError,\n        'Option: apiUrl was defined without a type.'\n      );\n    });\n\n    it('throws an error when type of unrelated sub option is invalid', () => {\n      const program = new Program(['run']);\n\n      program.command('run', 'this is a fake command', sinon.stub(), {\n        'no-reload': {\n          type: 'boolean',\n          demand: false,\n        },\n      });\n\n      program.command('sign', 'this is a fake command', sinon.stub(), {\n        'api-url': {\n          requiresArg: true,\n          type: 'string',\n          demand: false,\n          default: 'pretend-default-value-of-apiKey',\n        },\n      });\n\n      const configObject = {\n        sign: {\n          apiUrl: 2,\n        },\n      };\n\n      assert.throws(() => {\n        applyConf({\n          argv: program.yargs.exitProcess(false).argv,\n          options: program.options,\n          configObject});\n      }, UsageError, 'The config file at some/path/to/config.js ' +\n        'specified the type of \"apiUrl\" incorrectly as \"number\"' +\n        ' (expected type \"string\")');\n    });\n\n  });\n\n  describe('loadJSConfigFile', () => {\n    it('throws an error if the config file does not exist', () => {\n      return withTempDir (\n        (tmpDir) => {\n          assert.throws(() => {\n            loadJSConfigFile((path.join(tmpDir.path(),\n                                        'non-existant-config.js')));\n          }, UsageError, /Cannot read config file/);\n        });\n    });\n\n    it('throws an error if the config file has syntax errors', () => {\n      return withTempDir (\n        (tmpDir) => {\n          const configFilePath = path.join(tmpDir.path(), 'config.js');\n          fs.writeFileSync(\n            configFilePath,\n            // missing = in two places\n            `module.exports {\n                sourceDir 'path/to/fake/source/dir',\n              };`\n          );\n          assert.throws(() => {\n            loadJSConfigFile(configFilePath);\n          }, UsageError);\n        });\n    });\n\n    it('parses the configuration file correctly', () => {\n      return withTempDir(\n        (tmpDir) => {\n          const configFilePath = path.join(tmpDir.path(), 'config.js');\n          fs.writeFileSync(\n            configFilePath,\n            `module.exports = {\n              sourceDir: 'path/to/fake/source/dir',\n            };`\n          );\n          const configObj = loadJSConfigFile(configFilePath);\n          assert.equal(configObj.sourceDir, 'path/to/fake/source/dir');\n        });\n    });\n\n    it('parses package.json file correctly', () => {\n      return withTempDir(\n        (tmpDir) => {\n          const configFilePath = path.join(tmpDir.path(), 'package.json');\n          fs.writeFileSync(\n            configFilePath,\n            `{\n                \"name\": \"dummy-package-json\",\n                \"version\": \"1.0.0\",\n                \"webExt\": {\n                  \"sourceDir\": \"path/to/fake/source/dir\"\n                }\n            }`\n          );\n          const configObj = loadJSConfigFile(configFilePath);\n          assert.equal(configObj.sourceDir, 'path/to/fake/source/dir');\n        });\n    });\n\n    it('does not throw an error for an empty config', () => {\n      return withTempDir(\n        (tmpDir) => {\n          const configFilePath = path.join(tmpDir.path(), 'config.js');\n          fs.writeFileSync(configFilePath, 'module.exports = {};');\n          loadJSConfigFile(configFilePath);\n        });\n    });\n\n    it('returns an empty object when webExt key is not in package.json', () => {\n      return withTempDir(\n        (tmpDir) => {\n          const configFilePath = path.join(tmpDir.path(), 'package.json');\n          fs.writeFileSync(\n            configFilePath,\n            `{\n              \"name\": \"dummy-package-json\",\n              \"version\": \"1.0.0\"\n            }`\n          );\n          const configObj = loadJSConfigFile(configFilePath);\n          assert.deepEqual(configObj, {});\n        });\n    });\n  });\n\n  describe('discoverConfigFiles', () => {\n    function _discoverConfigFiles(params = {}) {\n      return discoverConfigFiles({\n        // By default, do not look in the real home directory.\n        getHomeDir: () => '/not-a-directory',\n        ...params,\n      });\n    }\n\n    it('finds a config in your home directory', () => {\n      return withTempDir(\n        async (tmpDir) => {\n          // This is actually web-ext itself's package.json file, which\n          // will be discovered because it's inside current working\n          // directory\n          const packageJSON = path.join(process.cwd(), 'package.json');\n          const homeDirConfig = path.join(\n            tmpDir.path(), '.web-ext-config.js'\n          );\n          await fs.writeFile(homeDirConfig, 'module.exports = {}');\n          assert.deepEqual(\n            // Stub out getHomeDir() so that it returns tmpDir.path()\n            // as if that was a user's home directory.\n            await _discoverConfigFiles({\n              getHomeDir: () => tmpDir.path(),\n            }),\n            [path.resolve(homeDirConfig), packageJSON]\n          );\n        });\n    });\n\n    it('finds a config in your working directory', () => {\n      return withTempDir(\n        async (tmpDir) => {\n          const lastDir = process.cwd();\n          process.chdir(tmpDir.path());\n          try {\n            const expectedConfig = path.resolve(\n              path.join(process.cwd(), 'web-ext-config.js')\n            );\n            await fs.writeFile(expectedConfig, 'module.exports = {}');\n\n            assert.deepEqual(\n              await _discoverConfigFiles(),\n              [expectedConfig]\n            );\n          } finally {\n            process.chdir(lastDir);\n          }\n        });\n    });\n\n    it('discovers all config files', () => {\n      return withTempDir(\n        async (tmpDir) => {\n          const lastDir = process.cwd();\n          process.chdir(tmpDir.path());\n          try {\n            const fakeHomeDir = path.join(tmpDir.path(), 'home-dir');\n            await fs.mkdir(fakeHomeDir);\n            const globalConfig = path.resolve(\n              path.join(fakeHomeDir, '.web-ext-config.js')\n            );\n            await fs.writeFile(globalConfig, 'module.exports = {}');\n\n            const packageJSONConfig = path.resolve(\n              path.join(process.cwd(), 'package.json')\n            );\n            await fs.writeFile(\n              packageJSONConfig,\n              `{\n                \"name\": \"dummy-package-json\",\n                \"version\": \"1.0.0\",\n                \"webExt\": {}\n              }`\n            );\n\n            const projectConfig = path.resolve(\n              path.join(process.cwd(), 'web-ext-config.js')\n            );\n            await fs.writeFile(projectConfig, 'module.exports = {}');\n\n            assert.deepEqual(\n              await _discoverConfigFiles({\n                getHomeDir: () => fakeHomeDir,\n              }),\n              [globalConfig, packageJSONConfig, projectConfig]\n            );\n          } finally {\n            process.chdir(lastDir);\n          }\n        });\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test.config.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/toConsumableArray.js\n// module id = 231\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/array/from.js\n// module id = 232\n// module chunks = 0","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/from.js\n// module id = 233\n// module chunks = 0","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.from.js\n// module id = 234\n// module chunks = 0","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_create-property.js\n// module id = 235\n// module chunks = 0","module.exports = require(\"yargs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yargs\"\n// module id = 236\n// module chunks = 0","module.exports = require(\"require-uncached\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require-uncached\"\n// module id = 237\n// module chunks = 0","module.exports = require(\"decamelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"decamelize\"\n// module id = 238\n// module chunks = 0","/* @flow */\nimport {describe, it} from 'mocha';\nimport {assert} from 'chai';\n\nimport {\n  onlyErrorsWithCode, isErrorWithCode, onlyInstancesOf,\n} from '../../src/errors';\nimport {makeSureItFails, ErrorWithCode} from './helpers';\n\n\ndescribe('errors', () => {\n\n  describe('onlyInstancesOf', () => {\n\n    it('lets you catch a certain error', () => {\n      return Promise.reject(new SyntaxError('simulated error'))\n        .catch(onlyInstancesOf(SyntaxError, (error) => {\n          assert.instanceOf(error, SyntaxError);\n        }));\n    });\n\n    it('throws instances of other errors', () => {\n      return Promise.reject(new SyntaxError('simulated error'))\n        .catch(onlyInstancesOf(TypeError, () => {\n          throw new Error('Unexpectedly caught the wrong error');\n        }))\n        .then(makeSureItFails())\n        .catch((error) => {\n          assert.match(error.message, /simulated error/);\n        });\n    });\n\n  });\n\n  describe('onlyErrorsWithCode', () => {\n\n    class ErrorWithErrno extends Error {\n      errno: number;\n      constructor() {\n        super('pretend this is a system error');\n        this.errno = 53;\n      }\n    }\n\n    it('catches errors having a code', () => {\n      return Promise.reject(new ErrorWithCode())\n        .catch(onlyErrorsWithCode('SOME_CODE', (error) => {\n          assert.equal(error.code, 'SOME_CODE');\n        }));\n    });\n\n    it('catches errors having a error no', () => {\n      return Promise.reject(new ErrorWithErrno())\n        .catch(onlyErrorsWithCode(53, (error) => {\n          assert.equal(error.errno, 53);\n        }));\n    });\n\n    it('throws errors that do not match the code', () => {\n      return Promise.reject(new SyntaxError('simulated error'))\n        .catch(onlyErrorsWithCode('SOME_CODE', () => {\n          throw new Error('Unexpectedly caught the wrong error');\n        }))\n        .then(makeSureItFails())\n        .catch((error) => {\n          assert.match(error.message, /simulated error/);\n        });\n    });\n\n    it('catches errors having one of many codes', () => {\n      return Promise.reject(new ErrorWithCode())\n        .catch(onlyErrorsWithCode(['OTHER_CODE', 'SOME_CODE'], (error) => {\n          assert.equal(error.code, 'SOME_CODE');\n        }));\n    });\n\n    it('catches errors having one of many errno', () => {\n      return Promise.reject(new ErrorWithErrno())\n        .catch(onlyErrorsWithCode([34, 53], (error) => {\n          assert.equal(error.errno, 53);\n        }));\n    });\n\n    it('throws errors that are not in an array of codes', () => {\n      return Promise.reject(new ErrorWithCode())\n        .catch(onlyErrorsWithCode(['OTHER_CODE', 'ANOTHER_CODE'], () => {\n          throw new Error('Unexpectedly caught the wrong error');\n        }))\n        .then(makeSureItFails())\n        .catch((error) => {\n          assert.equal(error.code, 'SOME_CODE');\n        });\n    });\n\n  });\n\n  describe('isErrorWithCode', () => {\n\n    it('returns true on errors that do match the code', () => {\n      assert.equal(isErrorWithCode('SOME_CODE', new ErrorWithCode()), true);\n      assert.equal(\n        isErrorWithCode(['SOME_CODE', 'OTHER_CODE'], new ErrorWithCode()), true\n      );\n    });\n\n    it('returns false on errors that do not match the code', () => {\n      assert.equal(isErrorWithCode('OTHER_CODE', new ErrorWithCode()), false);\n      assert.equal(\n        isErrorWithCode(['OTHER_CODE', 'ANOTHER_CODE'], new ErrorWithCode()),\n        false\n      );\n      assert.equal(isErrorWithCode('ANY_CODE', new Error()), false);\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test.errors.js","/* @flow */\nimport path from 'path';\n\nimport {describe, it} from 'mocha';\nimport git from 'git-rev-sync';\nimport {fs} from 'mz';\nimport sinon, {spy} from 'sinon';\nimport {assert} from 'chai';\n\nimport {applyConfigToArgv} from '../../src/config';\nimport {defaultVersionGetter, main, Program} from '../../src/program';\nimport commands from '../../src/cmd';\nimport {\n  onlyInstancesOf,\n  UsageError,\n} from '../../src/errors';\nimport {\n  createFakeProcess,\n  fake,\n  makeSureItFails,\n  ErrorWithCode,\n} from './helpers';\nimport {\n  consoleStream, // instance is imported to inspect logged messages\n  ConsoleStream,\n} from '../../src/util/logger';\n\ndescribe('program.Program', () => {\n\n  function execProgram(program, options = {}) {\n    const fakeProcess = createFakeProcess();\n    const absolutePackageDir = path.join(__dirname, '..', '..');\n    return program.execute(\n      absolutePackageDir, {\n        getVersion: () => 'not-a-real-version',\n        checkForUpdates: spy(),\n        systemProcess: fakeProcess,\n        shouldExitProgram: false,\n        ...options,\n      });\n  }\n\n  it('executes a command callback', () => {\n    const thing = spy(() => Promise.resolve());\n    const program = new Program(['thing'])\n      .command('thing', 'does a thing', thing);\n    return execProgram(program)\n      .then(() => {\n        sinon.assert.called(thing);\n      });\n  });\n\n  it('reports unknown commands', () => {\n    const program = new Program(['thing']);\n    return execProgram(program)\n      .then(makeSureItFails())\n      .catch(onlyInstancesOf(UsageError, (error) => {\n        assert.match(error.message, /Unknown command: thing/);\n      }));\n  });\n\n  it('reports missing command', () => {\n    const program = new Program([]);\n    return execProgram(program)\n      .then(makeSureItFails())\n      .catch(onlyInstancesOf(UsageError, (error) => {\n        assert.match(error.message, /No sub-command was specified/);\n      }));\n  });\n\n  it('exits 1 on a thrown error', () => {\n    const fakeProcess = createFakeProcess();\n    const program = new Program(['cmd'])\n      .command('cmd', 'some command', () => {\n        throw new Error('this is an error from a command handler');\n      });\n    return execProgram(program, {\n      systemProcess: fakeProcess,\n      shouldExitProgram: true,\n    })\n      .then(() => {\n        sinon.assert.calledOnce(fakeProcess.exit);\n        sinon.assert.calledWith(fakeProcess.exit, 1);\n      });\n  });\n\n  it('throws an error if sub-command is given an argument', () => {\n    const program = new Program(['thing', 'nope'])\n      .command('thing', '', () => {});\n    return execProgram(program)\n      .then(makeSureItFails())\n      .catch((error) => {\n        assert.match(error.message, /This command does not take any arguments/);\n      });\n  });\n\n  it('handles errors that have codes', () => {\n\n    const program = new Program(['cmd'])\n      .command('cmd', 'some command', () => {\n        const error = new ErrorWithCode();\n        throw error;\n      });\n    // This is just a smoke test to make sure the error code doesn't\n    // introduce an unexpected exception.\n    return execProgram(program)\n      .then(makeSureItFails())\n      .catch((error) => {\n        assert.match(error.message, /pretend this is a system error/);\n      });\n  });\n\n  it('lets commands define options', () => {\n    const handler = spy(() => Promise.resolve());\n    const program = new Program(['cmd'])\n      .command('cmd', 'some command', handler, {\n        'some-option': {\n          type: 'string',\n          default: 'default value',\n        },\n      });\n    return execProgram(program)\n      .then(() => {\n        // This ensures that the default configuration for the option has\n        // been applied.\n        sinon.assert.calledWithMatch(handler, {someOption: 'default value'});\n      });\n  });\n\n  it('preserves global option configuration', () => {\n    const handler = spy(() => Promise.resolve());\n    const program = new Program(['cmd'])\n      .setGlobalOptions({\n        'global-option': {\n          type: 'string',\n          default: 'the default',\n        },\n      })\n      .command('cmd', 'some command', handler, {\n        'some-option': {\n          type: 'string',\n          default: 'default value',\n        },\n      });\n    return execProgram(program)\n      .then(() => {\n        // By checking the global default, it ensures that default configuration\n        // will be applied to sub commands.\n        sinon.assert.calledWithMatch(\n          handler,\n          {\n            someOption: 'default value',\n            globalOption: 'the default',\n          });\n      });\n  });\n\n  it('reads option values from env vars in sub commands', () => {\n    // Set an env var that mimics web-ext cmd --some-opt=value\n    process.env.WEB_EXT_SOME_OPT = 'value';\n    let valueReceived;\n    const program = new Program(['cmd'])\n      .command('cmd', 'some command', ({someOpt}) => {\n        valueReceived = someOpt;\n      }, {\n        'some-opt': {\n          type: 'string',\n          describe: 'example option',\n        },\n      });\n    return execProgram(program, {shouldExitProgram: true})\n      .then(() => {\n        assert.equal(valueReceived, 'value');\n        delete process.env.WEB_EXT_SOME_OPT;\n      });\n  });\n\n  it('configures the logger when verbose', () => {\n    const logStream = fake(new ConsoleStream());\n\n    const program = new Program(['--verbose', 'thing']);\n    program.setGlobalOptions({\n      verbose: {\n        type: 'boolean',\n      },\n    });\n    program.command('thing', 'does a thing', () => {});\n\n    return execProgram(program, {\n      getVersion: spy(),\n      logStream,\n    })\n      .then(() => {\n        sinon.assert.called(logStream.makeVerbose);\n      });\n  });\n\n  it('checks the version when verbose', () => {\n    const version = spy();\n    const program = new Program(['--verbose', 'thing']);\n    program.setGlobalOptions({\n      verbose: {\n        type: 'boolean',\n      },\n    });\n    program.command('thing', 'does a thing', () => {});\n    return execProgram(program, {getVersion: version})\n      .then(() => {\n        sinon.assert.calledWith(version, path.join(__dirname, '..', '..'));\n      });\n  });\n\n  it('does not configure the logger unless verbose', () => {\n    const logStream = fake(new ConsoleStream());\n    const program = new Program(['thing']).command('thing', '', () => {});\n    program.setGlobalOptions({\n      verbose: {\n        type: 'boolean',\n      },\n    });\n    return execProgram(program, {logStream})\n      .then(() => {\n        sinon.assert.notCalled(logStream.makeVerbose);\n      });\n  });\n\n  it('logs UsageErrors into console', () => {\n    // Clear console stream from previous messages and start recording\n    consoleStream.stopCapturing();\n    consoleStream.flushCapturedLogs();\n    consoleStream.startCapturing();\n\n    const program = new Program(['thing']).command('thing', '', () => {\n      throw new UsageError('some error');\n    });\n    program.setGlobalOptions({\n      verbose: {\n        type: 'boolean',\n      },\n    });\n    return execProgram(program)\n      .then(makeSureItFails())\n      .catch(onlyInstancesOf(UsageError, (error) => {\n        const {capturedMessages} = consoleStream;\n        // Stop recording\n        consoleStream.stopCapturing();\n        assert.match(error.message, /some error/);\n        assert.ok(capturedMessages.some(\n          (message) => message.match(/some error/))\n        );\n      }));\n  });\n\n  it('throws an error about unknown commands', () => {\n    return execProgram(new Program(['nope']))\n      .then(makeSureItFails())\n      .catch((error) => {\n        assert.match(error.message, /Unknown command: nope/);\n      });\n  });\n\n  it('throws an error about unknown options', () => {\n    return execProgram(new Program(['--nope']))\n      .then(makeSureItFails())\n      .catch((error) => {\n        // Make sure that the option name is in the error message.\n        // Be careful not to rely on any text from yargs since it's localized.\n        assert.match(error.message, /nope/);\n      });\n  });\n\n  it('throws an error about unknown sub-command options', () => {\n    const program = new Program(['thing', '--nope'])\n      .command('thing', '', () => {});\n    return execProgram(program)\n      .then(makeSureItFails())\n      .catch((error) => {\n        // Make sure that the option name is in the error message.\n        // Be careful not to rely on any text from yargs since it's localized.\n        assert.match(error.message, /nope/);\n      });\n  });\n\n  it('checks for updates automatically', () => {\n    const handler = spy();\n    const getVersion = () => 'some-package-version';\n    const checkForUpdates = sinon.stub();\n    const program = new Program(['run'])\n      .command('run', 'some command', handler);\n    return execProgram(program, {\n      checkForUpdates,\n      getVersion,\n      globalEnv: 'production',\n    })\n      .then(() => {\n        sinon.assert.calledWith(\n          checkForUpdates, {version: 'some-package-version'});\n      });\n  });\n\n  it('does not check for updates during development', () => {\n    const handler = spy();\n    const getVersion = () => 'some-package-version';\n    const checkForUpdates = sinon.stub();\n    const program = new Program(['run'])\n      .command('run', 'some command', handler);\n    return execProgram(program, {\n      checkForUpdates,\n      getVersion,\n      globalEnv: 'development',\n    })\n      .then(() => {\n        sinon.assert.notCalled(checkForUpdates);\n      });\n  });\n});\n\n\ndescribe('program.main', () => {\n\n  function execProgram(\n    argv,\n    {projectRoot = '', runOptions, ...mainOptions}: Object = {}\n  ) {\n    return main(\n      projectRoot,\n      {\n        argv,\n        runOptions: {\n          discoverConfigFiles: async () => [],\n          getVersion: () => 'not-a-real-version',\n          checkForUpdates: spy(),\n          shouldExitProgram: false,\n          systemProcess: createFakeProcess(),\n          ...runOptions,\n        },\n        ...mainOptions,\n      }\n    );\n  }\n\n  type MakeConfigLoaderParams = {|\n    configObjects: { [fileName: string]: Object },\n  |};\n\n  function makeConfigLoader(\n    {configObjects}: MakeConfigLoaderParams\n  ) {\n    return (fileName) => {\n      const conf = configObjects[fileName];\n      if (!conf) {\n        throw new Error(`Config file was not mapped: ${fileName}`);\n      }\n      return conf;\n    };\n  }\n\n  it('executes a command handler', () => {\n    const fakeCommands = fake(commands, {\n      build: () => Promise.resolve(),\n    });\n    return execProgram(['build'], {commands: fakeCommands})\n      .then(() => {\n        // This is a smoke test mainly to make sure main() configures\n        // options with handlers. It does not extensively test the\n        // configuration of all handlers.\n        sinon.assert.called(fakeCommands.build);\n      });\n  });\n\n  it('throws an error if no command is given', () => {\n    const fakeCommands = fake(commands, {});\n    return execProgram([], {commands: fakeCommands})\n      .then(makeSureItFails())\n      .catch((error) => {\n        assert.match(error.message, /You must specify a command/);\n      });\n  });\n\n  it('can get the program version', async () => {\n    const fakeVersionGetter = sinon.spy(() => '<version>');\n    const fakeCommands = fake(commands, {\n      build: () => Promise.resolve(),\n    });\n    const projectRoot = '/pretend/project/root';\n    // For some reason, executing --version like this\n    // requires a command. In the real CLI, it does not.\n    await execProgram(['--version', 'build'], {\n      projectRoot,\n      commands: fakeCommands,\n      getVersion: fakeVersionGetter,\n    });\n\n    sinon.assert.calledWith(fakeVersionGetter, projectRoot);\n  });\n\n  it('turns sourceDir into an absolute path', () => {\n    const fakeCommands = fake(commands, {\n      build: () => Promise.resolve(),\n    });\n    return execProgram(\n      ['build', '--source-dir', '..'], {commands: fakeCommands})\n      .then(() => {\n        sinon.assert.calledWithMatch(\n          fakeCommands.build,\n          {sourceDir: path.resolve(path.join(process.cwd(), '..'))}\n        );\n      });\n  });\n\n  it('normalizes the artifactsDir path', () => {\n    const fakeCommands = fake(commands, {\n      build: () => Promise.resolve(),\n    });\n    return execProgram(\n      // Add a double slash to the path, which will be fixed by normalization.\n      ['build', '--artifacts-dir', process.cwd() + path.sep + path.sep],\n      {commands: fakeCommands})\n      .then(() => {\n        sinon.assert.calledWithMatch(\n          fakeCommands.build,\n          {artifactsDir: process.cwd() + path.sep}\n        );\n      });\n  });\n\n  it('passes the path of a firefox binary when specified', () => {\n    const fakeCommands = fake(commands, {\n      run: () => Promise.resolve(),\n    });\n    return execProgram(\n      ['run', '--firefox-binary', '/path/to/firefox-binary'],\n      {commands: fakeCommands})\n      .then(() => {\n        sinon.assert.calledWithMatch(\n          fakeCommands.run,\n          {firefox: '/path/to/firefox-binary'}\n        );\n      });\n  });\n\n  it('passes the url of a firefox binary when specified', () => {\n    const fakeCommands = fake(commands, {\n      run: () => Promise.resolve(),\n    });\n    return execProgram(\n      ['run', '--start-url', 'www.example.com'],\n      {commands: fakeCommands})\n      .then(() => {\n        sinon.assert.calledWithMatch(\n          fakeCommands.run,\n          {startUrl: ['www.example.com']}\n        );\n      });\n  });\n\n  it('opens browser console when --browser-console is specified', () => {\n    const fakeCommands = fake(commands, {\n      run: () => Promise.resolve(),\n    });\n    return execProgram(\n      ['run', '--browser-console'],\n      {commands: fakeCommands})\n      .then(() => {\n        sinon.assert.calledWithMatch(\n          fakeCommands.run,\n          {browserConsole: true}\n        );\n      });\n  });\n\n  it('converts custom preferences into an object', () => {\n    const fakeCommands = fake(commands, {\n      run: () => Promise.resolve(),\n    });\n    return execProgram(\n      ['run', '--pref', 'prop=true', '--pref', 'prop2=value2'],\n      {commands: fakeCommands})\n      .then(() => {\n        const {pref} = fakeCommands.run.firstCall.args[0];\n        assert.isObject(pref);\n        assert.equal(pref.prop, true);\n        assert.equal(pref.prop2, 'value2');\n      });\n  });\n\n  it('passes shouldExitProgram option to commands', () => {\n    const fakeCommands = fake(commands, {\n      lint: () => Promise.resolve(),\n    });\n    return execProgram(['lint'], {commands: fakeCommands}).then(() => {\n      const options = fakeCommands.lint.firstCall.args[1];\n      assert.strictEqual(options.shouldExitProgram, false);\n    });\n  });\n\n  it('applies options from the specified config file', async () => {\n    const fakeCommands = fake(commands, {\n      lint: () => Promise.resolve(),\n    });\n    const configObject = {\n      lint: {\n        selfHosted: true,\n      },\n    };\n    // Instead of loading/parsing a real file, just return an object.\n    const fakeLoadJSConfigFile = sinon.spy(() => {\n      return configObject;\n    });\n\n    await execProgram(\n      ['lint', '--config', 'path/to/web-ext-config.js'],\n      {\n        commands: fakeCommands,\n        runOptions: {\n          loadJSConfigFile: fakeLoadJSConfigFile,\n        },\n      }\n    );\n\n    const options = fakeCommands.lint.firstCall.args[0];\n    // This makes sure that the config object was applied\n    // to the lint command options.\n    assert.equal(\n      options.selfHosted, configObject.lint.selfHosted);\n  });\n\n  it('discovers config files', async () => {\n    const fakeCommands = fake(commands, {\n      lint: () => Promise.resolve(),\n    });\n    const configObject = {\n      lint: {\n        selfHosted: true,\n      },\n    };\n    // Instead of loading/parsing a real file, just return an object.\n    const fakeLoadJSConfigFile = sinon.spy(() => {\n      return configObject;\n    });\n\n    const discoveredFile = 'fake/config.js';\n    await execProgram(\n      ['lint'],\n      {\n        commands: fakeCommands,\n        runOptions: {\n          discoverConfigFiles: async () => [discoveredFile],\n          loadJSConfigFile: fakeLoadJSConfigFile,\n        },\n      }\n    );\n\n    const options = fakeCommands.lint.firstCall.args[0];\n    // This makes sure that the config object was applied\n    // to the lint command options.\n    assert.equal(\n      options.selfHosted, configObject.lint.selfHosted);\n\n    sinon.assert.calledWith(fakeLoadJSConfigFile, discoveredFile);\n  });\n\n  it('lets you disable config discovery', async () => {\n    const fakeCommands = fake(commands, {\n      lint: () => Promise.resolve(),\n    });\n\n    const discoverConfigFiles = sinon.spy(() => Promise.resolve([]));\n    await execProgram(\n      ['--no-config-discovery', 'lint'],\n      {\n        commands: fakeCommands,\n        runOptions: {\n          discoverConfigFiles,\n        },\n      }\n    );\n\n    sinon.assert.notCalled(discoverConfigFiles);\n  });\n\n  it('applies config files in order', async () => {\n    const fakeCommands = fake(commands, {\n      lint: () => Promise.resolve(),\n    });\n\n    const globalConfig = 'home/dir/.web-ext-config.js';\n    const projectConfig = 'project/dir/web-ext-config.js';\n    const customConfig = path.resolve('custom/web-ext-config.js');\n\n    const loadJSConfigFile = makeConfigLoader({\n      configObjects: {\n        [globalConfig]: {\n          noInput: true,\n        },\n        [projectConfig]: {\n          verbose: true,\n        },\n        [customConfig]: {\n          lint: {\n            selfHosted: true,\n          },\n        },\n      },\n    });\n    const fakeApplyConfigToArgv = sinon.spy(applyConfigToArgv);\n\n    await execProgram(\n      ['lint', '--config', customConfig],\n      {\n        commands: fakeCommands,\n        runOptions: {\n          applyConfigToArgv: fakeApplyConfigToArgv,\n          discoverConfigFiles: async () => [\n            globalConfig, projectConfig,\n          ],\n          loadJSConfigFile,\n        },\n      }\n    );\n\n    // Check that the config files were all applied to argv.\n    const options = fakeCommands.lint.firstCall.args[0];\n    assert.equal(options.noInput, true);\n    assert.equal(options.verbose, true);\n    assert.equal(options.selfHosted, true);\n\n    // Make sure the config files were loaded in the right order.\n    assert.include(fakeApplyConfigToArgv.firstCall.args[0], {\n      configFileName: globalConfig,\n    });\n    assert.include(fakeApplyConfigToArgv.secondCall.args[0], {\n      configFileName: projectConfig,\n    });\n    assert.include(fakeApplyConfigToArgv.thirdCall.args[0], {\n      configFileName: customConfig,\n    });\n  });\n\n  it('overwrites old config values', async () => {\n    const fakeCommands = fake(commands, {\n      lint: () => Promise.resolve(),\n    });\n\n    const globalConfig = path.resolve('home/dir/.web-ext-config.js');\n    const customConfig = path.resolve('custom/web-ext-config.js');\n\n    const finalSourceDir = path.resolve('final/source-dir');\n    const loadJSConfigFile = makeConfigLoader({\n      configObjects: {\n        // This config is loaded first.\n        [globalConfig]: {\n          sourceDir: 'first/source-dir',\n        },\n        // This config is loaded next which overwrites the old value.\n        [customConfig]: {\n          sourceDir: finalSourceDir,\n        },\n      },\n    });\n\n    await execProgram(\n      ['lint', '--config', customConfig],\n      {\n        commands: fakeCommands,\n        runOptions: {\n          discoverConfigFiles: async () => [globalConfig],\n          loadJSConfigFile,\n        },\n      }\n    );\n\n    const options = fakeCommands.lint.firstCall.args[0];\n    // This should equal the final configured value.\n    assert.equal(options.sourceDir, finalSourceDir);\n  });\n\n  it('enables verbose more from config file', async () => {\n    const logStream = fake(new ConsoleStream());\n    const fakeCommands = fake(commands, {\n      lint: () => Promise.resolve(),\n    });\n\n    const customConfig = path.resolve('custom/web-ext-config.js');\n\n    const loadJSConfigFile = makeConfigLoader({\n      configObjects: {\n        [customConfig]: {\n          verbose: true,\n        },\n      },\n    });\n\n    await execProgram(\n      ['lint', '--config', customConfig],\n      {\n        commands: fakeCommands,\n        runOptions: {\n          discoverConfigFiles: async () => [],\n          loadJSConfigFile,\n          logStream,\n        },\n      }\n    );\n\n    sinon.assert.called(logStream.makeVerbose);\n  });\n});\n\ndescribe('program.defaultVersionGetter', () => {\n  const projectRoot = path.join(__dirname, '..', '..');\n\n  it('returns the package version in production', () => {\n    const pkgFile = path.join(projectRoot, 'package.json');\n    return fs.readFile(pkgFile)\n      .then((pkgData) => {\n        const testBuildEnv = {globalEnv: 'production'};\n        assert.equal(defaultVersionGetter(projectRoot, testBuildEnv),\n                     JSON.parse(pkgData).version);\n      });\n  });\n\n  it('returns git commit information in development', function() {\n    if (process.env.APPVEYOR) {\n      // Test skipped because of $APPVEYOR' issues with git-rev-sync (mozilla/web-ext#774)\n      this.skip();\n      return;\n    }\n    const commit = `${git.branch()}-${git.long()}`;\n    const testBuildEnv = {globalEnv: 'development'};\n    assert.equal(defaultVersionGetter(projectRoot, testBuildEnv),\n                 commit);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test.program.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/defineProperty.js\n// module id = 241\n// module chunks = 0","/* @flow */\nimport {beforeEach, afterEach} from 'mocha';\n\nimport {consoleStream} from '../../src/util/logger';\n\nbeforeEach(function() {\n  consoleStream.makeVerbose();\n  consoleStream.startCapturing();\n});\n\nafterEach(function() {\n  if (this.currentTest.state !== 'passed') {\n    consoleStream.flushCapturedLogs();\n  }\n  consoleStream.stopCapturing();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test.setup.js","/* @flow */\nimport path from 'path';\n\nimport {it, describe} from 'mocha';\nimport {fs} from 'mz';\nimport sinon from 'sinon';\n\nimport {default as onSourceChange, proxyFileChanges} from '../../src/watcher';\nimport {withTempDir} from '../../src/util/temp-dir';\n\n\ndescribe('watcher', () => {\n\n  it('watches for file changes', () => withTempDir(\n    (tmpDir) => {\n      const artifactsDir = path.join(tmpDir.path(), 'web-ext-artifacts');\n      const someFile = path.join(tmpDir.path(), 'foo.txt');\n\n      var resolveChange;\n      const whenFilesChanged = new Promise((resolve) => {\n        resolveChange = resolve;\n      });\n      const onChange = sinon.spy(() => {\n        resolveChange();\n      });\n\n      return fs.writeFile(someFile, '<contents>')\n        .then(() => {\n          return onSourceChange({\n            sourceDir: tmpDir.path(),\n            artifactsDir,\n            onChange,\n            shouldWatchFile: () => true,\n          });\n        })\n        .then((watcher) => {\n          return fs.utimes(someFile, Date.now() / 1000, Date.now() / 1000)\n            .then(() => watcher);\n        })\n        .then((watcher) => {\n          return whenFilesChanged\n            .then(() => {\n              watcher.close();\n              sinon.assert.calledOnce(onChange);\n              // This delay seems to avoid stat errors from the watcher\n              // which can happen when the temp dir is deleted (presumably\n              // before watcher.close() has removed all listeners).\n              return new Promise((resolve) => setTimeout(resolve, 2));\n            });\n        });\n    }\n  ));\n\n  describe('proxyFileChanges', () => {\n\n    const defaults = {\n      artifactsDir: '/some/artifacts/dir/',\n      onChange: () => {},\n      shouldWatchFile: () => true,\n    };\n\n    it('proxies file changes', () => {\n      const onChange = sinon.spy(() => {});\n      proxyFileChanges({\n        ...defaults,\n        filePath: '/some/file.js',\n        onChange,\n      });\n      sinon.assert.called(onChange);\n    });\n\n    it('ignores changes to artifacts', () => {\n      const onChange = sinon.spy(() => {});\n      proxyFileChanges({\n        ...defaults,\n        filePath: '/some/artifacts/dir/build.xpi',\n        artifactsDir: '/some/artifacts/dir/',\n        onChange,\n      });\n      sinon.assert.notCalled(onChange);\n    });\n\n    it('provides a callback for ignoring files', () => {\n\n      function shouldWatchFile(filePath) {\n        if (filePath === '/somewhere/freaky') {\n          return false;\n        } else {\n          return true;\n        }\n      }\n\n      const conf = {\n        ...defaults,\n        shouldWatchFile,\n        onChange: sinon.spy(() => {}),\n      };\n\n      proxyFileChanges({...conf, filePath: '/somewhere/freaky'});\n      sinon.assert.notCalled(conf.onChange);\n      proxyFileChanges({...conf, filePath: '/any/file/'});\n      sinon.assert.called(conf.onChange);\n    });\n\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test.watcher.js","/* @flow */\nimport {afterEach, describe, it} from 'mocha';\nimport {assert} from 'chai';\nimport sinon from 'sinon';\n\nimport webExt from '../../src/main';\nimport {main} from '../../src/program';\nimport {consoleStream} from '../../src/util/logger';\n\n\ndescribe('webExt', () => {\n  it('exposes main', () => {\n    assert.equal(webExt.main, main);\n  });\n\n  it('gives you access to the log stream', () => {\n    assert.equal(webExt.util.logger.consoleStream, consoleStream);\n  });\n\n  describe('exposes commands', () => {\n    let stub: sinon.Stub;\n    afterEach(() => {\n      stub.restore();\n      stub = undefined;\n    });\n    for (const cmd of ['run', 'lint', 'build', 'sign', 'docs']) {\n      it(`lazily loads cmd/${cmd}`, async () => {\n        // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n        // $FLOW_IGNORE: non-literal require used only in tests.\n        const cmdModule = require(`../../src/cmd/${cmd}`);\n        stub = sinon.stub(cmdModule, 'default');\n\n        const params = {};\n        const options = {};\n        const expectedResult = {};\n        stub.returns(expectedResult);\n\n        const runCommand : Function = webExt.cmd[cmd];\n        const result = await runCommand(params, options);\n\n        // Check whether parameters and return values are forwarded as-is.\n        sinon.assert.calledOnce(stub);\n        sinon.assert.calledWithExactly(stub, params, options);\n        assert.equal(expectedResult, result);\n      });\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tests/unit/test.web-ext.js","/* @flow */\nimport {main} from './program';\nimport cmd from './cmd';\nimport * as logger from './util/logger';\n\n// This only exposes util/logger so far.\n// Do we need anything else?\nconst util = {logger};\n\nexport default {main, cmd, util};\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var map = {\n\t\"./\": 34,\n\t\"./build\": 31,\n\t\"./build.js\": 31,\n\t\"./docs\": 55,\n\t\"./docs.js\": 55,\n\t\"./index\": 34,\n\t\"./index.js\": 34,\n\t\"./lint\": 56,\n\t\"./lint.js\": 56,\n\t\"./run\": 57,\n\t\"./run.js\": 57,\n\t\"./sign\": 59,\n\t\"./sign.js\": 59\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 246;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/cmd ^\\.\\/.*$\n// module id = 246\n// module chunks = 0"],"sourceRoot":""}